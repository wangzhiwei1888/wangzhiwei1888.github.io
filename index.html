<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="javascript nodejs web developer...">
<meta property="og:type" content="website">
<meta property="og:title" content="WBlog">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="WBlog">
<meta property="og:description" content="javascript nodejs web developer...">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="wangzhiwei">
<meta property="article:tag" content="javascript nodejs web developer fe engineer">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>WBlog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">WBlog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">wangzhiwei blog</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/10/24/nginx-conf-to-json/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="wangzhiwei">
      <meta itemprop="description" content="javascript nodejs web developer...">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WBlog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/24/nginx-conf-to-json/" class="post-title-link" itemprop="url">nginx conf to json</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-24 08:57:09 / 修改时间：10:16:21" itemprop="dateCreated datePublished" datetime="2025-10-24T08:57:09+08:00">2025-10-24</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>python 版本<br>pip install crossplane</p>
<p>crossplane parse –indent&#x3D;4 nginx.conf &gt; nginx.json</p>
<p>crossplane build nginx.json</p>
<p><a target="_blank" rel="noopener" href="https://github.com/nginxinc/crossplane?tab=readme-ov-file#crossplane-parse">https://github.com/nginxinc/crossplane?tab=readme-ov-file#crossplane-parse</a></p>
<h2 id="转换为-js-版本"><a href="#转换为-js-版本" class="headerlink" title="转换为 js 版本"></a>转换为 js 版本</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br></pre></td><td class="code"><pre><span class="line">nginx-parser.js</span><br><span class="line"></span><br><span class="line">// nginx config lexer + parser (browser version)</span><br><span class="line">// 用法：</span><br><span class="line">//   import &#123; parseNginx &#125; from &#x27;./nginx-parser.js&#x27;;</span><br><span class="line">//   const payload = parseNginx(nginxText, &#123; filename:&#x27;nginx.conf&#x27;, comments:true &#125;);</span><br><span class="line"></span><br><span class="line">const EXTERNAL_PARSERS = &#123;&#125;;   // 预留第三方指令解析器</span><br><span class="line"></span><br><span class="line">// ---------- lexer ----------</span><br><span class="line">function* lex(text, filename = &#x27;nginx.conf&#x27;) &#123;</span><br><span class="line">  let line = 1, col = 0, idx = 0;</span><br><span class="line">  const len = text.length;</span><br><span class="line"></span><br><span class="line">  function skipWhitespace() &#123;</span><br><span class="line">    while (idx &lt; len &amp;&amp; /\s/.test(text[idx])) &#123;</span><br><span class="line">      if (text[idx] === &#x27;\n&#x27;) &#123; line++; col = 0; &#125;</span><br><span class="line">      else col++;</span><br><span class="line">      idx++;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function readString(quote) &#123;</span><br><span class="line">    const start = ++idx;  // skip open quote</span><br><span class="line">    col++;</span><br><span class="line">    while (idx &lt; len &amp;&amp; text[idx] !== quote) &#123;</span><br><span class="line">      if (text[idx] === &#x27;\n&#x27;) &#123; line++; col = 0; &#125;</span><br><span class="line">      else if (text[idx] === &#x27;\\&#x27;) &#123; idx++; col++; &#125; // skip escaped</span><br><span class="line">      idx++; col++;</span><br><span class="line">    &#125;</span><br><span class="line">    if (idx &gt;= len) throw new Error(`Unterminated quoted string at $&#123;filename&#125;:$&#123;line&#125;`);</span><br><span class="line">    const val = text.slice(start, idx);</span><br><span class="line">    idx++; col++; // skip close quote</span><br><span class="line">    return [val, line, true];   // [token, lineno, quoted]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function readToken() &#123;</span><br><span class="line">    const start = idx;</span><br><span class="line">    while (idx &lt; len &amp;&amp; !/\s|[&#123;&#125;;#&quot;&#x27;\\]/.test(text[idx])) &#123;</span><br><span class="line">      idx++; col++;</span><br><span class="line">    &#125;</span><br><span class="line">    return text.slice(start, idx);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  while (idx &lt; len) &#123;</span><br><span class="line">    skipWhitespace();</span><br><span class="line">    if (idx &gt;= len) break;</span><br><span class="line">    const ch = text[idx];</span><br><span class="line"></span><br><span class="line">    if (ch === &#x27;#&#x27; || ch === &#x27;;&#x27; || ch === &#x27;&#123;&#x27; || ch === &#x27;&#125;&#x27;) &#123;</span><br><span class="line">      const tok = ch === &#x27;#&#x27; ? text.slice(idx, text.indexOf(&#x27;\n&#x27;, idx)) || text.slice(idx)</span><br><span class="line">                             : ch;</span><br><span class="line">      yield [tok, line, false];</span><br><span class="line">      if (tok === &#x27;\n&#x27;) &#123; line++; col = 0; &#125;</span><br><span class="line">      else col++;</span><br><span class="line">      idx += tok.length;</span><br><span class="line">    &#125; else if (ch === &#x27;&quot;&#x27; || ch === &quot;&#x27;&quot;) &#123;</span><br><span class="line">      yield readString(ch);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      const tok = readToken();</span><br><span class="line">      if (tok) yield [tok, line, false];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ---------- util ----------</span><br><span class="line">class NgxParserDirectiveError extends Error &#123;</span><br><span class="line">  constructor(msg, lineno) &#123;</span><br><span class="line">    super(msg);</span><br><span class="line">    this.name = &#x27;NgxParserDirectiveError&#x27;;</span><br><span class="line">    this.lineno = lineno;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 简易版 analyze，只检查末尾符号</span><br><span class="line">function analyze(&#123; fname, stmt, term, ctx, strict, check_ctx, check_args &#125;) &#123;</span><br><span class="line">  const dir = stmt.directive;</span><br><span class="line">  if (dir === &#x27;#&#x27;) return;          // 注释跳过</span><br><span class="line">  if (dir.startsWith(&#x27;#&#x27;)) return;  // 行内注释也跳过</span><br><span class="line">  // 更复杂的上下文/参数检查可在此扩展</span><br><span class="line">  if (term !== &#x27;;&#x27; &amp;&amp; term !== &#x27;&#123;&#x27; &amp;&amp; term !== &#x27;&#125;&#x27;) &#123;</span><br><span class="line">    throw new NgxParserDirectiveError(</span><br><span class="line">      `directive &quot;$&#123;dir&#125;&quot; is not terminated by &quot;;&quot; or &quot;&#123;&quot;`, stmt.line);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function enterBlockCtx(stmt, ctx) &#123;</span><br><span class="line">  // 返回新的上下文，简单拼路径</span><br><span class="line">  return [...ctx, stmt.directive];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ---------- parser ----------</span><br><span class="line">export function parseNginx(text, &#123;</span><br><span class="line">  filename = &#x27;nginx.conf&#x27;,</span><br><span class="line">  onerror = null,</span><br><span class="line">  catchErrors = true,</span><br><span class="line">  ignore = [],</span><br><span class="line">  single = false,</span><br><span class="line">  comments = false,</span><br><span class="line">  strict = false,</span><br><span class="line">  checkCtx = true,</span><br><span class="line">  checkArgs = true</span><br><span class="line">&#125; = &#123;&#125;) &#123;</span><br><span class="line">  const tokens = [...lex(text, filename)]; // 先全部展开，方便 next()</span><br><span class="line">  let tokIdx = 0;</span><br><span class="line">  function next() &#123;</span><br><span class="line">    if (tokIdx &gt;= tokens.length) return [null, -1, false];</span><br><span class="line">    return tokens[tokIdx++];</span><br><span class="line">  &#125;</span><br><span class="line">  function peek() &#123;</span><br><span class="line">    if (tokIdx &gt;= tokens.length) return [null, -1, false];</span><br><span class="line">    return tokens[tokIdx];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  const payload = &#123;</span><br><span class="line">    status: &#x27;ok&#x27;,</span><br><span class="line">    errors: [],</span><br><span class="line">    config: []</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  function handleError(parsing, e) &#123;</span><br><span class="line">    const file = parsing.file;</span><br><span class="line">    const errObj = &#123; file, error: e.message, line: e.lineno || null &#125;;</span><br><span class="line">    if (onerror) errObj.callback = onerror(e);</span><br><span class="line"></span><br><span class="line">    parsing.status = &#x27;failed&#x27;;</span><br><span class="line">    parsing.errors.push(&#123; error: e.message, line: e.lineno || null &#125;);</span><br><span class="line"></span><br><span class="line">    payload.status = &#x27;failed&#x27;;</span><br><span class="line">    payload.errors.push(errObj);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function _parse(parsing, ctx = [], consume = false) &#123;</span><br><span class="line">    const fname = parsing.file;</span><br><span class="line">    const parsed = [];</span><br><span class="line"></span><br><span class="line">    while (true) &#123;</span><br><span class="line">      const [token, lineno, quoted] = next();</span><br><span class="line">      if (!token) break;</span><br><span class="line">      if (token === &#x27;&#125;&#x27; &amp;&amp; !quoted) break;</span><br><span class="line">      if (consume) &#123;</span><br><span class="line">        if (token === &#x27;&#123;&#x27; &amp;&amp; !quoted) _parse(parsing, ctx, true);</span><br><span class="line">        continue;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      const directive = token;</span><br><span class="line"></span><br><span class="line">      // 注释行</span><br><span class="line">      if (directive.startsWith(&#x27;#&#x27;) &amp;&amp; !quoted) &#123;</span><br><span class="line">        if (comments) &#123;</span><br><span class="line">          parsed.push(&#123; directive: &#x27;#&#x27;, line: lineno, args: [], comment: directive.slice(1).trim() &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        continue;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      const stmt = &#123; directive, line: lineno, args: [] &#125;;</span><br><span class="line">      if (!single) stmt.file = fname;</span><br><span class="line"></span><br><span class="line">      // 收集参数</span><br><span class="line">      const commentsInArgs = [];</span><br><span class="line">      let term;</span><br><span class="line">      while (true) &#123;</span><br><span class="line">        const [t, , q] = peek();</span><br><span class="line">        if (!t || (!q &amp;&amp; [&#x27;;&#x27;, &#x27;&#123;&#x27;, &#x27;&#125;&#x27;].includes(t))) &#123; term = t; next(); break; &#125;</span><br><span class="line">        next();</span><br><span class="line">        if (t.startsWith(&#x27;#&#x27;) &amp;&amp; !q) commentsInArgs.push(t.slice(1).trim());</span><br><span class="line">        else stmt.args.push(t);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      if (ignore.includes(stmt.directive)) &#123;</span><br><span class="line">        if (term === &#x27;&#123;&#x27; &amp;&amp; !quoted) _parse(parsing, ctx, true);</span><br><span class="line">        continue;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      // if 特殊处理</span><br><span class="line">      if (stmt.directive === &#x27;if&#x27;) &#123;</span><br><span class="line">        const args = stmt.args;</span><br><span class="line">        if (args.length &amp;&amp; args[0].startsWith(&#x27;(&#x27;) &amp;&amp; args[args.length - 1].endsWith(&#x27;)&#x27;)) &#123;</span><br><span class="line">          args[0] = args[0].slice(1).trimLeft();</span><br><span class="line">          args[args.length - 1] = args[args.length - 1].slice(0, -1).trimRight();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      try &#123;</span><br><span class="line">        analyze(&#123; fname, stmt, term, ctx, strict, check_ctx: checkCtx, check_args: checkArgs &#125;);</span><br><span class="line">      &#125; catch (e) &#123;</span><br><span class="line">        if (catchErrors) &#123;</span><br><span class="line">          handleError(parsing, e);</span><br><span class="line">          if (e.message.includes(&#x27;is not terminated&#x27;) &amp;&amp; term !== &#x27;&#125;&#x27; &amp;&amp; !quoted) &#123;</span><br><span class="line">            _parse(parsing, ctx, true);</span><br><span class="line">          &#125;</span><br><span class="line">          continue;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          throw e;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      // include 处理（浏览器端不做文件 IO，只留空壳）</span><br><span class="line">      if (!single &amp;&amp; stmt.directive === &#x27;include&#x27;) &#123;</span><br><span class="line">        stmt.includes = [];   // 实际文件列表无法获取，留空</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      if (term === &#x27;&#123;&#x27; &amp;&amp; !quoted) &#123;</span><br><span class="line">        const inner = enterBlockCtx(stmt, ctx);</span><br><span class="line">        stmt.block = _parse(parsing, inner);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      parsed.push(stmt);</span><br><span class="line"></span><br><span class="line">      // 行内注释追加</span><br><span class="line">      commentsInArgs.forEach(c =&gt; parsed.push(&#123; directive: &#x27;#&#x27;, line: stmt.line, args: [], comment: c &#125;));</span><br><span class="line">    &#125;</span><br><span class="line">    return parsed;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 主流程</span><br><span class="line">  const parsing = &#123; file: filename, status: &#x27;ok&#x27;, errors: [], parsed: [] &#125;;</span><br><span class="line">  try &#123;</span><br><span class="line">    parsing.parsed = _parse(parsing, []);</span><br><span class="line">  &#125; catch (e) &#123;</span><br><span class="line">    handleError(parsing, e);</span><br><span class="line">  &#125;</span><br><span class="line">  payload.config.push(parsing);</span><br><span class="line">  return payload;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 预留外部解析器注册</span><br><span class="line">export function registerExternalParser(parser, directives) &#123;</span><br><span class="line">  directives.forEach(d =&gt; &#123; EXTERNAL_PARSERS[d] = parser; &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">a.html</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot; /&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;script type=&quot;module&quot;&gt;</span><br><span class="line">      import &#123; parseNginx &#125; from &quot;./nginx-parser.js&quot;;</span><br><span class="line"></span><br><span class="line">      const conf = `</span><br><span class="line">      user  nginx;</span><br><span class="line">      worker_processes  auto;</span><br><span class="line">      </span><br><span class="line">      events &#123;</span><br><span class="line">          worker_connections  1024;</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      http &#123;</span><br><span class="line">          include       mime.types;</span><br><span class="line">          default_type  application/octet-stream;</span><br><span class="line">      </span><br><span class="line">          server &#123;</span><br><span class="line">              listen 80;</span><br><span class="line">              location / &#123;</span><br><span class="line">                  root /usr/share/nginx/html;</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      `;</span><br><span class="line"></span><br><span class="line">      const payload = parseNginx(conf, &#123; comments: true &#125;);</span><br><span class="line">      console.log(JSON.stringify(payload, null, 2));</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">nginx-builder.js</span><br><span class="line"></span><br><span class="line">// nginx config builder (browser version)</span><br><span class="line">// 用法：</span><br><span class="line">//   import &#123; build, buildFiles &#125; from &#x27;./nginx-builder.js&#x27;;</span><br><span class="line">//   const txt = build(payload, &#123; indent:4, tabs:false, header:true &#125;);</span><br><span class="line"></span><br><span class="line">const EXTERNAL_BUILDERS = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">// 与 Python 版行为完全一致的转义检测</span><br><span class="line">function* _escape(string) &#123;</span><br><span class="line">  let prev = &#x27;&#x27;, char = &#x27;&#x27;;</span><br><span class="line">  for (let i = 0; i &lt; string.length; i++) &#123;</span><br><span class="line">    char = string[i];</span><br><span class="line">    if (prev === &#x27;\\&#x27; || prev + char === &#x27;$&#123;&#x27;) &#123;</span><br><span class="line">      prev += char;</span><br><span class="line">      yield prev;</span><br><span class="line">      prev = &#x27;&#x27;;</span><br><span class="line">      continue;</span><br><span class="line">    &#125;</span><br><span class="line">    if (prev === &#x27;$&#x27;) yield prev;</span><br><span class="line">    if (char !== &#x27;\\&#x27; &amp;&amp; char !== &#x27;$&#x27;) yield char;</span><br><span class="line">    prev = char;</span><br><span class="line">  &#125;</span><br><span class="line">  if (char === &#x27;\\&#x27; || char === &#x27;$&#x27;) yield char;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function _needsQuotes(str) &#123;</span><br><span class="line">  if (str === &#x27;&#x27;) return true;</span><br><span class="line">  const gen = _escape(str);</span><br><span class="line">  // 首字符</span><br><span class="line">  let &#123; value: char, done &#125; = gen.next();</span><br><span class="line">  if (done) return false;</span><br><span class="line">  if (/\s/.test(char) || [&#x27;&#123;&#x27;, &#x27;&#125;&#x27;, &#x27;;&#x27;, &#x27;&quot;&#x27;, &quot;&#x27;&quot;, &#x27;$&#123;&#x27;].includes(char)) return true;</span><br><span class="line"></span><br><span class="line">  let expanding = false;</span><br><span class="line">  for (const ch of gen) &#123;</span><br><span class="line">    if (/\s/.test(ch) || [&#x27;&#123;&#x27;, &#x27;;&#x27;, &#x27;&quot;&#x27;, &quot;&#x27;&quot;].includes(ch)) return true;</span><br><span class="line">    if (ch === (expanding ? &#x27;&#125;&#x27; : &#x27;$&#123;&#x27;)) expanding = !expanding;</span><br><span class="line">  &#125;</span><br><span class="line">  return expanding;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 把字符串转成 nginx 可识别的带引号格式</span><br><span class="line">function _enquote(arg) &#123;</span><br><span class="line">  if (arg == null) return &#x27;&quot;&quot;&#x27;;          // 新增：空参数直接给 &quot;&quot;</span><br><span class="line">  if (!_needsQuotes(arg)) return arg;</span><br><span class="line">  // 浏览器里 repr 等价 JSON.stringify 后去头尾引号再自己加</span><br><span class="line">  let s = JSON.stringify(arg);</span><br><span class="line">  // JSON 会把 \ 变成 \\，我们需要单 \</span><br><span class="line">  s = s.replace(/\\\\/g, &#x27;\\&#x27;);</span><br><span class="line">  // 再包一层引号</span><br><span class="line">  return `&quot;$&#123;s.slice(1, -1)&#125;&quot;`;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 将 payload 构建成字符串</span><br><span class="line"> * @param &#123;Array&#125; payload  对应 python 里的 parsed 数组</span><br><span class="line"> * @param &#123;Object&#125; opts</span><br><span class="line"> *        indent:number     缩进空格数</span><br><span class="line"> *        tabs:boolean      用 tab 代替空格</span><br><span class="line"> *        header:boolean    是否带生成头注释</span><br><span class="line"> * @returns &#123;string&#125;  nginx 文本</span><br><span class="line"> */</span><br><span class="line">export function build(payload, &#123; indent = 4, tabs = false, header = false &#125; = &#123;&#125;) &#123;</span><br><span class="line">  const padChar = tabs ? &#x27;\t&#x27; : &#x27; &#x27;;</span><br><span class="line">  const padding = (d) =&gt; padChar.repeat(tabs ? d : d * indent);</span><br><span class="line"></span><br><span class="line">  let head = &#x27;&#x27;;</span><br><span class="line">  if (header) &#123;</span><br><span class="line">    head += &#x27;# This config was built from JSON using NGINX crossplane.\n&#x27;;</span><br><span class="line">    head += &#x27;# If you encounter any bugs please report them here:\n&#x27;;</span><br><span class="line">    head += &#x27;# https://github.com/nginxinc/crossplane/issues\n\n&#x27;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function _buildBlock(block, depth, lastLine) &#123;</span><br><span class="line">    let out = &#x27;&#x27;;</span><br><span class="line">    const margin = padding(depth);</span><br><span class="line"></span><br><span class="line">    for (const stmt of block) &#123;</span><br><span class="line">      const dir = _enquote(stmt.directive ?? stmt.cmd ?? &#x27;&#x27;);</span><br><span class="line">      const line = stmt.line || 0;</span><br><span class="line"></span><br><span class="line">      // 行尾注释合并</span><br><span class="line">      if (dir === &#x27;#&#x27; &amp;&amp; line === lastLine) &#123;</span><br><span class="line">        out += &#x27; #&#x27; + stmt.comment;</span><br><span class="line">        continue;</span><br><span class="line">      &#125;</span><br><span class="line">      if (dir === &#x27;#&#x27;) &#123;</span><br><span class="line">        out += (out ? &#x27;\n&#x27; : &#x27;&#x27;) + margin + &#x27;#&#x27; + stmt.comment;</span><br><span class="line">        lastLine = line;</span><br><span class="line">        continue;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      // 外部自定义构造器</span><br><span class="line">      if (EXTERNAL_BUILDERS[dir]) &#123;</span><br><span class="line">        out += (out ? &#x27;\n&#x27; : &#x27;&#x27;) + margin + EXTERNAL_BUILDERS[dir](stmt, padding, indent, tabs);</span><br><span class="line">        lastLine = line;</span><br><span class="line">        continue;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      // 普通指令</span><br><span class="line">      const args = (stmt.args ?? stmt.arguments ?? []).map(_enquote);</span><br><span class="line">      let built;</span><br><span class="line">      if (dir === &#x27;if&#x27;) &#123;</span><br><span class="line">        built = `if ($&#123;args.join(&#x27; &#x27;)&#125;)`;</span><br><span class="line">      &#125; else if (args.length) &#123;</span><br><span class="line">        built = `$&#123;dir&#125; $&#123;args.join(&#x27; &#x27;)&#125;`;</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        built = dir;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      if (stmt.block == null) &#123;</span><br><span class="line">        built += &#x27;;&#x27;;</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        built += &#x27; &#123;&#x27;;</span><br><span class="line">        const inner = _buildBlock(stmt.block, depth + 1, line);</span><br><span class="line">        built += inner + &#x27;\n&#x27; + margin + &#x27;&#125;&#x27;;</span><br><span class="line">      &#125;</span><br><span class="line">      out += (out ? &#x27;\n&#x27; : &#x27;&#x27;) + margin + built;</span><br><span class="line">      lastLine = line;</span><br><span class="line">    &#125;</span><br><span class="line">    return out;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  const body = _buildBlock(payload, 0, 0);</span><br><span class="line">  return head + body;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 为浏览器准备的“写盘”封装：返回 filename =&gt; content 的 Map</span><br><span class="line"> * @param &#123;Object&#125; payload   crossplane.parse 的完整输出</span><br><span class="line"> * @param &#123;Object&#125; opts      同 build 函数</span><br><span class="line"> * @returns &#123;Map&#125;            key=绝对路径，value=文本</span><br><span class="line"> */</span><br><span class="line">export function buildFiles(payload, &#123; indent = 4, tabs = false, header = false &#125; = &#123;&#125;) &#123;</span><br><span class="line">  const map = new Map();</span><br><span class="line">  for (const config of payload.config) &#123;</span><br><span class="line">    const content = build(config.parsed, &#123; indent, tabs, header &#125;);</span><br><span class="line">    map.set(config.file, content.replace(/\n+$/, &#x27;\n&#x27;)); // 保证末尾一个换行</span><br><span class="line">  &#125;</span><br><span class="line">  return map;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 注册第三方构造器</span><br><span class="line"> * @param &#123;Function&#125; builder     function(stmt, padding, indent, tabs)-&gt;string</span><br><span class="line"> * @param &#123;Array&lt;string&gt;&#125; dirs   指令列表</span><br><span class="line"> */</span><br><span class="line">export function registerExternalBuilder(builder, dirs) &#123;</span><br><span class="line">  dirs.forEach(d =&gt; &#123; EXTERNAL_BUILDERS[d] = builder; &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>b.html</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot; /&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;script type=&quot;module&quot;&gt;</span><br><span class="line">      import &#123; build, buildFiles &#125; from &quot;./nginx-builder.js&quot;;</span><br><span class="line"></span><br><span class="line">      const payload = &#123;</span><br><span class="line">        config: [</span><br><span class="line">          &#123;</span><br><span class="line">            file: &quot;/etc/nginx/nginx.conf&quot;,</span><br><span class="line">            parsed: [</span><br><span class="line">              &#123;</span><br><span class="line">                directive: &quot;user&quot;,</span><br><span class="line">                line: 2,</span><br><span class="line">                args: [&quot;nginx&quot;],</span><br><span class="line">                file: &quot;nginx.conf&quot;,</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                directive: &quot;worker_processes&quot;,</span><br><span class="line">                line: 3,</span><br><span class="line">                args: [&quot;auto&quot;],</span><br><span class="line">                file: &quot;nginx.conf&quot;,</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                directive: &quot;events&quot;,</span><br><span class="line">                line: 5,</span><br><span class="line">                args: [],</span><br><span class="line">                file: &quot;nginx.conf&quot;,</span><br><span class="line">                block: [</span><br><span class="line">                  &#123;</span><br><span class="line">                    directive: &quot;worker_connections&quot;,</span><br><span class="line">                    line: 6,</span><br><span class="line">                    args: [&quot;1024&quot;],</span><br><span class="line">                    file: &quot;nginx.conf&quot;,</span><br><span class="line">                  &#125;,</span><br><span class="line">                ],</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                directive: &quot;http&quot;,</span><br><span class="line">                line: 9,</span><br><span class="line">                args: [],</span><br><span class="line">                file: &quot;nginx.conf&quot;,</span><br><span class="line">                block: [</span><br><span class="line">                  &#123;</span><br><span class="line">                    directive: &quot;include&quot;,</span><br><span class="line">                    line: 10,</span><br><span class="line">                    args: [&quot;mime.types&quot;],</span><br><span class="line">                    file: &quot;nginx.conf&quot;,</span><br><span class="line">                    includes: [],</span><br><span class="line">                  &#125;,</span><br><span class="line">                  &#123;</span><br><span class="line">                    directive: &quot;default_type&quot;,</span><br><span class="line">                    line: 11,</span><br><span class="line">                    args: [&quot;application/octet-stream&quot;],</span><br><span class="line">                    file: &quot;nginx.conf&quot;,</span><br><span class="line">                  &#125;,</span><br><span class="line">                  &#123;</span><br><span class="line">                    directive: &quot;server&quot;,</span><br><span class="line">                    line: 13,</span><br><span class="line">                    args: [],</span><br><span class="line">                    file: &quot;nginx.conf&quot;,</span><br><span class="line">                    block: [</span><br><span class="line">                      &#123;</span><br><span class="line">                        directive: &quot;listen&quot;,</span><br><span class="line">                        line: 14,</span><br><span class="line">                        args: [&quot;80&quot;],</span><br><span class="line">                        file: &quot;nginx.conf&quot;,</span><br><span class="line">                      &#125;,</span><br><span class="line">                      &#123;</span><br><span class="line">                        directive: &quot;location&quot;,</span><br><span class="line">                        line: 15,</span><br><span class="line">                        args: [&quot;/&quot;],</span><br><span class="line">                        file: &quot;nginx.conf&quot;,</span><br><span class="line">                        block: [</span><br><span class="line">                          &#123;</span><br><span class="line">                            directive: &quot;root&quot;,</span><br><span class="line">                            line: 16,</span><br><span class="line">                            args: [&quot;/usr/share/nginx/html&quot;],</span><br><span class="line">                            file: &quot;nginx.conf&quot;,</span><br><span class="line">                          &#125;,</span><br><span class="line">                        ],</span><br><span class="line">                      &#125;,</span><br><span class="line">                    ],</span><br><span class="line">                  &#125;,</span><br><span class="line">                ],</span><br><span class="line">              &#125;,</span><br><span class="line">            ],</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      // 1. 只拿文本</span><br><span class="line">      const txt = build(payload.config[0].parsed, &#123; header: true &#125;);</span><br><span class="line">      console.log(txt);</span><br><span class="line"></span><br><span class="line">      // 2. 拿全部文件</span><br><span class="line">      const fileMap = buildFiles(payload);</span><br><span class="line">      for (const [name, content] of fileMap) &#123;</span><br><span class="line">        console.log(&quot;===&quot;, name, &quot;===&quot;);</span><br><span class="line">        console.log(content);</span><br><span class="line">      &#125;</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/10/23/%E6%8A%93%E5%8C%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="wangzhiwei">
      <meta itemprop="description" content="javascript nodejs web developer...">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WBlog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/23/%E6%8A%93%E5%8C%85/" class="post-title-link" itemprop="url">抓9000 端口 上的请求</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-23 17:03:14 / 修改时间：17:18:10" itemprop="dateCreated datePublished" datetime="2025-10-23T17:03:14+08:00">2025-10-23</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%93%E5%8C%85/" itemprop="url" rel="index"><span itemprop="name">抓包</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>192.168.40.116 机器上</p>
<p>ip a</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 ::1/128 scope host</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">2: ens192: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group default qlen 1000</span><br><span class="line">    link/ether 00:0c:29:94:5c:7f brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.40.116/24 brd 192.168.40.255 scope global noprefixroute ens192</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet 172.17.10.10/24 scope global ens192</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 2408:8606:8400:30a:6::41/128 scope global noprefixroute dynamic</span><br><span class="line">       valid_lft 6018sec preferred_lft 5718sec</span><br><span class="line">    inet6 fe80::d6f6:f5f6:1e6c:cf29/64 scope link noprefixroute</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">3: virbr0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN group default qlen 1000</span><br><span class="line">    link/ether 52:54:00:26:ce:e5 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.122.1/24 brd 192.168.122.255 scope global virbr0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ens192 为默认网卡</p>
<p>sudo tcpdump ‘port 9000’ -w a.cap -i ens192</p>
<p>监听 9000 端口 上的请求，指定 网卡 为 ens192 并将其保存到 a.cap 文件中</p>
<p>下载 a.cap 文件</p>
<p>将其 拉入到 wireshark 进行分析</p>
<p>sudo ln -s &#x2F;Applications&#x2F;Wireshark.app&#x2F;Contents&#x2F;MacOS&#x2F;Wireshark &#x2F;usr&#x2F;local&#x2F;bin&#x2F;wireshark</p>
<p>wireshark a.cap</p>
<p>也可以将 a.cap 文件拉入到 wireshark 中进行查看</p>
<p><img src="/../images/wireshark/01.png"></p>
<p><img src="/../images/wireshark/02.png"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/08/13/sekiro/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="wangzhiwei">
      <meta itemprop="description" content="javascript nodejs web developer...">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WBlog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/08/13/sekiro/" class="post-title-link" itemprop="url">sekiro - js逆向</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-08-13 15:47:06" itemprop="dateCreated datePublished" datetime="2025-08-13T15:47:06+08:00">2025-08-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-10-23 17:02:14" itemprop="dateModified" datetime="2025-10-23T17:02:14+08:00">2025-10-23</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>安装：sekiro</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">docker run -d --name sekiro -p 5612:5612 \</span><br><span class="line">  registry.cn-beijing.aliyuncs.com/iinti/common:sekiro-all-in-one-latest</span><br><span class="line">  </span><br></pre></td></tr></table></figure>

<p>浏览器中登录：<br><a target="_blank" rel="noopener" href="http://127.0.0.1:5612/#/">http://127.0.0.1:5612/#/</a></p>
<p>打开某网页，在浏览器 console 中输入：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">function SekiroClient(e)&#123;if(this.wsURL=e,this.handlers=&#123;&#125;,this.socket=&#123;&#125;,!e)throw new Error(&quot;wsURL can not be empty!!&quot;);this.webSocketFactory=this.resolveWebSocketFactory(),this.connect()&#125;SekiroClient.prototype.resolveWebSocketFactory=function()&#123;if(&quot;object&quot;==typeof window)&#123;var e=window.WebSocket?window.WebSocket:window.MozWebSocket;return function(o)&#123;function t(o)&#123;this.mSocket=new e(o)&#125;return t.prototype.close=function()&#123;this.mSocket.close()&#125;,t.prototype.onmessage=function(e)&#123;this.mSocket.onmessage=e&#125;,t.prototype.onopen=function(e)&#123;this.mSocket.onopen=e&#125;,t.prototype.onclose=function(e)&#123;this.mSocket.onclose=e&#125;,t.prototype.send=function(e)&#123;this.mSocket.send(e)&#125;,new t(o)&#125;&#125;if(&quot;object&quot;==typeof weex)try&#123;console.log(&quot;test webSocket for weex&quot;);var o=weex.requireModule(&quot;webSocket&quot;);return console.log(&quot;find webSocket for weex:&quot;+o),function(e)&#123;try&#123;o.close()&#125;catch(e)&#123;&#125;return o.WebSocket(e,&quot;&quot;),o&#125;&#125;catch(e)&#123;console.log(e)&#125;if(&quot;object&quot;==typeof WebSocket)return function(o)&#123;return new e(o)&#125;;throw new Error(&quot;the js environment do not support websocket&quot;)&#125;,SekiroClient.prototype.connect=function()&#123;console.log(&quot;sekiro: begin of connect to wsURL: &quot;+this.wsURL);var e=this;try&#123;this.socket=this.webSocketFactory(this.wsURL)&#125;catch(o)&#123;return console.log(&quot;sekiro: create connection failed,reconnect after 2s:&quot;+o),void setTimeout(function()&#123;e.connect()&#125;,2e3)&#125;this.socket.onmessage(function(o)&#123;e.handleSekiroRequest(o.data)&#125;),this.socket.onopen(function(e)&#123;console.log(&quot;sekiro: open a sekiro client connection&quot;)&#125;),this.socket.onclose(function(o)&#123;console.log(&quot;sekiro: disconnected ,reconnection after 2s&quot;),setTimeout(function()&#123;e.connect()&#125;,2e3)&#125;)&#125;,SekiroClient.prototype.handleSekiroRequest=function(e)&#123;console.log(&quot;receive sekiro request: &quot;+e);var o=JSON.parse(e),t=o.__sekiro_seq__;if(o.action)&#123;var n=o.action;if(this.handlers[n])&#123;var s=this.handlers[n],i=this;try&#123;s(o,function(e)&#123;try&#123;i.sendSuccess(t,e)&#125;catch(e)&#123;i.sendFailed(t,&quot;e:&quot;+e)&#125;&#125;,function(e)&#123;i.sendFailed(t,e)&#125;)&#125;catch(e)&#123;console.log(&quot;error: &quot;+e),i.sendFailed(t,&quot;:&quot;+e)&#125;&#125;else this.sendFailed(t,&quot;no action handler: &quot;+n+&quot; defined&quot;)&#125;else this.sendFailed(t,&quot;need request param &#123;action&#125;&quot;)&#125;,SekiroClient.prototype.sendSuccess=function(e,o)&#123;var t;if(&quot;string&quot;==typeof o)try&#123;t=JSON.parse(o)&#125;catch(e)&#123;(t=&#123;&#125;).data=o&#125;else&quot;object&quot;==typeof o?t=o:(t=&#123;&#125;).data=o;(Array.isArray(t)||&quot;string&quot;==typeof t)&amp;&amp;(t=&#123;data:t,code:0&#125;),t.code?t.code=0:(t.status,t.status=0),t.__sekiro_seq__=e;var n=JSON.stringify(t);console.log(&quot;response :&quot;+n),this.socket.send(n)&#125;,SekiroClient.prototype.sendFailed=function(e,o)&#123;&quot;string&quot;!=typeof o&amp;&amp;(o=JSON.stringify(o));var t=&#123;&#125;;t.message=o,t.status=-1,t.__sekiro_seq__=e;var n=JSON.stringify(t);console.log(&quot;sekiro: response :&quot;+n),this.socket.send(n)&#125;,SekiroClient.prototype.registerAction=function(e,o)&#123;if(&quot;string&quot;!=typeof e)throw new Error(&quot;an action must be string&quot;);if(&quot;function&quot;!=typeof o)throw new Error(&quot;a handler must be function&quot;);return console.log(&quot;sekiro: register action: &quot;+e),this.handlers[e]=o,this&#125;;</span><br><span class="line">var client = new SekiroClient(&quot;ws://127.0.0.1:5612/business/register?group=testAction&amp;clientId=&quot; + Math.random());</span><br><span class="line">client.registerAction(&quot;testAction&quot;, function (request, resolve, reject) &#123;</span><br><span class="line"></span><br><span class="line">    resolve(Math.random());</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>浏览器中打开：</p>
<p><a target="_blank" rel="noopener" href="http://localhost:5612/business/invoke?group=testAction&action=testAction&param=testparm">http://localhost:5612/business/invoke?group=testAction&amp;action=testAction&amp;param=testparm</a></p>
<p>官方文档：<a target="_blank" rel="noopener" href="https://sekiro.iinti.cn/sekiro-doc/">https://sekiro.iinti.cn/sekiro-doc/</a><br>参考视频：<br><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV16U4y1B7PA/?spm_id_from=333.1387.favlist.content.click&vd_source=ffda878df0ed45bee1ade91d8f451048">https://www.bilibili.com/video/BV16U4y1B7PA/?spm_id_from=333.1387.favlist.content.click&amp;vd_source=ffda878df0ed45bee1ade91d8f451048</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/08/07/vite-monorepo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="wangzhiwei">
      <meta itemprop="description" content="javascript nodejs web developer...">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WBlog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/08/07/vite-monorepo/" class="post-title-link" itemprop="url">vite+monorepo</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-08-07 17:54:52 / 修改时间：17:56:44" itemprop="dateCreated datePublished" datetime="2025-08-07T17:54:52+08:00">2025-08-07</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>混合项目结构，所有相关的工程形成子包进行管理<br>技术栈高度统一，(团队基建项目、业务项目、子服务，技术栈)规范化、自动化、流程化项目间共享<br>依赖管理，版本统-管理<br>部署，docker、docker compose，自动化脚本统-部署流程</p>
<p>参考：<br><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1UePTeqEu6/?spm_id_from=333.1387.favlist.content.click">https://www.bilibili.com/video/BV1UePTeqEu6/?spm_id_from=333.1387.favlist.content.click</a><br><a target="_blank" rel="noopener" href="https://github.com/robcaldecott/pnpm-vite-monorepo-example">https://github.com/robcaldecott/pnpm-vite-monorepo-example</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/05/13/%E5%90%B4%E6%81%A9%E8%BE%BE%E7%AE%97%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="wangzhiwei">
      <meta itemprop="description" content="javascript nodejs web developer...">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WBlog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/05/13/%E5%90%B4%E6%81%A9%E8%BE%BE%E7%AE%97%E6%B3%95/" class="post-title-link" itemprop="url">吴恩达算法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-05-13 09:37:07" itemprop="dateCreated datePublished" datetime="2025-05-13T09:37:07+08:00">2025-05-13</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/05/10/tfjs-study6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="wangzhiwei">
      <meta itemprop="description" content="javascript nodejs web developer...">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WBlog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/05/10/tfjs-study6/" class="post-title-link" itemprop="url">tfjs-study6</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-05-10 15:31:07 / 修改时间：16:48:31" itemprop="dateCreated datePublished" datetime="2025-05-10T15:31:07+08:00">2025-05-10</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="python-与-javascript-互转"><a href="#python-与-javascript-互转" class="headerlink" title="python 与 javascript 互转"></a>python 与 javascript 互转</h2><p>python 模型：<br>通过 python 版 TensorFlow&#x2F;Keras 生成模型</p>
<p>包括： TensorFlow SavedModel、Keras HDF5 模型 等</p>
<p>获取：开源网站下载&#x2F;算法同事提供</p>
<p>javascript 模型：</p>
<p>可以在 TensorFlowJS中运行的模型</p>
<p>包括： tfjs_layers_model.json、tfjs_graph_model.json、tfjs_weights.bin 等</p>
<p>获取：开源网站下载&#x2F;通过TFJS生成&#x2F;由python 模型转换而来</p>
<p>为何要进行互转?<br>Python to JavaScript:JavaScript模型可以在浏览器中运行</p>
<p>JavaScript to Python:少见,为了在更多平台运行</p>
<p>JavaScript to JavaScript:分片&#x2F;量化&#x2F;加速</p>
<p>如何进行互转?<br>安装Tensorflow.js Converter<br>在命令行指定输入输出的路径和模型格式即可</p>
<p>操作步骤<br>安装Tensorflow.js Converter<br>Python与JavaScript模型互转<br>JavaScript模型的互转:分片、量化、加速</p>
<p>安装Tensorflow.js Converter</p>
<p>操作步骤<br>安装Conda<br>使用Conda安装Python虚拟环境<br>使用Python虚拟环境安装Tensorflow.jsConverter</p>
<p><img src="/../images/tfjs/69.png"></p>
<p><img src="/../images/tfjs/70.png"></p>
<p><img src="/../images/tfjs/71.png"></p>
<p><img src="/../images/tfjs/72.png"></p>
<p><img src="/../images/tfjs/73.png"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/05/10/tfjs-study5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="wangzhiwei">
      <meta itemprop="description" content="javascript nodejs web developer...">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WBlog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/05/10/tfjs-study5/" class="post-title-link" itemprop="url">tfjs-study5</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-05-10 14:23:22 / 修改时间：16:25:42" itemprop="dateCreated datePublished" datetime="2025-05-10T14:23:22+08:00">2025-05-10</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="使用预训练模型进行语音识别"><a href="#使用预训练模型进行语音识别" class="headerlink" title="使用预训练模型进行语音识别"></a>使用预训练模型进行语音识别</h2><p>模型接受声音信息，输出分类信息<br>声音在计算机里是声谱图，因此也可以使用卷积神经网络进行识别</p>
<p><img src="/../images/tfjs/65.png"></p>
<p><img src="/../images/tfjs/66.png"></p>
<p><img src="/../images/tfjs/67.png"></p>
<p><img src="/../images/tfjs/68.png"></p>
<p>script.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">import * as speechCommands from &#x27;@tensorflow-models/speech-commands&#x27;;</span><br><span class="line"></span><br><span class="line">const MODEL_PATH = &#x27;http://127.0.0.1:8080/speech&#x27;;</span><br><span class="line"></span><br><span class="line">window.onload = async () =&gt; &#123;</span><br><span class="line">    const recognizer = speechCommands.create(</span><br><span class="line">        &#x27;BROWSER_FFT&#x27;,</span><br><span class="line">        null,</span><br><span class="line">        MODEL_PATH + &#x27;/model.json&#x27;,</span><br><span class="line">        MODEL_PATH + &#x27;/metadata.json&#x27;</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    await recognizer.ensureModelLoaded();</span><br><span class="line"></span><br><span class="line">    const labels = recognizer.wordLabels().slice(2); //</span><br><span class="line">    const resultEl = document.querySelector(&#x27;#result&#x27;);</span><br><span class="line">    resultEl.innerHTML = labels.map(l =&gt; `</span><br><span class="line">        &lt;div&gt;$&#123;l&#125;&lt;/div&gt;</span><br><span class="line">    `).join(&#x27;&#x27;);</span><br><span class="line">    recognizer.listen(result =&gt; &#123; //会打开浏览器麦克风</span><br><span class="line">        const &#123; scores &#125; = result;</span><br><span class="line">        const maxValue = Math.max(...scores);</span><br><span class="line">        const index = scores.indexOf(maxValue) - 2;</span><br><span class="line">        resultEl.innerHTML = labels.map((l, i) =&gt; `</span><br><span class="line">        &lt;div style=&quot;background: $&#123;i === index &amp;&amp; &#x27;green&#x27;&#125;&quot;&gt;$&#123;l&#125;&lt;/div&gt;</span><br><span class="line">        `).join(&#x27;&#x27;);</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        overlapFactor: 0.3, //重叠</span><br><span class="line">        probabilityThreshold: 0.9 // 置信度</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>




<p>index.html</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">    #result&gt;div &#123;</span><br><span class="line">        float: left;</span><br><span class="line">        padding: 20px;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;div id=&quot;result&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="基于迁移学习的语音识别器：声控轮播图"><a href="#基于迁移学习的语音识别器：声控轮播图" class="headerlink" title="基于迁移学习的语音识别器：声控轮播图"></a>基于迁移学习的语音识别器：声控轮播图</h2><p>在浏览器中收集中文语音训练数据</p>
<p>使用 speech commands （英文语音识别） 包进行迁移学习并预测 中文语音</p>
<p>语音训练数据的保存和加载</p>
<p>操作步骤</p>
<p>使用 speech commands 包创建迁移学习器<br>编写前端界面准备收集语音数据<br>调用collectExample函数收集语音数据</p>
<p><img src="/../images/tfjs/68.png"></p>
<p>index.html</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;button onclick=&quot;collect(this)&quot;&gt;上一张&lt;/button&gt;</span><br><span class="line">&lt;button onclick=&quot;collect(this)&quot;&gt;下一张&lt;/button&gt;</span><br><span class="line">&lt;button onclick=&quot;collect(this)&quot;&gt;背景噪音&lt;/button&gt;</span><br><span class="line">&lt;button onclick=&quot;save()&quot;&gt;保存&lt;/button&gt;</span><br><span class="line">&lt;pre id=&quot;count&quot;&gt;&lt;/pre&gt;</span><br><span class="line">&lt;button onclick=&quot;train()&quot;&gt;训练&lt;/button&gt;</span><br><span class="line">&lt;br&gt;&lt;br&gt;</span><br><span class="line">监听开关：&lt;input type=&quot;checkbox&quot; onchange=&quot;toggle(this.checked)&quot;&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>script.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">import * as speechCommands from &#x27;@tensorflow-models/speech-commands&#x27;;</span><br><span class="line">import * as tfvis from &#x27;@tensorflow/tfjs-vis&#x27;;</span><br><span class="line"></span><br><span class="line">const MODEL_PATH = &#x27;http://127.0.0.1:8080&#x27;;</span><br><span class="line">let transferRecognizer;</span><br><span class="line"></span><br><span class="line">window.onload = async () =&gt; &#123;</span><br><span class="line">    const recognizer = speechCommands.create(</span><br><span class="line">        &#x27;BROWSER_FFT&#x27;,</span><br><span class="line">        null,</span><br><span class="line">        MODEL_PATH + &#x27;/speech/model.json&#x27;,</span><br><span class="line">        MODEL_PATH + &#x27;/speech/metadata.json&#x27;</span><br><span class="line">    );</span><br><span class="line">    await recognizer.ensureModelLoaded(); // 加载模型</span><br><span class="line">    transferRecognizer = recognizer.createTransfer(&#x27;轮播图&#x27;); // 创建一个训练器</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">window.collect = async (btn) =&gt; &#123;</span><br><span class="line">    btn.disabled = true;</span><br><span class="line">    const label = btn.innerText;</span><br><span class="line">    await transferRecognizer.collectExample( //  收集样本</span><br><span class="line">        label === &#x27;背景噪音&#x27; ? &#x27;_background_noise_&#x27; : label</span><br><span class="line">    );</span><br><span class="line">    btn.disabled = false;</span><br><span class="line">    document.querySelector(&#x27;#count&#x27;).innerHTML = JSON.stringify(transferRecognizer.countExamples(), null, 2);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">window.train = async () =&gt; &#123;</span><br><span class="line">    await transferRecognizer.train(&#123;</span><br><span class="line">        epochs: 30,</span><br><span class="line">        callback: tfvis.show.fitCallbacks(</span><br><span class="line">            &#123; name: &#x27;训练效果&#x27; &#125;,</span><br><span class="line">            [&#x27;loss&#x27;, &#x27;acc&#x27;],</span><br><span class="line">            &#123; callbacks: [&#x27;onEpochEnd&#x27;] &#125;</span><br><span class="line">        )</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">window.toggle = async (checked) =&gt; &#123;</span><br><span class="line">    if (checked) &#123;</span><br><span class="line">        await transferRecognizer.listen(result =&gt; &#123; // 监听</span><br><span class="line">            const &#123; scores &#125; = result;</span><br><span class="line">            const labels = transferRecognizer.wordLabels();</span><br><span class="line">            const index = scores.indexOf(Math.max(...scores));</span><br><span class="line">            console.log(labels[index]);</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            overlapFactor: 0,</span><br><span class="line">            probabilityThreshold: 0.75</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        transferRecognizer.stopListening();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">window.save = () =&gt; &#123;</span><br><span class="line">    const arrayBuffer = transferRecognizer.serializeExamples(); //把采集好的数据存下来</span><br><span class="line">    const blob = new Blob([arrayBuffer]);</span><br><span class="line">    const link = document.createElement(&#x27;a&#x27;);</span><br><span class="line">    link.href = window.URL.createObjectURL(blob);</span><br><span class="line">    link.download = &#x27;data.bin&#x27;;</span><br><span class="line">    link.click();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="轮播图"><a href="#轮播图" class="headerlink" title="轮播图"></a>轮播图</h2><p>index.html</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">监听开关：&lt;input type=&quot;checkbox&quot; onchange=&quot;toggle(this.checked)&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">    .slider &#123;</span><br><span class="line">        width: 600px;</span><br><span class="line">        overflow: hidden;</span><br><span class="line">        margin: 10px auto;</span><br><span class="line">    &#125;</span><br><span class="line">    .slider &gt; div&#123;</span><br><span class="line">        display: flex;</span><br><span class="line">        align-items: center;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;div class=&quot;slider&quot;&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;img src=&quot;https://cdn.pixabay.com/photo/2019/10/29/15/57/vancouver-4587302__480.jpg&quot; alt=&quot;&quot; width=&quot;600&quot;&gt;</span><br><span class="line">        &lt;img src=&quot;https://cdn.pixabay.com/photo/2019/10/31/07/14/coffee-4591159__480.jpg&quot; alt=&quot;&quot; width=&quot;600&quot;&gt;</span><br><span class="line">        &lt;img src=&quot;https://cdn.pixabay.com/photo/2019/11/01/11/08/landscape-4593909__480.jpg&quot; alt=&quot;&quot; width=&quot;600&quot;&gt;</span><br><span class="line">        &lt;img src=&quot;https://cdn.pixabay.com/photo/2019/11/02/21/45/maple-leaf-4597501__480.jpg&quot; alt=&quot;&quot; width=&quot;600&quot;&gt;</span><br><span class="line">        &lt;img src=&quot;https://cdn.pixabay.com/photo/2019/11/02/03/13/in-xinjiang-4595560__480.jpg&quot; alt=&quot;&quot; width=&quot;600&quot;&gt;</span><br><span class="line">        &lt;img src=&quot;https://cdn.pixabay.com/photo/2019/11/01/22/45/reschensee-4595385__480.jpg&quot; alt=&quot;&quot; width=&quot;600&quot;&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>script.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">import * as speechCommands from &#x27;@tensorflow-models/speech-commands&#x27;;</span><br><span class="line"></span><br><span class="line">const MODEL_PATH = &#x27;http://127.0.0.1:8080&#x27;;</span><br><span class="line">let transferRecognizer;</span><br><span class="line">let curIndex = 0;</span><br><span class="line"></span><br><span class="line">window.onload = async () =&gt; &#123;</span><br><span class="line">    const recognizer = speechCommands.create(</span><br><span class="line">        &#x27;BROWSER_FFT&#x27;,</span><br><span class="line">        null,</span><br><span class="line">        MODEL_PATH + &#x27;/speech/model.json&#x27;,</span><br><span class="line">        MODEL_PATH + &#x27;/speech/metadata.json&#x27;,</span><br><span class="line">    );</span><br><span class="line">    await recognizer.ensureModelLoaded();</span><br><span class="line">    transferRecognizer = recognizer.createTransfer(&#x27;轮播图&#x27;);</span><br><span class="line">    const res = await fetch(MODEL_PATH + &#x27;/slider/data.bin&#x27;);</span><br><span class="line">    const arrayBuffer = await res.arrayBuffer();</span><br><span class="line">    transferRecognizer.loadExamples(arrayBuffer);</span><br><span class="line">    await transferRecognizer.train(&#123; epochs: 30 &#125;);</span><br><span class="line">    console.log(&#x27;done&#x27;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">window.toggle = async (checked) =&gt; &#123;</span><br><span class="line">    if (checked) &#123;</span><br><span class="line">        await transferRecognizer.listen(result =&gt; &#123;</span><br><span class="line">            const &#123; scores &#125; = result;</span><br><span class="line">            const labels = transferRecognizer.wordLabels();</span><br><span class="line">            const index = scores.indexOf(Math.max(...scores));</span><br><span class="line">            window.play(labels[index]);</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            overlapFactor: 0,</span><br><span class="line">            probabilityThreshold: 0.5</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        transferRecognizer.stopListening();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">window.play = (label) =&gt; &#123;</span><br><span class="line">    const div = document.querySelector(&#x27;.slider&gt;div&#x27;);</span><br><span class="line">    if (label === &#x27;上一张&#x27;) &#123;</span><br><span class="line">        if (curIndex === 0) &#123; return; &#125;</span><br><span class="line">        curIndex -= 1;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        if (curIndex === document.querySelectorAll(&#x27;img&#x27;).length - 1) &#123; return; &#125;</span><br><span class="line">        curIndex += 1;</span><br><span class="line">    &#125;</span><br><span class="line">    div.style.transition = &quot;transform 1s&quot;</span><br><span class="line">    div.style.transform = `translateX(-$&#123;100 * curIndex&#125;%)`;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/05/10/tfjs-study4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="wangzhiwei">
      <meta itemprop="description" content="javascript nodejs web developer...">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WBlog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/05/10/tfjs-study4/" class="post-title-link" itemprop="url">tfjs-study4</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-05-10 10:27:08 / 修改时间：12:05:40" itemprop="dateCreated datePublished" datetime="2025-05-10T10:27:08+08:00">2025-05-10</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="基于迁移学习的图像分类器-–商标识别任务"><a href="#基于迁移学习的图像分类器-–商标识别任务" class="headerlink" title="基于迁移学习的图像分类器 –商标识别任务"></a>基于迁移学习的图像分类器 –商标识别任务</h2><p>把已训练好的模型参数迁移到新的模型来帮助新模型训练</p>
<p>深度学习模型参数多，从头训练陈本高</p>
<p>删除原始模型的最后一层，基于此截断模型的输出训练一个新的（通常相当浅的）模型</p>
<p>加载商标训练数据并可视化<br>定义模型结构：截断模型 + 双层神经网络<br>训练模型并预测</p>
<p><img src="/../images/tfjs/61.png"></p>
<p><img src="/../images/tfjs/62.png"></p>
<p><img src="/../images/tfjs/63.png"></p>
<p><img src="/../images/tfjs/64.png"></p>
<p>data.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">const IMAGE_SIZE = 224;</span><br><span class="line"></span><br><span class="line">const loadImg = (src) =&gt; &#123;</span><br><span class="line">    return new Promise(resolve =&gt; &#123;</span><br><span class="line">        const img = new Image();</span><br><span class="line">        img.crossOrigin = &quot;anonymous&quot;;</span><br><span class="line">        img.src = src;</span><br><span class="line">        img.width = IMAGE_SIZE;</span><br><span class="line">        img.height = IMAGE_SIZE;</span><br><span class="line">        img.onload = () =&gt; resolve(img);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">export const getInputs = async () =&gt; &#123;</span><br><span class="line">    const loadImgs = [];</span><br><span class="line">    const labels = [];</span><br><span class="line">    for (let i = 0; i &lt; 30; i += 1) &#123;</span><br><span class="line">        [&#x27;android&#x27;, &#x27;apple&#x27;, &#x27;windows&#x27;].forEach(label =&gt; &#123;</span><br><span class="line">            const src = `http://127.0.0.1:8080/brand/train/$&#123;label&#125;-$&#123;i&#125;.jpg`;</span><br><span class="line">            const img = loadImg(src);</span><br><span class="line">            loadImgs.push(img);</span><br><span class="line">            labels.push([</span><br><span class="line">                label === &#x27;android&#x27; ? 1 : 0,</span><br><span class="line">                label === &#x27;apple&#x27; ? 1 : 0,</span><br><span class="line">                label === &#x27;windows&#x27; ? 1 : 0,</span><br><span class="line">            ]);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    const inputs = await Promise.all(loadImgs);</span><br><span class="line">    return &#123;</span><br><span class="line">        inputs,</span><br><span class="line">        labels,</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>script.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">import * as tf from &#x27;@tensorflow/tfjs&#x27;;</span><br><span class="line">import * as tfvis from &#x27;@tensorflow/tfjs-vis&#x27;;</span><br><span class="line">import &#123; getInputs &#125; from &#x27;./data&#x27;;</span><br><span class="line">import &#123; img2x, file2img &#125; from &#x27;./utils&#x27;;</span><br><span class="line"></span><br><span class="line">const MOBILENET_MODEL_PATH = &#x27;http://127.0.0.1:8080/mobilenet/web_model/model.json&#x27;;</span><br><span class="line">const NUM_CLASSES = 3;</span><br><span class="line">const BRAND_CLASSES = [&#x27;android&#x27;, &#x27;apple&#x27;, &#x27;windows&#x27;];</span><br><span class="line"></span><br><span class="line">window.onload = async () =&gt; &#123;</span><br><span class="line">    const &#123; inputs, labels &#125; = await getInputs();</span><br><span class="line">    const surface = tfvis.visor().surface(&#123; name: &#x27;输入示例&#x27;, styles: &#123; height: 250 &#125; &#125;);</span><br><span class="line">    inputs.forEach(img =&gt; &#123;</span><br><span class="line">        surface.drawArea.appendChild(img);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    const mobilenet = await tf.loadLayersModel(MOBILENET_MODEL_PATH);</span><br><span class="line">    mobilenet.summary(); // 模型结构/*  */</span><br><span class="line">    const layer = mobilenet.getLayer(&#x27;conv_pw_13_relu&#x27;); //  获取模型中间层</span><br><span class="line">    const truncatedMobilenet = tf.model(&#123; //  截断模型</span><br><span class="line">        inputs: mobilenet.inputs, //  输入层</span><br><span class="line">        outputs: layer.output //  输出层 </span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    //  创建新模型</span><br><span class="line">    const model = tf.sequential();</span><br><span class="line"></span><br><span class="line">    console.log(layer.outputShape)</span><br><span class="line">    model.add(tf.layers.flatten(&#123; //  展平层， 一维的向量，无训练参数 </span><br><span class="line">        inputShape: layer.outputShape.slice(1) //  获取中间层输出的形状</span><br><span class="line">    &#125;));</span><br><span class="line">    model.add(tf.layers.dense(&#123; //  全连接层</span><br><span class="line">        units: 10,</span><br><span class="line">        activation: &#x27;relu&#x27;</span><br><span class="line">    &#125;));</span><br><span class="line">    model.add(tf.layers.dense(&#123; // 分类层 </span><br><span class="line">        units: NUM_CLASSES,</span><br><span class="line">        activation: &#x27;softmax&#x27;</span><br><span class="line">    &#125;));</span><br><span class="line"></span><br><span class="line">    // 定义损失函数和优化器</span><br><span class="line">    model.compile(&#123; loss: &#x27;categoricalCrossentropy&#x27;, optimizer: tf.train.adam() &#125;);</span><br><span class="line"></span><br><span class="line">    //训练数据经过截断模型，转为可以用于新模型训练的数据</span><br><span class="line">    const &#123; xs, ys &#125; = tf.tidy(() =&gt; &#123;</span><br><span class="line">        const xs = tf.concat(inputs.map(imgEl =&gt; truncatedMobilenet.predict(img2x(imgEl))));</span><br><span class="line">        const ys = tf.tensor(labels);</span><br><span class="line">        return &#123; xs, ys &#125;;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    await model.fit(xs, ys, &#123;</span><br><span class="line">        epochs: 20,</span><br><span class="line">        callbacks: tfvis.show.fitCallbacks(</span><br><span class="line">            &#123; name: &#x27;训练效果&#x27; &#125;,</span><br><span class="line">            [&#x27;loss&#x27;],</span><br><span class="line">            &#123; callbacks: [&#x27;onEpochEnd&#x27;] &#125;</span><br><span class="line">        )</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    window.predict = async (file) =&gt; &#123;</span><br><span class="line">        const img = await file2img(file);</span><br><span class="line">        document.body.appendChild(img);</span><br><span class="line">        const pred = tf.tidy(() =&gt; &#123;</span><br><span class="line">            const x = img2x(img);</span><br><span class="line">            const input = truncatedMobilenet.predict(x);</span><br><span class="line">            return model.predict(input);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        const index = pred.argMax(1).dataSync()[0];</span><br><span class="line">        setTimeout(() =&gt; &#123;</span><br><span class="line">            alert(`预测结果：$&#123;BRAND_CLASSES[index]&#125;`);</span><br><span class="line">        &#125;, 0);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    window.download = async () =&gt; &#123;</span><br><span class="line">        await model.save(&#x27;downloads://model&#x27;);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>utils.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">import * as tf from &#x27;@tensorflow/tfjs&#x27;;</span><br><span class="line"></span><br><span class="line">export function img2x(imgEl)&#123;</span><br><span class="line">    return tf.tidy(() =&gt; &#123;</span><br><span class="line">        const input = tf.browser.fromPixels(imgEl)</span><br><span class="line">            .toFloat()</span><br><span class="line">            .sub(255 / 2)</span><br><span class="line">            .div(255 / 2)</span><br><span class="line">            .reshape([1, 224, 224, 3]);</span><br><span class="line">        return input;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export function file2img(f) &#123;</span><br><span class="line">    return new Promise(resolve =&gt; &#123;</span><br><span class="line">        const reader = new FileReader();</span><br><span class="line">        reader.readAsDataURL(f);</span><br><span class="line">        reader.onload = (e) =&gt; &#123;</span><br><span class="line">            const img = document.createElement(&#x27;img&#x27;);</span><br><span class="line">            img.src = e.target.result;</span><br><span class="line">            img.width = 224;</span><br><span class="line">            img.height = 224;</span><br><span class="line">            img.onload = () =&gt; resolve(img);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/05/10/tfjs-study3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="wangzhiwei">
      <meta itemprop="description" content="javascript nodejs web developer...">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WBlog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/05/10/tfjs-study3/" class="post-title-link" itemprop="url">tfjs-study3</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-05-10 10:12:07 / 修改时间：10:27:16" itemprop="dateCreated datePublished" datetime="2025-05-10T10:12:07+08:00">2025-05-10</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="使用预训练模型进行图片分类"><a href="#使用预训练模型进行图片分类" class="headerlink" title="使用预训练模型进行图片分类"></a>使用预训练模型进行图片分类</h2><p>加载 MobileNet 模型</p>
<p>进行预测</p>
<p>下载 MobileNet 模型文件</p>
<p>在本地开启静态文件服务器</p>
<p>使用TensorFlow.js的loadLayersModel方法加载模型</p>
<p><img src="/../images/tfjs/60.png"></p>
<p>imagenet_classes.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @license</span><br><span class="line"> * Copyright 2017 Google LLC. All Rights Reserved.</span><br><span class="line"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span><br><span class="line"> * you may not use this file except in compliance with the License.</span><br><span class="line"> * You may obtain a copy of the License at</span><br><span class="line"> *</span><br><span class="line"> * http://www.apache.org/licenses/LICENSE-2.0</span><br><span class="line"> *</span><br><span class="line"> * Unless required by applicable law or agreed to in writing, software</span><br><span class="line"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span><br><span class="line"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span><br><span class="line"> * See the License for the specific language governing permissions and</span><br><span class="line"> * limitations under the License.</span><br><span class="line"> * =============================================================================</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">export const IMAGENET_CLASSES = &#123;</span><br><span class="line">  0: &#x27;tench, Tinca tinca&#x27;,</span><br><span class="line">  1: &#x27;goldfish, Carassius auratus&#x27;,</span><br><span class="line">  2: &#x27;great white shark, white shark, man-eater, man-eating shark, &#x27; +</span><br><span class="line">      &#x27;Carcharodon carcharias&#x27;,</span><br><span class="line">  3: &#x27;tiger shark, Galeocerdo cuvieri&#x27;,</span><br><span class="line">  4: &#x27;hammerhead, hammerhead shark&#x27;,</span><br><span class="line">  5: &#x27;electric ray, crampfish, numbfish, torpedo&#x27;,</span><br><span class="line">  6: &#x27;stingray&#x27;,</span><br><span class="line">  7: &#x27;cock&#x27;,</span><br><span class="line">  8: &#x27;hen&#x27;,</span><br><span class="line">  9: &#x27;ostrich, Struthio camelus&#x27;,</span><br><span class="line">  10: &#x27;brambling, Fringilla montifringilla&#x27;,</span><br><span class="line">  11: &#x27;goldfinch, Carduelis carduelis&#x27;,</span><br><span class="line">  12: &#x27;house finch, linnet, Carpodacus mexicanus&#x27;,</span><br><span class="line">  13: &#x27;junco, snowbird&#x27;,</span><br><span class="line">  14: &#x27;indigo bunting, indigo finch, indigo bird, Passerina cyanea&#x27;,</span><br><span class="line">  15: &#x27;robin, American robin, Turdus migratorius&#x27;,</span><br><span class="line">  16: &#x27;bulbul&#x27;,</span><br><span class="line">  17: &#x27;jay&#x27;,</span><br><span class="line">  18: &#x27;magpie&#x27;,</span><br><span class="line">  19: &#x27;chickadee&#x27;,</span><br><span class="line">  20: &#x27;water ouzel, dipper&#x27;,</span><br><span class="line">  21: &#x27;kite&#x27;,</span><br><span class="line">  22: &#x27;bald eagle, American eagle, Haliaeetus leucocephalus&#x27;,</span><br><span class="line">  23: &#x27;vulture&#x27;,</span><br><span class="line">  24: &#x27;great grey owl, great gray owl, Strix nebulosa&#x27;,</span><br><span class="line">  25: &#x27;European fire salamander, Salamandra salamandra&#x27;,</span><br><span class="line">  26: &#x27;common newt, Triturus vulgaris&#x27;,</span><br><span class="line">  27: &#x27;eft&#x27;,</span><br><span class="line">  28: &#x27;spotted salamander, Ambystoma maculatum&#x27;,</span><br><span class="line">  29: &#x27;axolotl, mud puppy, Ambystoma mexicanum&#x27;,</span><br><span class="line">  30: &#x27;bullfrog, Rana catesbeiana&#x27;,</span><br><span class="line">  31: &#x27;tree frog, tree-frog&#x27;,</span><br><span class="line">  32: &#x27;tailed frog, bell toad, ribbed toad, tailed toad, Ascaphus trui&#x27;,</span><br><span class="line">  33: &#x27;loggerhead, loggerhead turtle, Caretta caretta&#x27;,</span><br><span class="line">  34: &#x27;leatherback turtle, leatherback, leathery turtle, Dermochelys coriacea&#x27;,</span><br><span class="line">  35: &#x27;mud turtle&#x27;,</span><br><span class="line">  36: &#x27;terrapin&#x27;,</span><br><span class="line">  37: &#x27;box turtle, box tortoise&#x27;,</span><br><span class="line">  38: &#x27;banded gecko&#x27;,</span><br><span class="line">  39: &#x27;common iguana, iguana, Iguana iguana&#x27;,</span><br><span class="line">  40: &#x27;American chameleon, anole, Anolis carolinensis&#x27;,</span><br><span class="line">  41: &#x27;whiptail, whiptail lizard&#x27;,</span><br><span class="line">  42: &#x27;agama&#x27;,</span><br><span class="line">  43: &#x27;frilled lizard, Chlamydosaurus kingi&#x27;,</span><br><span class="line">  44: &#x27;alligator lizard&#x27;,</span><br><span class="line">  45: &#x27;Gila monster, Heloderma suspectum&#x27;,</span><br><span class="line">  46: &#x27;green lizard, Lacerta viridis&#x27;,</span><br><span class="line">  47: &#x27;African chameleon, Chamaeleo chamaeleon&#x27;,</span><br><span class="line">  48: &#x27;Komodo dragon, Komodo lizard, dragon lizard, giant lizard, &#x27; +</span><br><span class="line">      &#x27;Varanus komodoensis&#x27;,</span><br><span class="line">  49: &#x27;African crocodile, Nile crocodile, Crocodylus niloticus&#x27;,</span><br><span class="line">  50: &#x27;American alligator, Alligator mississipiensis&#x27;,</span><br><span class="line">  51: &#x27;triceratops&#x27;,</span><br><span class="line">  52: &#x27;thunder snake, worm snake, Carphophis amoenus&#x27;,</span><br><span class="line">  53: &#x27;ringneck snake, ring-necked snake, ring snake&#x27;,</span><br><span class="line">  54: &#x27;hognose snake, puff adder, sand viper&#x27;,</span><br><span class="line">  55: &#x27;green snake, grass snake&#x27;,</span><br><span class="line">  56: &#x27;king snake, kingsnake&#x27;,</span><br><span class="line">  57: &#x27;garter snake, grass snake&#x27;,</span><br><span class="line">  58: &#x27;water snake&#x27;,</span><br><span class="line">  59: &#x27;vine snake&#x27;,</span><br><span class="line">  60: &#x27;night snake, Hypsiglena torquata&#x27;,</span><br><span class="line">  61: &#x27;boa constrictor, Constrictor constrictor&#x27;,</span><br><span class="line">  62: &#x27;rock python, rock snake, Python sebae&#x27;,</span><br><span class="line">  63: &#x27;Indian cobra, Naja naja&#x27;,</span><br><span class="line">  64: &#x27;green mamba&#x27;,</span><br><span class="line">  65: &#x27;sea snake&#x27;,</span><br><span class="line">  66: &#x27;horned viper, cerastes, sand viper, horned asp, Cerastes cornutus&#x27;,</span><br><span class="line">  67: &#x27;diamondback, diamondback rattlesnake, Crotalus adamanteus&#x27;,</span><br><span class="line">  68: &#x27;sidewinder, horned rattlesnake, Crotalus cerastes&#x27;,</span><br><span class="line">  69: &#x27;trilobite&#x27;,</span><br><span class="line">  70: &#x27;harvestman, daddy longlegs, Phalangium opilio&#x27;,</span><br><span class="line">  71: &#x27;scorpion&#x27;,</span><br><span class="line">  72: &#x27;black and gold garden spider, Argiope aurantia&#x27;,</span><br><span class="line">  73: &#x27;barn spider, Araneus cavaticus&#x27;,</span><br><span class="line">  74: &#x27;garden spider, Aranea diademata&#x27;,</span><br><span class="line">  75: &#x27;black widow, Latrodectus mactans&#x27;,</span><br><span class="line">  76: &#x27;tarantula&#x27;,</span><br><span class="line">  77: &#x27;wolf spider, hunting spider&#x27;,</span><br><span class="line">  78: &#x27;tick&#x27;,</span><br><span class="line">  79: &#x27;centipede&#x27;,</span><br><span class="line">  80: &#x27;black grouse&#x27;,</span><br><span class="line">  81: &#x27;ptarmigan&#x27;,</span><br><span class="line">  82: &#x27;ruffed grouse, partridge, Bonasa umbellus&#x27;,</span><br><span class="line">  83: &#x27;prairie chicken, prairie grouse, prairie fowl&#x27;,</span><br><span class="line">  84: &#x27;peacock&#x27;,</span><br><span class="line">  85: &#x27;quail&#x27;,</span><br><span class="line">  86: &#x27;partridge&#x27;,</span><br><span class="line">  87: &#x27;African grey, African gray, Psittacus erithacus&#x27;,</span><br><span class="line">  88: &#x27;macaw&#x27;,</span><br><span class="line">  89: &#x27;sulphur-crested cockatoo, Kakatoe galerita, Cacatua galerita&#x27;,</span><br><span class="line">  90: &#x27;lorikeet&#x27;,</span><br><span class="line">  91: &#x27;coucal&#x27;,</span><br><span class="line">  92: &#x27;bee eater&#x27;,</span><br><span class="line">  93: &#x27;hornbill&#x27;,</span><br><span class="line">  94: &#x27;hummingbird&#x27;,</span><br><span class="line">  95: &#x27;jacamar&#x27;,</span><br><span class="line">  96: &#x27;toucan&#x27;,</span><br><span class="line">  97: &#x27;drake&#x27;,</span><br><span class="line">  98: &#x27;red-breasted merganser, Mergus serrator&#x27;,</span><br><span class="line">  99: &#x27;goose&#x27;,</span><br><span class="line">  100: &#x27;black swan, Cygnus atratus&#x27;,</span><br><span class="line">  101: &#x27;tusker&#x27;,</span><br><span class="line">  102: &#x27;echidna, spiny anteater, anteater&#x27;,</span><br><span class="line">  103: &#x27;platypus, duckbill, duckbilled platypus, duck-billed platypus, &#x27; +</span><br><span class="line">      &#x27;Ornithorhynchus anatinus&#x27;,</span><br><span class="line">  104: &#x27;wallaby, brush kangaroo&#x27;,</span><br><span class="line">  105: &#x27;koala, koala bear, kangaroo bear, native bear, Phascolarctos cinereus&#x27;,</span><br><span class="line">  106: &#x27;wombat&#x27;,</span><br><span class="line">  107: &#x27;jelly fish&#x27;,</span><br><span class="line">  108: &#x27;sea anemone, anemone&#x27;,</span><br><span class="line">  109: &#x27;brain coral&#x27;,</span><br><span class="line">  110: &#x27;flatworm, platyhelminth&#x27;,</span><br><span class="line">  111: &#x27;nematode, nematode worm, roundworm&#x27;,</span><br><span class="line">  112: &#x27;conch&#x27;,</span><br><span class="line">  113: &#x27;snail&#x27;,</span><br><span class="line">  114: &#x27;slug&#x27;,</span><br><span class="line">  115: &#x27;sea slug, nudibranch&#x27;,</span><br><span class="line">  116: &#x27;chiton, coat-of-mail shell, sea cradle, polyplacophore&#x27;,</span><br><span class="line">  117: &#x27;chambered nautilus, pearly nautilus, nautilus&#x27;,</span><br><span class="line">  118: &#x27;Dungeness crab, Cancer magister&#x27;,</span><br><span class="line">  119: &#x27;rock crab, Cancer irroratus&#x27;,</span><br><span class="line">  120: &#x27;fiddler crab&#x27;,</span><br><span class="line">  121: &#x27;king crab, Alaska crab, Alaskan king crab, Alaska king crab, &#x27; +</span><br><span class="line">      &#x27;Paralithodes camtschatica&#x27;,</span><br><span class="line">  122: &#x27;American lobster, Northern lobster, Maine lobster, Homarus americanus&#x27;,</span><br><span class="line">  123: &#x27;spiny lobster, langouste, rock lobster, crawfish, crayfish, sea &#x27; +</span><br><span class="line">      &#x27;crawfish&#x27;,</span><br><span class="line">  124: &#x27;crayfish, crawfish, crawdad, crawdaddy&#x27;,</span><br><span class="line">  125: &#x27;hermit crab&#x27;,</span><br><span class="line">  126: &#x27;isopod&#x27;,</span><br><span class="line">  127: &#x27;white stork, Ciconia ciconia&#x27;,</span><br><span class="line">  128: &#x27;black stork, Ciconia nigra&#x27;,</span><br><span class="line">  129: &#x27;spoonbill&#x27;,</span><br><span class="line">  130: &#x27;flamingo&#x27;,</span><br><span class="line">  131: &#x27;little blue heron, Egretta caerulea&#x27;,</span><br><span class="line">  132: &#x27;American egret, great white heron, Egretta albus&#x27;,</span><br><span class="line">  133: &#x27;bittern&#x27;,</span><br><span class="line">  134: &#x27;crane&#x27;,</span><br><span class="line">  135: &#x27;limpkin, Aramus pictus&#x27;,</span><br><span class="line">  136: &#x27;European gallinule, Porphyrio porphyrio&#x27;,</span><br><span class="line">  137: &#x27;American coot, marsh hen, mud hen, water hen, Fulica americana&#x27;,</span><br><span class="line">  138: &#x27;bustard&#x27;,</span><br><span class="line">  139: &#x27;ruddy turnstone, Arenaria interpres&#x27;,</span><br><span class="line">  140: &#x27;red-backed sandpiper, dunlin, Erolia alpina&#x27;,</span><br><span class="line">  141: &#x27;redshank, Tringa totanus&#x27;,</span><br><span class="line">  142: &#x27;dowitcher&#x27;,</span><br><span class="line">  143: &#x27;oystercatcher, oyster catcher&#x27;,</span><br><span class="line">  144: &#x27;pelican&#x27;,</span><br><span class="line">  145: &#x27;king penguin, Aptenodytes patagonica&#x27;,</span><br><span class="line">  146: &#x27;albatross, mollymawk&#x27;,</span><br><span class="line">  147: &#x27;grey whale, gray whale, devilfish, Eschrichtius gibbosus, &#x27; +</span><br><span class="line">      &#x27;Eschrichtius robustus&#x27;,</span><br><span class="line">  148: &#x27;killer whale, killer, orca, grampus, sea wolf, Orcinus orca&#x27;,</span><br><span class="line">  149: &#x27;dugong, Dugong dugon&#x27;,</span><br><span class="line">  150: &#x27;sea lion&#x27;,</span><br><span class="line">  151: &#x27;Chihuahua&#x27;,</span><br><span class="line">  152: &#x27;Japanese spaniel&#x27;,</span><br><span class="line">  153: &#x27;Maltese dog, Maltese terrier, Maltese&#x27;,</span><br><span class="line">  154: &#x27;Pekinese, Pekingese, Peke&#x27;,</span><br><span class="line">  155: &#x27;Shih-Tzu&#x27;,</span><br><span class="line">  156: &#x27;Blenheim spaniel&#x27;,</span><br><span class="line">  157: &#x27;papillon&#x27;,</span><br><span class="line">  158: &#x27;toy terrier&#x27;,</span><br><span class="line">  159: &#x27;Rhodesian ridgeback&#x27;,</span><br><span class="line">  160: &#x27;Afghan hound, Afghan&#x27;,</span><br><span class="line">  161: &#x27;basset, basset hound&#x27;,</span><br><span class="line">  162: &#x27;beagle&#x27;,</span><br><span class="line">  163: &#x27;bloodhound, sleuthhound&#x27;,</span><br><span class="line">  164: &#x27;bluetick&#x27;,</span><br><span class="line">  165: &#x27;black-and-tan coonhound&#x27;,</span><br><span class="line">  166: &#x27;Walker hound, Walker foxhound&#x27;,</span><br><span class="line">  167: &#x27;English foxhound&#x27;,</span><br><span class="line">  168: &#x27;redbone&#x27;,</span><br><span class="line">  169: &#x27;borzoi, Russian wolfhound&#x27;,</span><br><span class="line">  170: &#x27;Irish wolfhound&#x27;,</span><br><span class="line">  171: &#x27;Italian greyhound&#x27;,</span><br><span class="line">  172: &#x27;whippet&#x27;,</span><br><span class="line">  173: &#x27;Ibizan hound, Ibizan Podenco&#x27;,</span><br><span class="line">  174: &#x27;Norwegian elkhound, elkhound&#x27;,</span><br><span class="line">  175: &#x27;otterhound, otter hound&#x27;,</span><br><span class="line">  176: &#x27;Saluki, gazelle hound&#x27;,</span><br><span class="line">  177: &#x27;Scottish deerhound, deerhound&#x27;,</span><br><span class="line">  178: &#x27;Weimaraner&#x27;,</span><br><span class="line">  179: &#x27;Staffordshire bullterrier, Staffordshire bull terrier&#x27;,</span><br><span class="line">  180: &#x27;American Staffordshire terrier, Staffordshire terrier, American pit &#x27; +</span><br><span class="line">      &#x27;bull terrier, pit bull terrier&#x27;,</span><br><span class="line">  181: &#x27;Bedlington terrier&#x27;,</span><br><span class="line">  182: &#x27;Border terrier&#x27;,</span><br><span class="line">  183: &#x27;Kerry blue terrier&#x27;,</span><br><span class="line">  184: &#x27;Irish terrier&#x27;,</span><br><span class="line">  185: &#x27;Norfolk terrier&#x27;,</span><br><span class="line">  186: &#x27;Norwich terrier&#x27;,</span><br><span class="line">  187: &#x27;Yorkshire terrier&#x27;,</span><br><span class="line">  188: &#x27;wire-haired fox terrier&#x27;,</span><br><span class="line">  189: &#x27;Lakeland terrier&#x27;,</span><br><span class="line">  190: &#x27;Sealyham terrier, Sealyham&#x27;,</span><br><span class="line">  191: &#x27;Airedale, Airedale terrier&#x27;,</span><br><span class="line">  192: &#x27;cairn, cairn terrier&#x27;,</span><br><span class="line">  193: &#x27;Australian terrier&#x27;,</span><br><span class="line">  194: &#x27;Dandie Dinmont, Dandie Dinmont terrier&#x27;,</span><br><span class="line">  195: &#x27;Boston bull, Boston terrier&#x27;,</span><br><span class="line">  196: &#x27;miniature schnauzer&#x27;,</span><br><span class="line">  197: &#x27;giant schnauzer&#x27;,</span><br><span class="line">  198: &#x27;standard schnauzer&#x27;,</span><br><span class="line">  199: &#x27;Scotch terrier, Scottish terrier, Scottie&#x27;,</span><br><span class="line">  200: &#x27;Tibetan terrier, chrysanthemum dog&#x27;,</span><br><span class="line">  201: &#x27;silky terrier, Sydney silky&#x27;,</span><br><span class="line">  202: &#x27;soft-coated wheaten terrier&#x27;,</span><br><span class="line">  203: &#x27;West Highland white terrier&#x27;,</span><br><span class="line">  204: &#x27;Lhasa, Lhasa apso&#x27;,</span><br><span class="line">  205: &#x27;flat-coated retriever&#x27;,</span><br><span class="line">  206: &#x27;curly-coated retriever&#x27;,</span><br><span class="line">  207: &#x27;golden retriever&#x27;,</span><br><span class="line">  208: &#x27;Labrador retriever&#x27;,</span><br><span class="line">  209: &#x27;Chesapeake Bay retriever&#x27;,</span><br><span class="line">  210: &#x27;German short-haired pointer&#x27;,</span><br><span class="line">  211: &#x27;vizsla, Hungarian pointer&#x27;,</span><br><span class="line">  212: &#x27;English setter&#x27;,</span><br><span class="line">  213: &#x27;Irish setter, red setter&#x27;,</span><br><span class="line">  214: &#x27;Gordon setter&#x27;,</span><br><span class="line">  215: &#x27;Brittany spaniel&#x27;,</span><br><span class="line">  216: &#x27;clumber, clumber spaniel&#x27;,</span><br><span class="line">  217: &#x27;English springer, English springer spaniel&#x27;,</span><br><span class="line">  218: &#x27;Welsh springer spaniel&#x27;,</span><br><span class="line">  219: &#x27;cocker spaniel, English cocker spaniel, cocker&#x27;,</span><br><span class="line">  220: &#x27;Sussex spaniel&#x27;,</span><br><span class="line">  221: &#x27;Irish water spaniel&#x27;,</span><br><span class="line">  222: &#x27;kuvasz&#x27;,</span><br><span class="line">  223: &#x27;schipperke&#x27;,</span><br><span class="line">  224: &#x27;groenendael&#x27;,</span><br><span class="line">  225: &#x27;malinois&#x27;,</span><br><span class="line">  226: &#x27;briard&#x27;,</span><br><span class="line">  227: &#x27;kelpie&#x27;,</span><br><span class="line">  228: &#x27;komondor&#x27;,</span><br><span class="line">  229: &#x27;Old English sheepdog, bobtail&#x27;,</span><br><span class="line">  230: &#x27;Shetland sheepdog, Shetland sheep dog, Shetland&#x27;,</span><br><span class="line">  231: &#x27;collie&#x27;,</span><br><span class="line">  232: &#x27;Border collie&#x27;,</span><br><span class="line">  233: &#x27;Bouvier des Flandres, Bouviers des Flandres&#x27;,</span><br><span class="line">  234: &#x27;Rottweiler&#x27;,</span><br><span class="line">  235: &#x27;German shepherd, German shepherd dog, German police dog, alsatian&#x27;,</span><br><span class="line">  236: &#x27;Doberman, Doberman pinscher&#x27;,</span><br><span class="line">  237: &#x27;miniature pinscher&#x27;,</span><br><span class="line">  238: &#x27;Greater Swiss Mountain dog&#x27;,</span><br><span class="line">  239: &#x27;Bernese mountain dog&#x27;,</span><br><span class="line">  240: &#x27;Appenzeller&#x27;,</span><br><span class="line">  241: &#x27;EntleBucher&#x27;,</span><br><span class="line">  242: &#x27;boxer&#x27;,</span><br><span class="line">  243: &#x27;bull mastiff&#x27;,</span><br><span class="line">  244: &#x27;Tibetan mastiff&#x27;,</span><br><span class="line">  245: &#x27;French bulldog&#x27;,</span><br><span class="line">  246: &#x27;Great Dane&#x27;,</span><br><span class="line">  247: &#x27;Saint Bernard, St Bernard&#x27;,</span><br><span class="line">  248: &#x27;Eskimo dog, husky&#x27;,</span><br><span class="line">  249: &#x27;malamute, malemute, Alaskan malamute&#x27;,</span><br><span class="line">  250: &#x27;Siberian husky&#x27;,</span><br><span class="line">  251: &#x27;dalmatian, coach dog, carriage dog&#x27;,</span><br><span class="line">  252: &#x27;affenpinscher, monkey pinscher, monkey dog&#x27;,</span><br><span class="line">  253: &#x27;basenji&#x27;,</span><br><span class="line">  254: &#x27;pug, pug-dog&#x27;,</span><br><span class="line">  255: &#x27;Leonberg&#x27;,</span><br><span class="line">  256: &#x27;Newfoundland, Newfoundland dog&#x27;,</span><br><span class="line">  257: &#x27;Great Pyrenees&#x27;,</span><br><span class="line">  258: &#x27;Samoyed, Samoyede&#x27;,</span><br><span class="line">  259: &#x27;Pomeranian&#x27;,</span><br><span class="line">  260: &#x27;chow, chow chow&#x27;,</span><br><span class="line">  261: &#x27;keeshond&#x27;,</span><br><span class="line">  262: &#x27;Brabancon griffon&#x27;,</span><br><span class="line">  263: &#x27;Pembroke, Pembroke Welsh corgi&#x27;,</span><br><span class="line">  264: &#x27;Cardigan, Cardigan Welsh corgi&#x27;,</span><br><span class="line">  265: &#x27;toy poodle&#x27;,</span><br><span class="line">  266: &#x27;miniature poodle&#x27;,</span><br><span class="line">  267: &#x27;standard poodle&#x27;,</span><br><span class="line">  268: &#x27;Mexican hairless&#x27;,</span><br><span class="line">  269: &#x27;timber wolf, grey wolf, gray wolf, Canis lupus&#x27;,</span><br><span class="line">  270: &#x27;white wolf, Arctic wolf, Canis lupus tundrarum&#x27;,</span><br><span class="line">  271: &#x27;red wolf, maned wolf, Canis rufus, Canis niger&#x27;,</span><br><span class="line">  272: &#x27;coyote, prairie wolf, brush wolf, Canis latrans&#x27;,</span><br><span class="line">  273: &#x27;dingo, warrigal, warragal, Canis dingo&#x27;,</span><br><span class="line">  274: &#x27;dhole, Cuon alpinus&#x27;,</span><br><span class="line">  275: &#x27;African hunting dog, hyena dog, Cape hunting dog, Lycaon pictus&#x27;,</span><br><span class="line">  276: &#x27;hyena, hyaena&#x27;,</span><br><span class="line">  277: &#x27;red fox, Vulpes vulpes&#x27;,</span><br><span class="line">  278: &#x27;kit fox, Vulpes macrotis&#x27;,</span><br><span class="line">  279: &#x27;Arctic fox, white fox, Alopex lagopus&#x27;,</span><br><span class="line">  280: &#x27;grey fox, gray fox, Urocyon cinereoargenteus&#x27;,</span><br><span class="line">  281: &#x27;tabby, tabby cat&#x27;,</span><br><span class="line">  282: &#x27;tiger cat&#x27;,</span><br><span class="line">  283: &#x27;Persian cat&#x27;,</span><br><span class="line">  284: &#x27;Siamese cat, Siamese&#x27;,</span><br><span class="line">  285: &#x27;Egyptian cat&#x27;,</span><br><span class="line">  286: &#x27;cougar, puma, catamount, mountain lion, painter, panther, &#x27; +</span><br><span class="line">      &#x27;Felis concolor&#x27;,</span><br><span class="line">  287: &#x27;lynx, catamount&#x27;,</span><br><span class="line">  288: &#x27;leopard, Panthera pardus&#x27;,</span><br><span class="line">  289: &#x27;snow leopard, ounce, Panthera uncia&#x27;,</span><br><span class="line">  290: &#x27;jaguar, panther, Panthera onca, Felis onca&#x27;,</span><br><span class="line">  291: &#x27;lion, king of beasts, Panthera leo&#x27;,</span><br><span class="line">  292: &#x27;tiger, Panthera tigris&#x27;,</span><br><span class="line">  293: &#x27;cheetah, chetah, Acinonyx jubatus&#x27;,</span><br><span class="line">  294: &#x27;brown bear, bruin, Ursus arctos&#x27;,</span><br><span class="line">  295: &#x27;American black bear, black bear, Ursus americanus, Euarctos &#x27; +</span><br><span class="line">      &#x27;americanus&#x27;,</span><br><span class="line">  296: &#x27;ice bear, polar bear, Ursus Maritimus, Thalarctos maritimus&#x27;,</span><br><span class="line">  297: &#x27;sloth bear, Melursus ursinus, Ursus ursinus&#x27;,</span><br><span class="line">  298: &#x27;mongoose&#x27;,</span><br><span class="line">  299: &#x27;meerkat, mierkat&#x27;,</span><br><span class="line">  300: &#x27;tiger beetle&#x27;,</span><br><span class="line">  301: &#x27;ladybug, ladybeetle, lady beetle, ladybird, ladybird beetle&#x27;,</span><br><span class="line">  302: &#x27;ground beetle, carabid beetle&#x27;,</span><br><span class="line">  303: &#x27;long-horned beetle, longicorn, longicorn beetle&#x27;,</span><br><span class="line">  304: &#x27;leaf beetle, chrysomelid&#x27;,</span><br><span class="line">  305: &#x27;dung beetle&#x27;,</span><br><span class="line">  306: &#x27;rhinoceros beetle&#x27;,</span><br><span class="line">  307: &#x27;weevil&#x27;,</span><br><span class="line">  308: &#x27;fly&#x27;,</span><br><span class="line">  309: &#x27;bee&#x27;,</span><br><span class="line">  310: &#x27;ant, emmet, pismire&#x27;,</span><br><span class="line">  311: &#x27;grasshopper, hopper&#x27;,</span><br><span class="line">  312: &#x27;cricket&#x27;,</span><br><span class="line">  313: &#x27;walking stick, walkingstick, stick insect&#x27;,</span><br><span class="line">  314: &#x27;cockroach, roach&#x27;,</span><br><span class="line">  315: &#x27;mantis, mantid&#x27;,</span><br><span class="line">  316: &#x27;cicada, cicala&#x27;,</span><br><span class="line">  317: &#x27;leafhopper&#x27;,</span><br><span class="line">  318: &#x27;lacewing, lacewing fly&#x27;,</span><br><span class="line">  319: &#x27;dragonfly, darning needle, devil\&#x27;s darning needle, sewing needle, &#x27; +</span><br><span class="line">      &#x27;snake feeder, snake doctor, mosquito hawk, skeeter hawk&#x27;,</span><br><span class="line">  320: &#x27;damselfly&#x27;,</span><br><span class="line">  321: &#x27;admiral&#x27;,</span><br><span class="line">  322: &#x27;ringlet, ringlet butterfly&#x27;,</span><br><span class="line">  323: &#x27;monarch, monarch butterfly, milkweed butterfly, Danaus plexippus&#x27;,</span><br><span class="line">  324: &#x27;cabbage butterfly&#x27;,</span><br><span class="line">  325: &#x27;sulphur butterfly, sulfur butterfly&#x27;,</span><br><span class="line">  326: &#x27;lycaenid, lycaenid butterfly&#x27;,</span><br><span class="line">  327: &#x27;starfish, sea star&#x27;,</span><br><span class="line">  328: &#x27;sea urchin&#x27;,</span><br><span class="line">  329: &#x27;sea cucumber, holothurian&#x27;,</span><br><span class="line">  330: &#x27;wood rabbit, cottontail, cottontail rabbit&#x27;,</span><br><span class="line">  331: &#x27;hare&#x27;,</span><br><span class="line">  332: &#x27;Angora, Angora rabbit&#x27;,</span><br><span class="line">  333: &#x27;hamster&#x27;,</span><br><span class="line">  334: &#x27;porcupine, hedgehog&#x27;,</span><br><span class="line">  335: &#x27;fox squirrel, eastern fox squirrel, Sciurus niger&#x27;,</span><br><span class="line">  336: &#x27;marmot&#x27;,</span><br><span class="line">  337: &#x27;beaver&#x27;,</span><br><span class="line">  338: &#x27;guinea pig, Cavia cobaya&#x27;,</span><br><span class="line">  339: &#x27;sorrel&#x27;,</span><br><span class="line">  340: &#x27;zebra&#x27;,</span><br><span class="line">  341: &#x27;hog, pig, grunter, squealer, Sus scrofa&#x27;,</span><br><span class="line">  342: &#x27;wild boar, boar, Sus scrofa&#x27;,</span><br><span class="line">  343: &#x27;warthog&#x27;,</span><br><span class="line">  344: &#x27;hippopotamus, hippo, river horse, Hippopotamus amphibius&#x27;,</span><br><span class="line">  345: &#x27;ox&#x27;,</span><br><span class="line">  346: &#x27;water buffalo, water ox, Asiatic buffalo, Bubalus bubalis&#x27;,</span><br><span class="line">  347: &#x27;bison&#x27;,</span><br><span class="line">  348: &#x27;ram, tup&#x27;,</span><br><span class="line">  349: &#x27;bighorn, bighorn sheep, cimarron, Rocky Mountain bighorn, Rocky &#x27; +</span><br><span class="line">      &#x27;Mountain sheep, Ovis canadensis&#x27;,</span><br><span class="line">  350: &#x27;ibex, Capra ibex&#x27;,</span><br><span class="line">  351: &#x27;hartebeest&#x27;,</span><br><span class="line">  352: &#x27;impala, Aepyceros melampus&#x27;,</span><br><span class="line">  353: &#x27;gazelle&#x27;,</span><br><span class="line">  354: &#x27;Arabian camel, dromedary, Camelus dromedarius&#x27;,</span><br><span class="line">  355: &#x27;llama&#x27;,</span><br><span class="line">  356: &#x27;weasel&#x27;,</span><br><span class="line">  357: &#x27;mink&#x27;,</span><br><span class="line">  358: &#x27;polecat, fitch, foulmart, foumart, Mustela putorius&#x27;,</span><br><span class="line">  359: &#x27;black-footed ferret, ferret, Mustela nigripes&#x27;,</span><br><span class="line">  360: &#x27;otter&#x27;,</span><br><span class="line">  361: &#x27;skunk, polecat, wood pussy&#x27;,</span><br><span class="line">  362: &#x27;badger&#x27;,</span><br><span class="line">  363: &#x27;armadillo&#x27;,</span><br><span class="line">  364: &#x27;three-toed sloth, ai, Bradypus tridactylus&#x27;,</span><br><span class="line">  365: &#x27;orangutan, orang, orangutang, Pongo pygmaeus&#x27;,</span><br><span class="line">  366: &#x27;gorilla, Gorilla gorilla&#x27;,</span><br><span class="line">  367: &#x27;chimpanzee, chimp, Pan troglodytes&#x27;,</span><br><span class="line">  368: &#x27;gibbon, Hylobates lar&#x27;,</span><br><span class="line">  369: &#x27;siamang, Hylobates syndactylus, Symphalangus syndactylus&#x27;,</span><br><span class="line">  370: &#x27;guenon, guenon monkey&#x27;,</span><br><span class="line">  371: &#x27;patas, hussar monkey, Erythrocebus patas&#x27;,</span><br><span class="line">  372: &#x27;baboon&#x27;,</span><br><span class="line">  373: &#x27;macaque&#x27;,</span><br><span class="line">  374: &#x27;langur&#x27;,</span><br><span class="line">  375: &#x27;colobus, colobus monkey&#x27;,</span><br><span class="line">  376: &#x27;proboscis monkey, Nasalis larvatus&#x27;,</span><br><span class="line">  377: &#x27;marmoset&#x27;,</span><br><span class="line">  378: &#x27;capuchin, ringtail, Cebus capucinus&#x27;,</span><br><span class="line">  379: &#x27;howler monkey, howler&#x27;,</span><br><span class="line">  380: &#x27;titi, titi monkey&#x27;,</span><br><span class="line">  381: &#x27;spider monkey, Ateles geoffroyi&#x27;,</span><br><span class="line">  382: &#x27;squirrel monkey, Saimiri sciureus&#x27;,</span><br><span class="line">  383: &#x27;Madagascar cat, ring-tailed lemur, Lemur catta&#x27;,</span><br><span class="line">  384: &#x27;indri, indris, Indri indri, Indri brevicaudatus&#x27;,</span><br><span class="line">  385: &#x27;Indian elephant, Elephas maximus&#x27;,</span><br><span class="line">  386: &#x27;African elephant, Loxodonta africana&#x27;,</span><br><span class="line">  387: &#x27;lesser panda, red panda, panda, bear cat, cat bear, Ailurus fulgens&#x27;,</span><br><span class="line">  388: &#x27;giant panda, panda, panda bear, coon bear, Ailuropoda melanoleuca&#x27;,</span><br><span class="line">  389: &#x27;barracouta, snoek&#x27;,</span><br><span class="line">  390: &#x27;eel&#x27;,</span><br><span class="line">  391: &#x27;coho, cohoe, coho salmon, blue jack, silver salmon, Oncorhynchus &#x27; +</span><br><span class="line">      &#x27;kisutch&#x27;,</span><br><span class="line">  392: &#x27;rock beauty, Holocanthus tricolor&#x27;,</span><br><span class="line">  393: &#x27;anemone fish&#x27;,</span><br><span class="line">  394: &#x27;sturgeon&#x27;,</span><br><span class="line">  395: &#x27;gar, garfish, garpike, billfish, Lepisosteus osseus&#x27;,</span><br><span class="line">  396: &#x27;lionfish&#x27;,</span><br><span class="line">  397: &#x27;puffer, pufferfish, blowfish, globefish&#x27;,</span><br><span class="line">  398: &#x27;abacus&#x27;,</span><br><span class="line">  399: &#x27;abaya&#x27;,</span><br><span class="line">  400: &#x27;academic gown, academic robe, judge\&#x27;s robe&#x27;,</span><br><span class="line">  401: &#x27;accordion, piano accordion, squeeze box&#x27;,</span><br><span class="line">  402: &#x27;acoustic guitar&#x27;,</span><br><span class="line">  403: &#x27;aircraft carrier, carrier, flattop, attack aircraft carrier&#x27;,</span><br><span class="line">  404: &#x27;airliner&#x27;,</span><br><span class="line">  405: &#x27;airship, dirigible&#x27;,</span><br><span class="line">  406: &#x27;altar&#x27;,</span><br><span class="line">  407: &#x27;ambulance&#x27;,</span><br><span class="line">  408: &#x27;amphibian, amphibious vehicle&#x27;,</span><br><span class="line">  409: &#x27;analog clock&#x27;,</span><br><span class="line">  410: &#x27;apiary, bee house&#x27;,</span><br><span class="line">  411: &#x27;apron&#x27;,</span><br><span class="line">  412: &#x27;ashcan, trash can, garbage can, wastebin, ash bin, ash-bin, ashbin, &#x27; +</span><br><span class="line">      &#x27;dustbin, trash barrel, trash bin&#x27;,</span><br><span class="line">  413: &#x27;assault rifle, assault gun&#x27;,</span><br><span class="line">  414: &#x27;backpack, back pack, knapsack, packsack, rucksack, haversack&#x27;,</span><br><span class="line">  415: &#x27;bakery, bakeshop, bakehouse&#x27;,</span><br><span class="line">  416: &#x27;balance beam, beam&#x27;,</span><br><span class="line">  417: &#x27;balloon&#x27;,</span><br><span class="line">  418: &#x27;ballpoint, ballpoint pen, ballpen, Biro&#x27;,</span><br><span class="line">  419: &#x27;Band Aid&#x27;,</span><br><span class="line">  420: &#x27;banjo&#x27;,</span><br><span class="line">  421: &#x27;bannister, banister, balustrade, balusters, handrail&#x27;,</span><br><span class="line">  422: &#x27;barbell&#x27;,</span><br><span class="line">  423: &#x27;barber chair&#x27;,</span><br><span class="line">  424: &#x27;barbershop&#x27;,</span><br><span class="line">  425: &#x27;barn&#x27;,</span><br><span class="line">  426: &#x27;barometer&#x27;,</span><br><span class="line">  427: &#x27;barrel, cask&#x27;,</span><br><span class="line">  428: &#x27;barrow, garden cart, lawn cart, wheelbarrow&#x27;,</span><br><span class="line">  429: &#x27;baseball&#x27;,</span><br><span class="line">  430: &#x27;basketball&#x27;,</span><br><span class="line">  431: &#x27;bassinet&#x27;,</span><br><span class="line">  432: &#x27;bassoon&#x27;,</span><br><span class="line">  433: &#x27;bathing cap, swimming cap&#x27;,</span><br><span class="line">  434: &#x27;bath towel&#x27;,</span><br><span class="line">  435: &#x27;bathtub, bathing tub, bath, tub&#x27;,</span><br><span class="line">  436: &#x27;beach wagon, station wagon, wagon, estate car, beach waggon, station &#x27; +</span><br><span class="line">      &#x27;waggon, waggon&#x27;,</span><br><span class="line">  437: &#x27;beacon, lighthouse, beacon light, pharos&#x27;,</span><br><span class="line">  438: &#x27;beaker&#x27;,</span><br><span class="line">  439: &#x27;bearskin, busby, shako&#x27;,</span><br><span class="line">  440: &#x27;beer bottle&#x27;,</span><br><span class="line">  441: &#x27;beer glass&#x27;,</span><br><span class="line">  442: &#x27;bell cote, bell cot&#x27;,</span><br><span class="line">  443: &#x27;bib&#x27;,</span><br><span class="line">  444: &#x27;bicycle-built-for-two, tandem bicycle, tandem&#x27;,</span><br><span class="line">  445: &#x27;bikini, two-piece&#x27;,</span><br><span class="line">  446: &#x27;binder, ring-binder&#x27;,</span><br><span class="line">  447: &#x27;binoculars, field glasses, opera glasses&#x27;,</span><br><span class="line">  448: &#x27;birdhouse&#x27;,</span><br><span class="line">  449: &#x27;boathouse&#x27;,</span><br><span class="line">  450: &#x27;bobsled, bobsleigh, bob&#x27;,</span><br><span class="line">  451: &#x27;bolo tie, bolo, bola tie, bola&#x27;,</span><br><span class="line">  452: &#x27;bonnet, poke bonnet&#x27;,</span><br><span class="line">  453: &#x27;bookcase&#x27;,</span><br><span class="line">  454: &#x27;bookshop, bookstore, bookstall&#x27;,</span><br><span class="line">  455: &#x27;bottlecap&#x27;,</span><br><span class="line">  456: &#x27;bow&#x27;,</span><br><span class="line">  457: &#x27;bow tie, bow-tie, bowtie&#x27;,</span><br><span class="line">  458: &#x27;brass, memorial tablet, plaque&#x27;,</span><br><span class="line">  459: &#x27;brassiere, bra, bandeau&#x27;,</span><br><span class="line">  460: &#x27;breakwater, groin, groyne, mole, bulwark, seawall, jetty&#x27;,</span><br><span class="line">  461: &#x27;breastplate, aegis, egis&#x27;,</span><br><span class="line">  462: &#x27;broom&#x27;,</span><br><span class="line">  463: &#x27;bucket, pail&#x27;,</span><br><span class="line">  464: &#x27;buckle&#x27;,</span><br><span class="line">  465: &#x27;bulletproof vest&#x27;,</span><br><span class="line">  466: &#x27;bullet train, bullet&#x27;,</span><br><span class="line">  467: &#x27;butcher shop, meat market&#x27;,</span><br><span class="line">  468: &#x27;cab, hack, taxi, taxicab&#x27;,</span><br><span class="line">  469: &#x27;caldron, cauldron&#x27;,</span><br><span class="line">  470: &#x27;candle, taper, wax light&#x27;,</span><br><span class="line">  471: &#x27;cannon&#x27;,</span><br><span class="line">  472: &#x27;canoe&#x27;,</span><br><span class="line">  473: &#x27;can opener, tin opener&#x27;,</span><br><span class="line">  474: &#x27;cardigan&#x27;,</span><br><span class="line">  475: &#x27;car mirror&#x27;,</span><br><span class="line">  476: &#x27;carousel, carrousel, merry-go-round, roundabout, whirligig&#x27;,</span><br><span class="line">  477: &#x27;carpenter\&#x27;s kit, tool kit&#x27;,</span><br><span class="line">  478: &#x27;carton&#x27;,</span><br><span class="line">  479: &#x27;car wheel&#x27;,</span><br><span class="line">  480: &#x27;cash machine, cash dispenser, automated teller machine, automatic &#x27; +</span><br><span class="line">      &#x27;teller machine, automated teller, automatic teller, ATM&#x27;,</span><br><span class="line">  481: &#x27;cassette&#x27;,</span><br><span class="line">  482: &#x27;cassette player&#x27;,</span><br><span class="line">  483: &#x27;castle&#x27;,</span><br><span class="line">  484: &#x27;catamaran&#x27;,</span><br><span class="line">  485: &#x27;CD player&#x27;,</span><br><span class="line">  486: &#x27;cello, violoncello&#x27;,</span><br><span class="line">  487: &#x27;cellular telephone, cellular phone, cellphone, cell, mobile phone&#x27;,</span><br><span class="line">  488: &#x27;chain&#x27;,</span><br><span class="line">  489: &#x27;chainlink fence&#x27;,</span><br><span class="line">  490: &#x27;chain mail, ring mail, mail, chain armor, chain armour, ring armor, &#x27; +</span><br><span class="line">      &#x27;ring armour&#x27;,</span><br><span class="line">  491: &#x27;chain saw, chainsaw&#x27;,</span><br><span class="line">  492: &#x27;chest&#x27;,</span><br><span class="line">  493: &#x27;chiffonier, commode&#x27;,</span><br><span class="line">  494: &#x27;chime, bell, gong&#x27;,</span><br><span class="line">  495: &#x27;china cabinet, china closet&#x27;,</span><br><span class="line">  496: &#x27;Christmas stocking&#x27;,</span><br><span class="line">  497: &#x27;church, church building&#x27;,</span><br><span class="line">  498: &#x27;cinema, movie theater, movie theatre, movie house, picture palace&#x27;,</span><br><span class="line">  499: &#x27;cleaver, meat cleaver, chopper&#x27;,</span><br><span class="line">  500: &#x27;cliff dwelling&#x27;,</span><br><span class="line">  501: &#x27;cloak&#x27;,</span><br><span class="line">  502: &#x27;clog, geta, patten, sabot&#x27;,</span><br><span class="line">  503: &#x27;cocktail shaker&#x27;,</span><br><span class="line">  504: &#x27;coffee mug&#x27;,</span><br><span class="line">  505: &#x27;coffeepot&#x27;,</span><br><span class="line">  506: &#x27;coil, spiral, volute, whorl, helix&#x27;,</span><br><span class="line">  507: &#x27;combination lock&#x27;,</span><br><span class="line">  508: &#x27;computer keyboard, keypad&#x27;,</span><br><span class="line">  509: &#x27;confectionery, confectionary, candy store&#x27;,</span><br><span class="line">  510: &#x27;container ship, containership, container vessel&#x27;,</span><br><span class="line">  511: &#x27;convertible&#x27;,</span><br><span class="line">  512: &#x27;corkscrew, bottle screw&#x27;,</span><br><span class="line">  513: &#x27;cornet, horn, trumpet, trump&#x27;,</span><br><span class="line">  514: &#x27;cowboy boot&#x27;,</span><br><span class="line">  515: &#x27;cowboy hat, ten-gallon hat&#x27;,</span><br><span class="line">  516: &#x27;cradle&#x27;,</span><br><span class="line">  517: &#x27;crane&#x27;,</span><br><span class="line">  518: &#x27;crash helmet&#x27;,</span><br><span class="line">  519: &#x27;crate&#x27;,</span><br><span class="line">  520: &#x27;crib, cot&#x27;,</span><br><span class="line">  521: &#x27;Crock Pot&#x27;,</span><br><span class="line">  522: &#x27;croquet ball&#x27;,</span><br><span class="line">  523: &#x27;crutch&#x27;,</span><br><span class="line">  524: &#x27;cuirass&#x27;,</span><br><span class="line">  525: &#x27;dam, dike, dyke&#x27;,</span><br><span class="line">  526: &#x27;desk&#x27;,</span><br><span class="line">  527: &#x27;desktop computer&#x27;,</span><br><span class="line">  528: &#x27;dial telephone, dial phone&#x27;,</span><br><span class="line">  529: &#x27;diaper, nappy, napkin&#x27;,</span><br><span class="line">  530: &#x27;digital clock&#x27;,</span><br><span class="line">  531: &#x27;digital watch&#x27;,</span><br><span class="line">  532: &#x27;dining table, board&#x27;,</span><br><span class="line">  533: &#x27;dishrag, dishcloth&#x27;,</span><br><span class="line">  534: &#x27;dishwasher, dish washer, dishwashing machine&#x27;,</span><br><span class="line">  535: &#x27;disk brake, disc brake&#x27;,</span><br><span class="line">  536: &#x27;dock, dockage, docking facility&#x27;,</span><br><span class="line">  537: &#x27;dogsled, dog sled, dog sleigh&#x27;,</span><br><span class="line">  538: &#x27;dome&#x27;,</span><br><span class="line">  539: &#x27;doormat, welcome mat&#x27;,</span><br><span class="line">  540: &#x27;drilling platform, offshore rig&#x27;,</span><br><span class="line">  541: &#x27;drum, membranophone, tympan&#x27;,</span><br><span class="line">  542: &#x27;drumstick&#x27;,</span><br><span class="line">  543: &#x27;dumbbell&#x27;,</span><br><span class="line">  544: &#x27;Dutch oven&#x27;,</span><br><span class="line">  545: &#x27;electric fan, blower&#x27;,</span><br><span class="line">  546: &#x27;electric guitar&#x27;,</span><br><span class="line">  547: &#x27;electric locomotive&#x27;,</span><br><span class="line">  548: &#x27;entertainment center&#x27;,</span><br><span class="line">  549: &#x27;envelope&#x27;,</span><br><span class="line">  550: &#x27;espresso maker&#x27;,</span><br><span class="line">  551: &#x27;face powder&#x27;,</span><br><span class="line">  552: &#x27;feather boa, boa&#x27;,</span><br><span class="line">  553: &#x27;file, file cabinet, filing cabinet&#x27;,</span><br><span class="line">  554: &#x27;fireboat&#x27;,</span><br><span class="line">  555: &#x27;fire engine, fire truck&#x27;,</span><br><span class="line">  556: &#x27;fire screen, fireguard&#x27;,</span><br><span class="line">  557: &#x27;flagpole, flagstaff&#x27;,</span><br><span class="line">  558: &#x27;flute, transverse flute&#x27;,</span><br><span class="line">  559: &#x27;folding chair&#x27;,</span><br><span class="line">  560: &#x27;football helmet&#x27;,</span><br><span class="line">  561: &#x27;forklift&#x27;,</span><br><span class="line">  562: &#x27;fountain&#x27;,</span><br><span class="line">  563: &#x27;fountain pen&#x27;,</span><br><span class="line">  564: &#x27;four-poster&#x27;,</span><br><span class="line">  565: &#x27;freight car&#x27;,</span><br><span class="line">  566: &#x27;French horn, horn&#x27;,</span><br><span class="line">  567: &#x27;frying pan, frypan, skillet&#x27;,</span><br><span class="line">  568: &#x27;fur coat&#x27;,</span><br><span class="line">  569: &#x27;garbage truck, dustcart&#x27;,</span><br><span class="line">  570: &#x27;gasmask, respirator, gas helmet&#x27;,</span><br><span class="line">  571: &#x27;gas pump, gasoline pump, petrol pump, island dispenser&#x27;,</span><br><span class="line">  572: &#x27;goblet&#x27;,</span><br><span class="line">  573: &#x27;go-kart&#x27;,</span><br><span class="line">  574: &#x27;golf ball&#x27;,</span><br><span class="line">  575: &#x27;golfcart, golf cart&#x27;,</span><br><span class="line">  576: &#x27;gondola&#x27;,</span><br><span class="line">  577: &#x27;gong, tam-tam&#x27;,</span><br><span class="line">  578: &#x27;gown&#x27;,</span><br><span class="line">  579: &#x27;grand piano, grand&#x27;,</span><br><span class="line">  580: &#x27;greenhouse, nursery, glasshouse&#x27;,</span><br><span class="line">  581: &#x27;grille, radiator grille&#x27;,</span><br><span class="line">  582: &#x27;grocery store, grocery, food market, market&#x27;,</span><br><span class="line">  583: &#x27;guillotine&#x27;,</span><br><span class="line">  584: &#x27;hair slide&#x27;,</span><br><span class="line">  585: &#x27;hair spray&#x27;,</span><br><span class="line">  586: &#x27;half track&#x27;,</span><br><span class="line">  587: &#x27;hammer&#x27;,</span><br><span class="line">  588: &#x27;hamper&#x27;,</span><br><span class="line">  589: &#x27;hand blower, blow dryer, blow drier, hair dryer, hair drier&#x27;,</span><br><span class="line">  590: &#x27;hand-held computer, hand-held microcomputer&#x27;,</span><br><span class="line">  591: &#x27;handkerchief, hankie, hanky, hankey&#x27;,</span><br><span class="line">  592: &#x27;hard disc, hard disk, fixed disk&#x27;,</span><br><span class="line">  593: &#x27;harmonica, mouth organ, harp, mouth harp&#x27;,</span><br><span class="line">  594: &#x27;harp&#x27;,</span><br><span class="line">  595: &#x27;harvester, reaper&#x27;,</span><br><span class="line">  596: &#x27;hatchet&#x27;,</span><br><span class="line">  597: &#x27;holster&#x27;,</span><br><span class="line">  598: &#x27;home theater, home theatre&#x27;,</span><br><span class="line">  599: &#x27;honeycomb&#x27;,</span><br><span class="line">  600: &#x27;hook, claw&#x27;,</span><br><span class="line">  601: &#x27;hoopskirt, crinoline&#x27;,</span><br><span class="line">  602: &#x27;horizontal bar, high bar&#x27;,</span><br><span class="line">  603: &#x27;horse cart, horse-cart&#x27;,</span><br><span class="line">  604: &#x27;hourglass&#x27;,</span><br><span class="line">  605: &#x27;iPod&#x27;,</span><br><span class="line">  606: &#x27;iron, smoothing iron&#x27;,</span><br><span class="line">  607: &#x27;jack-o\&#x27;-lantern&#x27;,</span><br><span class="line">  608: &#x27;jean, blue jean, denim&#x27;,</span><br><span class="line">  609: &#x27;jeep, landrover&#x27;,</span><br><span class="line">  610: &#x27;jersey, T-shirt, tee shirt&#x27;,</span><br><span class="line">  611: &#x27;jigsaw puzzle&#x27;,</span><br><span class="line">  612: &#x27;jinrikisha, ricksha, rickshaw&#x27;,</span><br><span class="line">  613: &#x27;joystick&#x27;,</span><br><span class="line">  614: &#x27;kimono&#x27;,</span><br><span class="line">  615: &#x27;knee pad&#x27;,</span><br><span class="line">  616: &#x27;knot&#x27;,</span><br><span class="line">  617: &#x27;lab coat, laboratory coat&#x27;,</span><br><span class="line">  618: &#x27;ladle&#x27;,</span><br><span class="line">  619: &#x27;lampshade, lamp shade&#x27;,</span><br><span class="line">  620: &#x27;laptop, laptop computer&#x27;,</span><br><span class="line">  621: &#x27;lawn mower, mower&#x27;,</span><br><span class="line">  622: &#x27;lens cap, lens cover&#x27;,</span><br><span class="line">  623: &#x27;letter opener, paper knife, paperknife&#x27;,</span><br><span class="line">  624: &#x27;library&#x27;,</span><br><span class="line">  625: &#x27;lifeboat&#x27;,</span><br><span class="line">  626: &#x27;lighter, light, igniter, ignitor&#x27;,</span><br><span class="line">  627: &#x27;limousine, limo&#x27;,</span><br><span class="line">  628: &#x27;liner, ocean liner&#x27;,</span><br><span class="line">  629: &#x27;lipstick, lip rouge&#x27;,</span><br><span class="line">  630: &#x27;Loafer&#x27;,</span><br><span class="line">  631: &#x27;lotion&#x27;,</span><br><span class="line">  632: &#x27;loudspeaker, speaker, speaker unit, loudspeaker system, speaker &#x27; +</span><br><span class="line">      &#x27;system&#x27;,</span><br><span class="line">  633: &#x27;loupe, jeweler\&#x27;s loupe&#x27;,</span><br><span class="line">  634: &#x27;lumbermill, sawmill&#x27;,</span><br><span class="line">  635: &#x27;magnetic compass&#x27;,</span><br><span class="line">  636: &#x27;mailbag, postbag&#x27;,</span><br><span class="line">  637: &#x27;mailbox, letter box&#x27;,</span><br><span class="line">  638: &#x27;maillot&#x27;,</span><br><span class="line">  639: &#x27;maillot, tank suit&#x27;,</span><br><span class="line">  640: &#x27;manhole cover&#x27;,</span><br><span class="line">  641: &#x27;maraca&#x27;,</span><br><span class="line">  642: &#x27;marimba, xylophone&#x27;,</span><br><span class="line">  643: &#x27;mask&#x27;,</span><br><span class="line">  644: &#x27;matchstick&#x27;,</span><br><span class="line">  645: &#x27;maypole&#x27;,</span><br><span class="line">  646: &#x27;maze, labyrinth&#x27;,</span><br><span class="line">  647: &#x27;measuring cup&#x27;,</span><br><span class="line">  648: &#x27;medicine chest, medicine cabinet&#x27;,</span><br><span class="line">  649: &#x27;megalith, megalithic structure&#x27;,</span><br><span class="line">  650: &#x27;microphone, mike&#x27;,</span><br><span class="line">  651: &#x27;microwave, microwave oven&#x27;,</span><br><span class="line">  652: &#x27;military uniform&#x27;,</span><br><span class="line">  653: &#x27;milk can&#x27;,</span><br><span class="line">  654: &#x27;minibus&#x27;,</span><br><span class="line">  655: &#x27;miniskirt, mini&#x27;,</span><br><span class="line">  656: &#x27;minivan&#x27;,</span><br><span class="line">  657: &#x27;missile&#x27;,</span><br><span class="line">  658: &#x27;mitten&#x27;,</span><br><span class="line">  659: &#x27;mixing bowl&#x27;,</span><br><span class="line">  660: &#x27;mobile home, manufactured home&#x27;,</span><br><span class="line">  661: &#x27;Model T&#x27;,</span><br><span class="line">  662: &#x27;modem&#x27;,</span><br><span class="line">  663: &#x27;monastery&#x27;,</span><br><span class="line">  664: &#x27;monitor&#x27;,</span><br><span class="line">  665: &#x27;moped&#x27;,</span><br><span class="line">  666: &#x27;mortar&#x27;,</span><br><span class="line">  667: &#x27;mortarboard&#x27;,</span><br><span class="line">  668: &#x27;mosque&#x27;,</span><br><span class="line">  669: &#x27;mosquito net&#x27;,</span><br><span class="line">  670: &#x27;motor scooter, scooter&#x27;,</span><br><span class="line">  671: &#x27;mountain bike, all-terrain bike, off-roader&#x27;,</span><br><span class="line">  672: &#x27;mountain tent&#x27;,</span><br><span class="line">  673: &#x27;mouse, computer mouse&#x27;,</span><br><span class="line">  674: &#x27;mousetrap&#x27;,</span><br><span class="line">  675: &#x27;moving van&#x27;,</span><br><span class="line">  676: &#x27;muzzle&#x27;,</span><br><span class="line">  677: &#x27;nail&#x27;,</span><br><span class="line">  678: &#x27;neck brace&#x27;,</span><br><span class="line">  679: &#x27;necklace&#x27;,</span><br><span class="line">  680: &#x27;nipple&#x27;,</span><br><span class="line">  681: &#x27;notebook, notebook computer&#x27;,</span><br><span class="line">  682: &#x27;obelisk&#x27;,</span><br><span class="line">  683: &#x27;oboe, hautboy, hautbois&#x27;,</span><br><span class="line">  684: &#x27;ocarina, sweet potato&#x27;,</span><br><span class="line">  685: &#x27;odometer, hodometer, mileometer, milometer&#x27;,</span><br><span class="line">  686: &#x27;oil filter&#x27;,</span><br><span class="line">  687: &#x27;organ, pipe organ&#x27;,</span><br><span class="line">  688: &#x27;oscilloscope, scope, cathode-ray oscilloscope, CRO&#x27;,</span><br><span class="line">  689: &#x27;overskirt&#x27;,</span><br><span class="line">  690: &#x27;oxcart&#x27;,</span><br><span class="line">  691: &#x27;oxygen mask&#x27;,</span><br><span class="line">  692: &#x27;packet&#x27;,</span><br><span class="line">  693: &#x27;paddle, boat paddle&#x27;,</span><br><span class="line">  694: &#x27;paddlewheel, paddle wheel&#x27;,</span><br><span class="line">  695: &#x27;padlock&#x27;,</span><br><span class="line">  696: &#x27;paintbrush&#x27;,</span><br><span class="line">  697: &#x27;pajama, pyjama, pj\&#x27;s, jammies&#x27;,</span><br><span class="line">  698: &#x27;palace&#x27;,</span><br><span class="line">  699: &#x27;panpipe, pandean pipe, syrinx&#x27;,</span><br><span class="line">  700: &#x27;paper towel&#x27;,</span><br><span class="line">  701: &#x27;parachute, chute&#x27;,</span><br><span class="line">  702: &#x27;parallel bars, bars&#x27;,</span><br><span class="line">  703: &#x27;park bench&#x27;,</span><br><span class="line">  704: &#x27;parking meter&#x27;,</span><br><span class="line">  705: &#x27;passenger car, coach, carriage&#x27;,</span><br><span class="line">  706: &#x27;patio, terrace&#x27;,</span><br><span class="line">  707: &#x27;pay-phone, pay-station&#x27;,</span><br><span class="line">  708: &#x27;pedestal, plinth, footstall&#x27;,</span><br><span class="line">  709: &#x27;pencil box, pencil case&#x27;,</span><br><span class="line">  710: &#x27;pencil sharpener&#x27;,</span><br><span class="line">  711: &#x27;perfume, essence&#x27;,</span><br><span class="line">  712: &#x27;Petri dish&#x27;,</span><br><span class="line">  713: &#x27;photocopier&#x27;,</span><br><span class="line">  714: &#x27;pick, plectrum, plectron&#x27;,</span><br><span class="line">  715: &#x27;pickelhaube&#x27;,</span><br><span class="line">  716: &#x27;picket fence, paling&#x27;,</span><br><span class="line">  717: &#x27;pickup, pickup truck&#x27;,</span><br><span class="line">  718: &#x27;pier&#x27;,</span><br><span class="line">  719: &#x27;piggy bank, penny bank&#x27;,</span><br><span class="line">  720: &#x27;pill bottle&#x27;,</span><br><span class="line">  721: &#x27;pillow&#x27;,</span><br><span class="line">  722: &#x27;ping-pong ball&#x27;,</span><br><span class="line">  723: &#x27;pinwheel&#x27;,</span><br><span class="line">  724: &#x27;pirate, pirate ship&#x27;,</span><br><span class="line">  725: &#x27;pitcher, ewer&#x27;,</span><br><span class="line">  726: &#x27;plane, carpenter\&#x27;s plane, woodworking plane&#x27;,</span><br><span class="line">  727: &#x27;planetarium&#x27;,</span><br><span class="line">  728: &#x27;plastic bag&#x27;,</span><br><span class="line">  729: &#x27;plate rack&#x27;,</span><br><span class="line">  730: &#x27;plow, plough&#x27;,</span><br><span class="line">  731: &#x27;plunger, plumber\&#x27;s helper&#x27;,</span><br><span class="line">  732: &#x27;Polaroid camera, Polaroid Land camera&#x27;,</span><br><span class="line">  733: &#x27;pole&#x27;,</span><br><span class="line">  734: &#x27;police van, police wagon, paddy wagon, patrol wagon, wagon, black &#x27; +</span><br><span class="line">      &#x27;Maria&#x27;,</span><br><span class="line">  735: &#x27;poncho&#x27;,</span><br><span class="line">  736: &#x27;pool table, billiard table, snooker table&#x27;,</span><br><span class="line">  737: &#x27;pop bottle, soda bottle&#x27;,</span><br><span class="line">  738: &#x27;pot, flowerpot&#x27;,</span><br><span class="line">  739: &#x27;potter\&#x27;s wheel&#x27;,</span><br><span class="line">  740: &#x27;power drill&#x27;,</span><br><span class="line">  741: &#x27;prayer rug, prayer mat&#x27;,</span><br><span class="line">  742: &#x27;printer&#x27;,</span><br><span class="line">  743: &#x27;prison, prison house&#x27;,</span><br><span class="line">  744: &#x27;projectile, missile&#x27;,</span><br><span class="line">  745: &#x27;projector&#x27;,</span><br><span class="line">  746: &#x27;puck, hockey puck&#x27;,</span><br><span class="line">  747: &#x27;punching bag, punch bag, punching ball, punchball&#x27;,</span><br><span class="line">  748: &#x27;purse&#x27;,</span><br><span class="line">  749: &#x27;quill, quill pen&#x27;,</span><br><span class="line">  750: &#x27;quilt, comforter, comfort, puff&#x27;,</span><br><span class="line">  751: &#x27;racer, race car, racing car&#x27;,</span><br><span class="line">  752: &#x27;racket, racquet&#x27;,</span><br><span class="line">  753: &#x27;radiator&#x27;,</span><br><span class="line">  754: &#x27;radio, wireless&#x27;,</span><br><span class="line">  755: &#x27;radio telescope, radio reflector&#x27;,</span><br><span class="line">  756: &#x27;rain barrel&#x27;,</span><br><span class="line">  757: &#x27;recreational vehicle, RV, R.V.&#x27;,</span><br><span class="line">  758: &#x27;reel&#x27;,</span><br><span class="line">  759: &#x27;reflex camera&#x27;,</span><br><span class="line">  760: &#x27;refrigerator, icebox&#x27;,</span><br><span class="line">  761: &#x27;remote control, remote&#x27;,</span><br><span class="line">  762: &#x27;restaurant, eating house, eating place, eatery&#x27;,</span><br><span class="line">  763: &#x27;revolver, six-gun, six-shooter&#x27;,</span><br><span class="line">  764: &#x27;rifle&#x27;,</span><br><span class="line">  765: &#x27;rocking chair, rocker&#x27;,</span><br><span class="line">  766: &#x27;rotisserie&#x27;,</span><br><span class="line">  767: &#x27;rubber eraser, rubber, pencil eraser&#x27;,</span><br><span class="line">  768: &#x27;rugby ball&#x27;,</span><br><span class="line">  769: &#x27;rule, ruler&#x27;,</span><br><span class="line">  770: &#x27;running shoe&#x27;,</span><br><span class="line">  771: &#x27;safe&#x27;,</span><br><span class="line">  772: &#x27;safety pin&#x27;,</span><br><span class="line">  773: &#x27;saltshaker, salt shaker&#x27;,</span><br><span class="line">  774: &#x27;sandal&#x27;,</span><br><span class="line">  775: &#x27;sarong&#x27;,</span><br><span class="line">  776: &#x27;sax, saxophone&#x27;,</span><br><span class="line">  777: &#x27;scabbard&#x27;,</span><br><span class="line">  778: &#x27;scale, weighing machine&#x27;,</span><br><span class="line">  779: &#x27;school bus&#x27;,</span><br><span class="line">  780: &#x27;schooner&#x27;,</span><br><span class="line">  781: &#x27;scoreboard&#x27;,</span><br><span class="line">  782: &#x27;screen, CRT screen&#x27;,</span><br><span class="line">  783: &#x27;screw&#x27;,</span><br><span class="line">  784: &#x27;screwdriver&#x27;,</span><br><span class="line">  785: &#x27;seat belt, seatbelt&#x27;,</span><br><span class="line">  786: &#x27;sewing machine&#x27;,</span><br><span class="line">  787: &#x27;shield, buckler&#x27;,</span><br><span class="line">  788: &#x27;shoe shop, shoe-shop, shoe store&#x27;,</span><br><span class="line">  789: &#x27;shoji&#x27;,</span><br><span class="line">  790: &#x27;shopping basket&#x27;,</span><br><span class="line">  791: &#x27;shopping cart&#x27;,</span><br><span class="line">  792: &#x27;shovel&#x27;,</span><br><span class="line">  793: &#x27;shower cap&#x27;,</span><br><span class="line">  794: &#x27;shower curtain&#x27;,</span><br><span class="line">  795: &#x27;ski&#x27;,</span><br><span class="line">  796: &#x27;ski mask&#x27;,</span><br><span class="line">  797: &#x27;sleeping bag&#x27;,</span><br><span class="line">  798: &#x27;slide rule, slipstick&#x27;,</span><br><span class="line">  799: &#x27;sliding door&#x27;,</span><br><span class="line">  800: &#x27;slot, one-armed bandit&#x27;,</span><br><span class="line">  801: &#x27;snorkel&#x27;,</span><br><span class="line">  802: &#x27;snowmobile&#x27;,</span><br><span class="line">  803: &#x27;snowplow, snowplough&#x27;,</span><br><span class="line">  804: &#x27;soap dispenser&#x27;,</span><br><span class="line">  805: &#x27;soccer ball&#x27;,</span><br><span class="line">  806: &#x27;sock&#x27;,</span><br><span class="line">  807: &#x27;solar dish, solar collector, solar furnace&#x27;,</span><br><span class="line">  808: &#x27;sombrero&#x27;,</span><br><span class="line">  809: &#x27;soup bowl&#x27;,</span><br><span class="line">  810: &#x27;space bar&#x27;,</span><br><span class="line">  811: &#x27;space heater&#x27;,</span><br><span class="line">  812: &#x27;space shuttle&#x27;,</span><br><span class="line">  813: &#x27;spatula&#x27;,</span><br><span class="line">  814: &#x27;speedboat&#x27;,</span><br><span class="line">  815: &#x27;spider web, spider\&#x27;s web&#x27;,</span><br><span class="line">  816: &#x27;spindle&#x27;,</span><br><span class="line">  817: &#x27;sports car, sport car&#x27;,</span><br><span class="line">  818: &#x27;spotlight, spot&#x27;,</span><br><span class="line">  819: &#x27;stage&#x27;,</span><br><span class="line">  820: &#x27;steam locomotive&#x27;,</span><br><span class="line">  821: &#x27;steel arch bridge&#x27;,</span><br><span class="line">  822: &#x27;steel drum&#x27;,</span><br><span class="line">  823: &#x27;stethoscope&#x27;,</span><br><span class="line">  824: &#x27;stole&#x27;,</span><br><span class="line">  825: &#x27;stone wall&#x27;,</span><br><span class="line">  826: &#x27;stopwatch, stop watch&#x27;,</span><br><span class="line">  827: &#x27;stove&#x27;,</span><br><span class="line">  828: &#x27;strainer&#x27;,</span><br><span class="line">  829: &#x27;streetcar, tram, tramcar, trolley, trolley car&#x27;,</span><br><span class="line">  830: &#x27;stretcher&#x27;,</span><br><span class="line">  831: &#x27;studio couch, day bed&#x27;,</span><br><span class="line">  832: &#x27;stupa, tope&#x27;,</span><br><span class="line">  833: &#x27;submarine, pigboat, sub, U-boat&#x27;,</span><br><span class="line">  834: &#x27;suit, suit of clothes&#x27;,</span><br><span class="line">  835: &#x27;sundial&#x27;,</span><br><span class="line">  836: &#x27;sunglass&#x27;,</span><br><span class="line">  837: &#x27;sunglasses, dark glasses, shades&#x27;,</span><br><span class="line">  838: &#x27;sunscreen, sunblock, sun blocker&#x27;,</span><br><span class="line">  839: &#x27;suspension bridge&#x27;,</span><br><span class="line">  840: &#x27;swab, swob, mop&#x27;,</span><br><span class="line">  841: &#x27;sweatshirt&#x27;,</span><br><span class="line">  842: &#x27;swimming trunks, bathing trunks&#x27;,</span><br><span class="line">  843: &#x27;swing&#x27;,</span><br><span class="line">  844: &#x27;switch, electric switch, electrical switch&#x27;,</span><br><span class="line">  845: &#x27;syringe&#x27;,</span><br><span class="line">  846: &#x27;table lamp&#x27;,</span><br><span class="line">  847: &#x27;tank, army tank, armored combat vehicle, armoured combat vehicle&#x27;,</span><br><span class="line">  848: &#x27;tape player&#x27;,</span><br><span class="line">  849: &#x27;teapot&#x27;,</span><br><span class="line">  850: &#x27;teddy, teddy bear&#x27;,</span><br><span class="line">  851: &#x27;television, television system&#x27;,</span><br><span class="line">  852: &#x27;tennis ball&#x27;,</span><br><span class="line">  853: &#x27;thatch, thatched roof&#x27;,</span><br><span class="line">  854: &#x27;theater curtain, theatre curtain&#x27;,</span><br><span class="line">  855: &#x27;thimble&#x27;,</span><br><span class="line">  856: &#x27;thresher, thrasher, threshing machine&#x27;,</span><br><span class="line">  857: &#x27;throne&#x27;,</span><br><span class="line">  858: &#x27;tile roof&#x27;,</span><br><span class="line">  859: &#x27;toaster&#x27;,</span><br><span class="line">  860: &#x27;tobacco shop, tobacconist shop, tobacconist&#x27;,</span><br><span class="line">  861: &#x27;toilet seat&#x27;,</span><br><span class="line">  862: &#x27;torch&#x27;,</span><br><span class="line">  863: &#x27;totem pole&#x27;,</span><br><span class="line">  864: &#x27;tow truck, tow car, wrecker&#x27;,</span><br><span class="line">  865: &#x27;toyshop&#x27;,</span><br><span class="line">  866: &#x27;tractor&#x27;,</span><br><span class="line">  867: &#x27;trailer truck, tractor trailer, trucking rig, rig, articulated &#x27; +</span><br><span class="line">      &#x27;lorry, semi&#x27;,</span><br><span class="line">  868: &#x27;tray&#x27;,</span><br><span class="line">  869: &#x27;trench coat&#x27;,</span><br><span class="line">  870: &#x27;tricycle, trike, velocipede&#x27;,</span><br><span class="line">  871: &#x27;trimaran&#x27;,</span><br><span class="line">  872: &#x27;tripod&#x27;,</span><br><span class="line">  873: &#x27;triumphal arch&#x27;,</span><br><span class="line">  874: &#x27;trolleybus, trolley coach, trackless trolley&#x27;,</span><br><span class="line">  875: &#x27;trombone&#x27;,</span><br><span class="line">  876: &#x27;tub, vat&#x27;,</span><br><span class="line">  877: &#x27;turnstile&#x27;,</span><br><span class="line">  878: &#x27;typewriter keyboard&#x27;,</span><br><span class="line">  879: &#x27;umbrella&#x27;,</span><br><span class="line">  880: &#x27;unicycle, monocycle&#x27;,</span><br><span class="line">  881: &#x27;upright, upright piano&#x27;,</span><br><span class="line">  882: &#x27;vacuum, vacuum cleaner&#x27;,</span><br><span class="line">  883: &#x27;vase&#x27;,</span><br><span class="line">  884: &#x27;vault&#x27;,</span><br><span class="line">  885: &#x27;velvet&#x27;,</span><br><span class="line">  886: &#x27;vending machine&#x27;,</span><br><span class="line">  887: &#x27;vestment&#x27;,</span><br><span class="line">  888: &#x27;viaduct&#x27;,</span><br><span class="line">  889: &#x27;violin, fiddle&#x27;,</span><br><span class="line">  890: &#x27;volleyball&#x27;,</span><br><span class="line">  891: &#x27;waffle iron&#x27;,</span><br><span class="line">  892: &#x27;wall clock&#x27;,</span><br><span class="line">  893: &#x27;wallet, billfold, notecase, pocketbook&#x27;,</span><br><span class="line">  894: &#x27;wardrobe, closet, press&#x27;,</span><br><span class="line">  895: &#x27;warplane, military plane&#x27;,</span><br><span class="line">  896: &#x27;washbasin, handbasin, washbowl, lavabo, wash-hand basin&#x27;,</span><br><span class="line">  897: &#x27;washer, automatic washer, washing machine&#x27;,</span><br><span class="line">  898: &#x27;water bottle&#x27;,</span><br><span class="line">  899: &#x27;water jug&#x27;,</span><br><span class="line">  900: &#x27;water tower&#x27;,</span><br><span class="line">  901: &#x27;whiskey jug&#x27;,</span><br><span class="line">  902: &#x27;whistle&#x27;,</span><br><span class="line">  903: &#x27;wig&#x27;,</span><br><span class="line">  904: &#x27;window screen&#x27;,</span><br><span class="line">  905: &#x27;window shade&#x27;,</span><br><span class="line">  906: &#x27;Windsor tie&#x27;,</span><br><span class="line">  907: &#x27;wine bottle&#x27;,</span><br><span class="line">  908: &#x27;wing&#x27;,</span><br><span class="line">  909: &#x27;wok&#x27;,</span><br><span class="line">  910: &#x27;wooden spoon&#x27;,</span><br><span class="line">  911: &#x27;wool, woolen, woollen&#x27;,</span><br><span class="line">  912: &#x27;worm fence, snake fence, snake-rail fence, Virginia fence&#x27;,</span><br><span class="line">  913: &#x27;wreck&#x27;,</span><br><span class="line">  914: &#x27;yawl&#x27;,</span><br><span class="line">  915: &#x27;yurt&#x27;,</span><br><span class="line">  916: &#x27;web site, website, internet site, site&#x27;,</span><br><span class="line">  917: &#x27;comic book&#x27;,</span><br><span class="line">  918: &#x27;crossword puzzle, crossword&#x27;,</span><br><span class="line">  919: &#x27;street sign&#x27;,</span><br><span class="line">  920: &#x27;traffic light, traffic signal, stoplight&#x27;,</span><br><span class="line">  921: &#x27;book jacket, dust cover, dust jacket, dust wrapper&#x27;,</span><br><span class="line">  922: &#x27;menu&#x27;,</span><br><span class="line">  923: &#x27;plate&#x27;,</span><br><span class="line">  924: &#x27;guacamole&#x27;,</span><br><span class="line">  925: &#x27;consomme&#x27;,</span><br><span class="line">  926: &#x27;hot pot, hotpot&#x27;,</span><br><span class="line">  927: &#x27;trifle&#x27;,</span><br><span class="line">  928: &#x27;ice cream, icecream&#x27;,</span><br><span class="line">  929: &#x27;ice lolly, lolly, lollipop, popsicle&#x27;,</span><br><span class="line">  930: &#x27;French loaf&#x27;,</span><br><span class="line">  931: &#x27;bagel, beigel&#x27;,</span><br><span class="line">  932: &#x27;pretzel&#x27;,</span><br><span class="line">  933: &#x27;cheeseburger&#x27;,</span><br><span class="line">  934: &#x27;hotdog, hot dog, red hot&#x27;,</span><br><span class="line">  935: &#x27;mashed potato&#x27;,</span><br><span class="line">  936: &#x27;head cabbage&#x27;,</span><br><span class="line">  937: &#x27;broccoli&#x27;,</span><br><span class="line">  938: &#x27;cauliflower&#x27;,</span><br><span class="line">  939: &#x27;zucchini, courgette&#x27;,</span><br><span class="line">  940: &#x27;spaghetti squash&#x27;,</span><br><span class="line">  941: &#x27;acorn squash&#x27;,</span><br><span class="line">  942: &#x27;butternut squash&#x27;,</span><br><span class="line">  943: &#x27;cucumber, cuke&#x27;,</span><br><span class="line">  944: &#x27;artichoke, globe artichoke&#x27;,</span><br><span class="line">  945: &#x27;bell pepper&#x27;,</span><br><span class="line">  946: &#x27;cardoon&#x27;,</span><br><span class="line">  947: &#x27;mushroom&#x27;,</span><br><span class="line">  948: &#x27;Granny Smith&#x27;,</span><br><span class="line">  949: &#x27;strawberry&#x27;,</span><br><span class="line">  950: &#x27;orange&#x27;,</span><br><span class="line">  951: &#x27;lemon&#x27;,</span><br><span class="line">  952: &#x27;fig&#x27;,</span><br><span class="line">  953: &#x27;pineapple, ananas&#x27;,</span><br><span class="line">  954: &#x27;banana&#x27;,</span><br><span class="line">  955: &#x27;jackfruit, jak, jack&#x27;,</span><br><span class="line">  956: &#x27;custard apple&#x27;,</span><br><span class="line">  957: &#x27;pomegranate&#x27;,</span><br><span class="line">  958: &#x27;hay&#x27;,</span><br><span class="line">  959: &#x27;carbonara&#x27;,</span><br><span class="line">  960: &#x27;chocolate sauce, chocolate syrup&#x27;,</span><br><span class="line">  961: &#x27;dough&#x27;,</span><br><span class="line">  962: &#x27;meat loaf, meatloaf&#x27;,</span><br><span class="line">  963: &#x27;pizza, pizza pie&#x27;,</span><br><span class="line">  964: &#x27;potpie&#x27;,</span><br><span class="line">  965: &#x27;burrito&#x27;,</span><br><span class="line">  966: &#x27;red wine&#x27;,</span><br><span class="line">  967: &#x27;espresso&#x27;,</span><br><span class="line">  968: &#x27;cup&#x27;,</span><br><span class="line">  969: &#x27;eggnog&#x27;,</span><br><span class="line">  970: &#x27;alp&#x27;,</span><br><span class="line">  971: &#x27;bubble&#x27;,</span><br><span class="line">  972: &#x27;cliff, drop, drop-off&#x27;,</span><br><span class="line">  973: &#x27;coral reef&#x27;,</span><br><span class="line">  974: &#x27;geyser&#x27;,</span><br><span class="line">  975: &#x27;lakeside, lakeshore&#x27;,</span><br><span class="line">  976: &#x27;promontory, headland, head, foreland&#x27;,</span><br><span class="line">  977: &#x27;sandbar, sand bar&#x27;,</span><br><span class="line">  978: &#x27;seashore, coast, seacoast, sea-coast&#x27;,</span><br><span class="line">  979: &#x27;valley, vale&#x27;,</span><br><span class="line">  980: &#x27;volcano&#x27;,</span><br><span class="line">  981: &#x27;ballplayer, baseball player&#x27;,</span><br><span class="line">  982: &#x27;groom, bridegroom&#x27;,</span><br><span class="line">  983: &#x27;scuba diver&#x27;,</span><br><span class="line">  984: &#x27;rapeseed&#x27;,</span><br><span class="line">  985: &#x27;daisy&#x27;,</span><br><span class="line">  986: &#x27;yellow lady\&#x27;s slipper, yellow lady-slipper, Cypripedium calceolus, &#x27; +</span><br><span class="line">      &#x27;Cypripedium parviflorum&#x27;,</span><br><span class="line">  987: &#x27;corn&#x27;,</span><br><span class="line">  988: &#x27;acorn&#x27;,</span><br><span class="line">  989: &#x27;hip, rose hip, rosehip&#x27;,</span><br><span class="line">  990: &#x27;buckeye, horse chestnut, conker&#x27;,</span><br><span class="line">  991: &#x27;coral fungus&#x27;,</span><br><span class="line">  992: &#x27;agaric&#x27;,</span><br><span class="line">  993: &#x27;gyromitra&#x27;,</span><br><span class="line">  994: &#x27;stinkhorn, carrion fungus&#x27;,</span><br><span class="line">  995: &#x27;earthstar&#x27;,</span><br><span class="line">  996: &#x27;hen-of-the-woods, hen of the woods, Polyporus frondosus, Grifola &#x27; +</span><br><span class="line">      &#x27;frondosa&#x27;,</span><br><span class="line">  997: &#x27;bolete&#x27;,</span><br><span class="line">  998: &#x27;ear, spike, capitulum&#x27;,</span><br><span class="line">  999: &#x27;toilet tissue, toilet paper, bathroom tissue&#x27;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>utils.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">export function file2img(f) &#123;</span><br><span class="line">    return new Promise(resolve =&gt; &#123;</span><br><span class="line">        const reader = new FileReader();</span><br><span class="line">        reader.readAsDataURL(f);</span><br><span class="line">        reader.onload = (e) =&gt; &#123;</span><br><span class="line">            const img = document.createElement(&#x27;img&#x27;);</span><br><span class="line">            img.src = e.target.result;</span><br><span class="line">            img.width = 224;</span><br><span class="line">            img.height = 224;</span><br><span class="line">            img.onload = () =&gt; resolve(img);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>script.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">import * as tf from &#x27;@tensorflow/tfjs&#x27;;</span><br><span class="line">import &#123; IMAGENET_CLASSES &#125; from &#x27;./imagenet_classes&#x27;;</span><br><span class="line">import &#123; file2img &#125; from &#x27;./utils&#x27;;</span><br><span class="line"></span><br><span class="line">const MOBILENET_MODEL_PATH = &#x27;http://127.0.0.1:8080/mobilenet/web_model/model.json&#x27;;</span><br><span class="line"></span><br><span class="line">window.onload = async () =&gt; &#123;</span><br><span class="line">    const model = await tf.loadLayersModel(MOBILENET_MODEL_PATH);</span><br><span class="line">    window.predict = async (file) =&gt; &#123;</span><br><span class="line">        const img = await file2img(file);</span><br><span class="line">        document.body.appendChild(img);</span><br><span class="line">        const pred = tf.tidy(() =&gt; &#123;</span><br><span class="line">            const input = tf.browser.fromPixels(img)</span><br><span class="line">                .toFloat()</span><br><span class="line">                .sub(255 / 2)</span><br><span class="line">                .div(255 / 2)</span><br><span class="line">                .reshape([1, 224, 224, 3]);</span><br><span class="line">            return model.predict(input);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        const index = pred.argMax(1).dataSync()[0];</span><br><span class="line">        setTimeout(() =&gt; &#123;</span><br><span class="line">            alert(`预测结果：$&#123;IMAGENET_CLASSES[index]&#125;`);</span><br><span class="line">        &#125;, 0);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>index.html</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;input type=&quot;file&quot; onchange=&quot;predict(this.files[0])&quot;&gt;</span><br></pre></td></tr></table></figure>



      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/05/09/tfjs-study2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="wangzhiwei">
      <meta itemprop="description" content="javascript nodejs web developer...">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WBlog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/05/09/tfjs-study2/" class="post-title-link" itemprop="url">tfjs-study2</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-05-09 20:03:12" itemprop="dateCreated datePublished" datetime="2025-05-09T20:03:12+08:00">2025-05-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-05-10 09:37:59" itemprop="dateModified" datetime="2025-05-10T09:37:59+08:00">2025-05-10</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="手写数字识别-使用卷积神经网络"><a href="#手写数字识别-使用卷积神经网络" class="headerlink" title="手写数字识别 - 使用卷积神经网络"></a>手写数字识别 - 使用卷积神经网络</h2><p><img src="/../images/tfjs/45.png"></p>
<p><img src="/../images/tfjs/46.png"></p>
<p><img src="/../images/tfjs/47.png"></p>
<p><img src="/../images/tfjs/48.png"></p>
<p><img src="/../images/tfjs/49.png"></p>
<p><img src="/../images/tfjs/50.png"></p>
<p><img src="/../images/tfjs/51.png"></p>
<p><img src="/../images/tfjs/52.png"></p>
<p>为什么要用卷积神经网络？</p>
<p>图片数据量大，运算量大， 200 * 200 * 3 &#x3D; 120，000</p>
<p>卷积神经网络模拟人类视觉处理流程，高效提取特征</p>
<p>卷积神经网络的层</p>
<h2 id="卷积层：提取特征"><a href="#卷积层：提取特征" class="headerlink" title="卷积层：提取特征"></a>卷积层：提取特征</h2><p>跟着 image kernels （卷积核） 了解卷积运算</p>
<p><a target="_blank" rel="noopener" href="https://setosa.io/ev/image-kernels/">https://setosa.io/ev/image-kernels/</a></p>
<p><img src="/../images/tfjs/53.png"></p>
<p><img src="/../images/tfjs/54.png"></p>
<p>使用多个卷积核（filter&#x2F; kernel）对图像进行卷积操作</p>
<p><a target="_blank" rel="noopener" href="https://cs231n.github.io/convolutional-networks/">https://cs231n.github.io/convolutional-networks/</a></p>
<p><img src="/../images/tfjs/55.png"></p>
<p>卷积层有权重需要需要训练，卷积核就是权重</p>
<h2 id="池化层：用于提取最强的特征，扩大感受野，减少计算量，没有权重需要训练"><a href="#池化层：用于提取最强的特征，扩大感受野，减少计算量，没有权重需要训练" class="headerlink" title="池化层：用于提取最强的特征，扩大感受野，减少计算量，没有权重需要训练"></a>池化层：用于提取最强的特征，扩大感受野，减少计算量，没有权重需要训练</h2><p><img src="/../images/tfjs/56.png"></p>
<h2 id="全连接层：-作为输出层，作为分类器，有权重需要训练"><a href="#全连接层：-作为输出层，作为分类器，有权重需要训练" class="headerlink" title="全连接层： 作为输出层，作为分类器，有权重需要训练"></a>全连接层： 作为输出层，作为分类器，有权重需要训练</h2><p>relu : 从 0 和 x  中选择最大的，小于0 的部分变成 0，大于0 的部分不变</p>
<p><img src="/../images/tfjs/57.png"></p>
<p>http-server -p 8080 –cors</p>
<p><img src="/../images/tfjs/58.png"></p>
<p><img src="/../images/tfjs/59.png"></p>
<p>data.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * @license</span><br><span class="line"> * Copyright 2018 Google LLC. All Rights Reserved.</span><br><span class="line"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span><br><span class="line"> * you may not use this file except in compliance with the License.</span><br><span class="line"> * You may obtain a copy of the License at</span><br><span class="line"> *</span><br><span class="line"> * http://www.apache.org/licenses/LICENSE-2.0</span><br><span class="line"> *</span><br><span class="line"> * Unless required by applicable law or agreed to in writing, software</span><br><span class="line"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span><br><span class="line"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span><br><span class="line"> * See the License for the specific language governing permissions and</span><br><span class="line"> * limitations under the License.</span><br><span class="line"> * =============================================================================</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">import * as tf from &#x27;@tensorflow/tfjs&#x27;;</span><br><span class="line"></span><br><span class="line">const IMAGE_SIZE = 784;</span><br><span class="line">const NUM_CLASSES = 10;</span><br><span class="line">const NUM_DATASET_ELEMENTS = 65000;</span><br><span class="line"></span><br><span class="line">const TRAIN_TEST_RATIO = 5 / 6;</span><br><span class="line"></span><br><span class="line">const NUM_TRAIN_ELEMENTS = Math.floor(TRAIN_TEST_RATIO * NUM_DATASET_ELEMENTS);</span><br><span class="line">const NUM_TEST_ELEMENTS = NUM_DATASET_ELEMENTS - NUM_TRAIN_ELEMENTS;</span><br><span class="line"></span><br><span class="line">const MNIST_IMAGES_SPRITE_PATH =</span><br><span class="line">    &#x27;http://127.0.0.1:8080/mnist/mnist_images.png&#x27;;</span><br><span class="line">const MNIST_LABELS_PATH =</span><br><span class="line">    &#x27;http://127.0.0.1:8080/mnist/mnist_labels_uint8&#x27;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * A class that fetches the sprited MNIST dataset and returns shuffled batches.</span><br><span class="line"> *</span><br><span class="line"> * NOTE: This will get much easier. For now, we do data fetching and</span><br><span class="line"> * manipulation manually.</span><br><span class="line"> */</span><br><span class="line">export class MnistData &#123;</span><br><span class="line">  constructor() &#123;</span><br><span class="line">    this.shuffledTrainIndex = 0;</span><br><span class="line">    this.shuffledTestIndex = 0;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  async load() &#123;</span><br><span class="line">    // Make a request for the MNIST sprited image.</span><br><span class="line">    const img = new Image();</span><br><span class="line">    const canvas = document.createElement(&#x27;canvas&#x27;);</span><br><span class="line">    const ctx = canvas.getContext(&#x27;2d&#x27;);</span><br><span class="line">    const imgRequest = new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">      img.crossOrigin = &#x27;&#x27;;</span><br><span class="line">      img.onload = () =&gt; &#123;</span><br><span class="line">        img.width = img.naturalWidth;</span><br><span class="line">        img.height = img.naturalHeight;</span><br><span class="line"></span><br><span class="line">        const datasetBytesBuffer =</span><br><span class="line">            new ArrayBuffer(NUM_DATASET_ELEMENTS * IMAGE_SIZE * 4);</span><br><span class="line"></span><br><span class="line">        const chunkSize = 5000;</span><br><span class="line">        canvas.width = img.width;</span><br><span class="line">        canvas.height = chunkSize;</span><br><span class="line"></span><br><span class="line">        for (let i = 0; i &lt; NUM_DATASET_ELEMENTS / chunkSize; i++) &#123;</span><br><span class="line">          const datasetBytesView = new Float32Array(</span><br><span class="line">              datasetBytesBuffer, i * IMAGE_SIZE * chunkSize * 4,</span><br><span class="line">              IMAGE_SIZE * chunkSize);</span><br><span class="line">          ctx.drawImage(</span><br><span class="line">              img, 0, i * chunkSize, img.width, chunkSize, 0, 0, img.width,</span><br><span class="line">              chunkSize);</span><br><span class="line"></span><br><span class="line">          const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);</span><br><span class="line"></span><br><span class="line">          for (let j = 0; j &lt; imageData.data.length / 4; j++) &#123;</span><br><span class="line">            // All channels hold an equal value since the image is grayscale, so</span><br><span class="line">            // just read the red channel.</span><br><span class="line">            datasetBytesView[j] = imageData.data[j * 4] / 255;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        this.datasetImages = new Float32Array(datasetBytesBuffer);</span><br><span class="line"></span><br><span class="line">        resolve();</span><br><span class="line">      &#125;;</span><br><span class="line">      img.src = MNIST_IMAGES_SPRITE_PATH;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    const labelsRequest = fetch(MNIST_LABELS_PATH);</span><br><span class="line">    const [imgResponse, labelsResponse] =</span><br><span class="line">        await Promise.all([imgRequest, labelsRequest]);</span><br><span class="line"></span><br><span class="line">    this.datasetLabels = new Uint8Array(await labelsResponse.arrayBuffer());</span><br><span class="line"></span><br><span class="line">    // Create shuffled indices into the train/test set for when we select a</span><br><span class="line">    // random dataset element for training / validation.</span><br><span class="line">    this.trainIndices = tf.util.createShuffledIndices(NUM_TRAIN_ELEMENTS);</span><br><span class="line">    this.testIndices = tf.util.createShuffledIndices(NUM_TEST_ELEMENTS);</span><br><span class="line"></span><br><span class="line">    // Slice the the images and labels into train and test sets.</span><br><span class="line">    this.trainImages =</span><br><span class="line">        this.datasetImages.slice(0, IMAGE_SIZE * NUM_TRAIN_ELEMENTS);</span><br><span class="line">    this.testImages = this.datasetImages.slice(IMAGE_SIZE * NUM_TRAIN_ELEMENTS);</span><br><span class="line">    this.trainLabels =</span><br><span class="line">        this.datasetLabels.slice(0, NUM_CLASSES * NUM_TRAIN_ELEMENTS);</span><br><span class="line">    this.testLabels =</span><br><span class="line">        this.datasetLabels.slice(NUM_CLASSES * NUM_TRAIN_ELEMENTS);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  nextTrainBatch(batchSize) &#123;</span><br><span class="line">    return this.nextBatch(</span><br><span class="line">        batchSize, [this.trainImages, this.trainLabels], () =&gt; &#123;</span><br><span class="line">          this.shuffledTrainIndex =</span><br><span class="line">              (this.shuffledTrainIndex + 1) % this.trainIndices.length;</span><br><span class="line">          return this.trainIndices[this.shuffledTrainIndex];</span><br><span class="line">        &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  nextTestBatch(batchSize) &#123;</span><br><span class="line">    return this.nextBatch(batchSize, [this.testImages, this.testLabels], () =&gt; &#123;</span><br><span class="line">      this.shuffledTestIndex =</span><br><span class="line">          (this.shuffledTestIndex + 1) % this.testIndices.length;</span><br><span class="line">      return this.testIndices[this.shuffledTestIndex];</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  nextBatch(batchSize, data, index) &#123;</span><br><span class="line">    const batchImagesArray = new Float32Array(batchSize * IMAGE_SIZE);</span><br><span class="line">    const batchLabelsArray = new Uint8Array(batchSize * NUM_CLASSES);</span><br><span class="line"></span><br><span class="line">    for (let i = 0; i &lt; batchSize; i++) &#123;</span><br><span class="line">      const idx = index();</span><br><span class="line"></span><br><span class="line">      const image =</span><br><span class="line">          data[0].slice(idx * IMAGE_SIZE, idx * IMAGE_SIZE + IMAGE_SIZE);</span><br><span class="line">      batchImagesArray.set(image, i * IMAGE_SIZE);</span><br><span class="line"></span><br><span class="line">      const label =</span><br><span class="line">          data[1].slice(idx * NUM_CLASSES, idx * NUM_CLASSES + NUM_CLASSES);</span><br><span class="line">      batchLabelsArray.set(label, i * NUM_CLASSES);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    const xs = tf.tensor2d(batchImagesArray, [batchSize, IMAGE_SIZE]);</span><br><span class="line">    const labels = tf.tensor2d(batchLabelsArray, [batchSize, NUM_CLASSES]);</span><br><span class="line"></span><br><span class="line">    return &#123;xs, labels&#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>script.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><span class="line">import * as tf from &#x27;@tensorflow/tfjs&#x27;;</span><br><span class="line">import * as tfvis from &#x27;@tensorflow/tfjs-vis&#x27;;</span><br><span class="line">import &#123; MnistData &#125; from &#x27;./data&#x27;;</span><br><span class="line"></span><br><span class="line">window.onload = async () =&gt; &#123;</span><br><span class="line">    const data = new MnistData();</span><br><span class="line">    await data.load();</span><br><span class="line">    const examples = data.nextTestBatch(20);</span><br><span class="line"></span><br><span class="line">    console.log(examples)</span><br><span class="line"></span><br><span class="line">    const surface = tfvis.visor().surface(&#123; name: &#x27;输入示例&#x27; &#125;);</span><br><span class="line">    for (let i = 0; i &lt; 20; i += 1) &#123;</span><br><span class="line">        //tf.tidy 创建一个临时的tensor，当tensor被使用完之后，tf.tidy会自动销毁tensor</span><br><span class="line">        const imageTensor = tf.tidy(() =&gt; &#123;</span><br><span class="line">            return examples.xs</span><br><span class="line">                .slice([i, 0], [1, 784]) // / 获取第i个数据</span><br><span class="line">                .reshape([28, 28, 1]);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        const canvas = document.createElement(&#x27;canvas&#x27;);</span><br><span class="line">        canvas.width = 28;</span><br><span class="line">        canvas.height = 28;</span><br><span class="line">        canvas.style = &#x27;margin: 4px&#x27;;</span><br><span class="line">        await tf.browser.toPixels(imageTensor, canvas); // 将tensor转为canvas</span><br><span class="line">        surface.drawArea.appendChild(canvas); // 添加canvas到surface</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    const model = tf.sequential();</span><br><span class="line">    model.add(tf.layers.conv2d(&#123;</span><br><span class="line">        inputShape: [28, 28, 1],</span><br><span class="line">        kernelSize: 5, // 卷积核大小，奇数有中心点</span><br><span class="line">        filters: 8, // 卷积核数量，即输出通道数量</span><br><span class="line">        strides: 1, // 步长，即卷积核滑动的步长</span><br><span class="line">        activation: &#x27;relu&#x27;,</span><br><span class="line">        kernelInitializer: &#x27;varianceScaling&#x27; // 初始化权重的函数，这里使用varianceScaling，即权重初始化为0，方差为1</span><br><span class="line">    &#125;));</span><br><span class="line"></span><br><span class="line">    //  池化层，将输入的图片缩小，即缩小图片的分辨率，但图片内容不变</span><br><span class="line">    model.add(tf.layers.maxPool2d(&#123;</span><br><span class="line">        poolSize: [2, 2], // 池化核大小</span><br><span class="line">        strides: [2, 2] // 滑动步长</span><br><span class="line">    &#125;));</span><br><span class="line">    model.add(tf.layers.conv2d(&#123;</span><br><span class="line">        kernelSize: 5,</span><br><span class="line">        filters: 16,</span><br><span class="line">        strides: 1,</span><br><span class="line">        activation: &#x27;relu&#x27;,</span><br><span class="line">        kernelInitializer: &#x27;varianceScaling&#x27;</span><br><span class="line">    &#125;));</span><br><span class="line">    model.add(tf.layers.maxPool2d(&#123;</span><br><span class="line">        poolSize: [2, 2],</span><br><span class="line">        strides: [2, 2]</span><br><span class="line">    &#125;));</span><br><span class="line">    model.add(tf.layers.flatten()); // 展平，将二维数组变为一维数组</span><br><span class="line"></span><br><span class="line">    model.add(tf.layers.dropout(&#123; rate: 0.9 &#125;)); // 防止过拟合，随机丢弃一些神经元</span><br><span class="line"></span><br><span class="line">    model.add(tf.layers.dense(&#123;</span><br><span class="line">        units: 10, // 0-9 10个分类</span><br><span class="line">        activation: &#x27;softmax&#x27;, // 输出为0-9的概率</span><br><span class="line">        kernelInitializer: &#x27;varianceScaling&#x27; // 权重初始化为0，方差为1</span><br><span class="line">    &#125;));</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    model.compile(&#123;</span><br><span class="line">        loss: &#x27;categoricalCrossentropy&#x27;, // 交叉熵损失函数，用于多分类</span><br><span class="line">        optimizer: tf.train.adam(), // Adam优化器，用于训练</span><br><span class="line">        metrics: [&#x27;accuracy&#x27;] // 准确率</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    const [trainXs, trainYs] = tf.tidy(() =&gt; &#123;</span><br><span class="line">        const d = data.nextTrainBatch(1000); //  获取训练数据 1000个训练数据</span><br><span class="line"></span><br><span class="line">        console.log(d)</span><br><span class="line"></span><br><span class="line">        return [</span><br><span class="line">            d.xs.reshape([1000, 28, 28, 1]),</span><br><span class="line">            d.labels</span><br><span class="line">        ];</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    const [testXs, testYs] = tf.tidy(() =&gt; &#123;</span><br><span class="line">        const d = data.nextTestBatch(200); // 获取测试数据</span><br><span class="line">        return [</span><br><span class="line">            d.xs.reshape([200, 28, 28, 1]),</span><br><span class="line">            d.labels</span><br><span class="line">        ];</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    await model.fit(trainXs, trainYs, &#123;</span><br><span class="line">        validationData: [testXs, testYs],</span><br><span class="line">        batchSize: 50,</span><br><span class="line">        epochs: 100,</span><br><span class="line">        callbacks: tfvis.show.fitCallbacks(</span><br><span class="line">            &#123; name: &#x27;训练效果&#x27; &#125;,</span><br><span class="line">            [&#x27;loss&#x27;, &#x27;val_loss&#x27;, &#x27;acc&#x27;, &#x27;val_acc&#x27;],</span><br><span class="line">            &#123; callbacks: [&#x27;onEpochEnd&#x27;] &#125;</span><br><span class="line">        )</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    const canvas = document.querySelector(&#x27;canvas&#x27;);</span><br><span class="line"></span><br><span class="line">    canvas.addEventListener(&#x27;mousemove&#x27;, (e) =&gt; &#123;</span><br><span class="line">        if (e.buttons === 1) &#123; // 左键按下</span><br><span class="line">            const ctx = canvas.getContext(&#x27;2d&#x27;);</span><br><span class="line">            ctx.fillStyle = &#x27;rgb(255,255,255)&#x27;; // 白色</span><br><span class="line">            ctx.fillRect(e.offsetX, e.offsetY, 25, 25); // 画一个25*25的矩形</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    window.clear = () =&gt; &#123;</span><br><span class="line">        const ctx = canvas.getContext(&#x27;2d&#x27;);</span><br><span class="line">        ctx.fillStyle = &#x27;rgb(0,0,0)&#x27;; // 黑色</span><br><span class="line">        ctx.fillRect(0, 0, 300, 300); // 填充一个黑色</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    clear();</span><br><span class="line"></span><br><span class="line">    window.predict = () =&gt; &#123;</span><br><span class="line">        const input = tf.tidy(() =&gt; &#123;</span><br><span class="line">            return tf.image.resizeBilinear( // 缩放图片</span><br><span class="line">                tf.browser.fromPixels(canvas), // 缩放图片</span><br><span class="line">                [28, 28], // 缩放后的大小</span><br><span class="line">                true // 是否保持图片的宽高比</span><br><span class="line">            ).slice([0, 0, 0], [28, 28, 1]) // 将彩色图片转换为黑白图片 获取图片的像素</span><br><span class="line">            .toFloat() // 转换为浮点数</span><br><span class="line">            .div(255) // 转换为0-1</span><br><span class="line">            .reshape([1, 28, 28, 1]); // 转换为张量</span><br><span class="line">        &#125;);</span><br><span class="line">        const pred = model.predict(input).argMax(1);</span><br><span class="line">        alert(`预测结果为 $&#123;pred.dataSync()[0]&#125;`);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>index.html</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;canvas width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 2px solid #666;&quot;&gt;&lt;/canvas&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;button onclick=&quot;window.clear();&quot; style=&quot;margin: 4px;&quot;&gt;清除&lt;/button&gt;</span><br><span class="line">&lt;button onclick=&quot;window.predict();&quot; style=&quot;margin: 4px;&quot;&gt;预测&lt;/button&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">wangzhiwei</p>
  <div class="site-description" itemprop="description">javascript nodejs web developer...</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">90</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">57</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">62</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">wangzhiwei</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
