<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="javascript nodejs web developer...">
<meta property="og:type" content="website">
<meta property="og:title" content="WBlog">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="WBlog">
<meta property="og:description" content="javascript nodejs web developer...">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="wangzhiwei">
<meta property="article:tag" content="javascript nodejs web developer fe engineer">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>WBlog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">WBlog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">wangzhiwei blog</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/05/10/tfjs-study6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="wangzhiwei">
      <meta itemprop="description" content="javascript nodejs web developer...">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WBlog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/05/10/tfjs-study6/" class="post-title-link" itemprop="url">tfjs-study6</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-05-10 15:31:07 / 修改时间：16:48:31" itemprop="dateCreated datePublished" datetime="2025-05-10T15:31:07+08:00">2025-05-10</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="python-与-javascript-互转"><a href="#python-与-javascript-互转" class="headerlink" title="python 与 javascript 互转"></a>python 与 javascript 互转</h2><p>python 模型：<br>通过 python 版 TensorFlow&#x2F;Keras 生成模型</p>
<p>包括： TensorFlow SavedModel、Keras HDF5 模型 等</p>
<p>获取：开源网站下载&#x2F;算法同事提供</p>
<p>javascript 模型：</p>
<p>可以在 TensorFlowJS中运行的模型</p>
<p>包括： tfjs_layers_model.json、tfjs_graph_model.json、tfjs_weights.bin 等</p>
<p>获取：开源网站下载&#x2F;通过TFJS生成&#x2F;由python 模型转换而来</p>
<p>为何要进行互转?<br>Python to JavaScript:JavaScript模型可以在浏览器中运行</p>
<p>JavaScript to Python:少见,为了在更多平台运行</p>
<p>JavaScript to JavaScript:分片&#x2F;量化&#x2F;加速</p>
<p>如何进行互转?<br>安装Tensorflow.js Converter<br>在命令行指定输入输出的路径和模型格式即可</p>
<p>操作步骤<br>安装Tensorflow.js Converter<br>Python与JavaScript模型互转<br>JavaScript模型的互转:分片、量化、加速</p>
<p>安装Tensorflow.js Converter</p>
<p>操作步骤<br>安装Conda<br>使用Conda安装Python虚拟环境<br>使用Python虚拟环境安装Tensorflow.jsConverter</p>
<p><img src="/../images/tfjs/69.png"></p>
<p><img src="/../images/tfjs/70.png"></p>
<p><img src="/../images/tfjs/71.png"></p>
<p><img src="/../images/tfjs/72.png"></p>
<p><img src="/../images/tfjs/73.png"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/05/10/tfjs-study5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="wangzhiwei">
      <meta itemprop="description" content="javascript nodejs web developer...">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WBlog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/05/10/tfjs-study5/" class="post-title-link" itemprop="url">tfjs-study5</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-05-10 14:23:22 / 修改时间：16:25:42" itemprop="dateCreated datePublished" datetime="2025-05-10T14:23:22+08:00">2025-05-10</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="使用预训练模型进行语音识别"><a href="#使用预训练模型进行语音识别" class="headerlink" title="使用预训练模型进行语音识别"></a>使用预训练模型进行语音识别</h2><p>模型接受声音信息，输出分类信息<br>声音在计算机里是声谱图，因此也可以使用卷积神经网络进行识别</p>
<p><img src="/../images/tfjs/65.png"></p>
<p><img src="/../images/tfjs/66.png"></p>
<p><img src="/../images/tfjs/67.png"></p>
<p><img src="/../images/tfjs/68.png"></p>
<p>script.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">import * as speechCommands from &#x27;@tensorflow-models/speech-commands&#x27;;</span><br><span class="line"></span><br><span class="line">const MODEL_PATH = &#x27;http://127.0.0.1:8080/speech&#x27;;</span><br><span class="line"></span><br><span class="line">window.onload = async () =&gt; &#123;</span><br><span class="line">    const recognizer = speechCommands.create(</span><br><span class="line">        &#x27;BROWSER_FFT&#x27;,</span><br><span class="line">        null,</span><br><span class="line">        MODEL_PATH + &#x27;/model.json&#x27;,</span><br><span class="line">        MODEL_PATH + &#x27;/metadata.json&#x27;</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    await recognizer.ensureModelLoaded();</span><br><span class="line"></span><br><span class="line">    const labels = recognizer.wordLabels().slice(2); //</span><br><span class="line">    const resultEl = document.querySelector(&#x27;#result&#x27;);</span><br><span class="line">    resultEl.innerHTML = labels.map(l =&gt; `</span><br><span class="line">        &lt;div&gt;$&#123;l&#125;&lt;/div&gt;</span><br><span class="line">    `).join(&#x27;&#x27;);</span><br><span class="line">    recognizer.listen(result =&gt; &#123; //会打开浏览器麦克风</span><br><span class="line">        const &#123; scores &#125; = result;</span><br><span class="line">        const maxValue = Math.max(...scores);</span><br><span class="line">        const index = scores.indexOf(maxValue) - 2;</span><br><span class="line">        resultEl.innerHTML = labels.map((l, i) =&gt; `</span><br><span class="line">        &lt;div style=&quot;background: $&#123;i === index &amp;&amp; &#x27;green&#x27;&#125;&quot;&gt;$&#123;l&#125;&lt;/div&gt;</span><br><span class="line">        `).join(&#x27;&#x27;);</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        overlapFactor: 0.3, //重叠</span><br><span class="line">        probabilityThreshold: 0.9 // 置信度</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>




<p>index.html</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">    #result&gt;div &#123;</span><br><span class="line">        float: left;</span><br><span class="line">        padding: 20px;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;div id=&quot;result&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="基于迁移学习的语音识别器：声控轮播图"><a href="#基于迁移学习的语音识别器：声控轮播图" class="headerlink" title="基于迁移学习的语音识别器：声控轮播图"></a>基于迁移学习的语音识别器：声控轮播图</h2><p>在浏览器中收集中文语音训练数据</p>
<p>使用 speech commands （英文语音识别） 包进行迁移学习并预测 中文语音</p>
<p>语音训练数据的保存和加载</p>
<p>操作步骤</p>
<p>使用 speech commands 包创建迁移学习器<br>编写前端界面准备收集语音数据<br>调用collectExample函数收集语音数据</p>
<p><img src="/../images/tfjs/68.png"></p>
<p>index.html</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;button onclick=&quot;collect(this)&quot;&gt;上一张&lt;/button&gt;</span><br><span class="line">&lt;button onclick=&quot;collect(this)&quot;&gt;下一张&lt;/button&gt;</span><br><span class="line">&lt;button onclick=&quot;collect(this)&quot;&gt;背景噪音&lt;/button&gt;</span><br><span class="line">&lt;button onclick=&quot;save()&quot;&gt;保存&lt;/button&gt;</span><br><span class="line">&lt;pre id=&quot;count&quot;&gt;&lt;/pre&gt;</span><br><span class="line">&lt;button onclick=&quot;train()&quot;&gt;训练&lt;/button&gt;</span><br><span class="line">&lt;br&gt;&lt;br&gt;</span><br><span class="line">监听开关：&lt;input type=&quot;checkbox&quot; onchange=&quot;toggle(this.checked)&quot;&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>script.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">import * as speechCommands from &#x27;@tensorflow-models/speech-commands&#x27;;</span><br><span class="line">import * as tfvis from &#x27;@tensorflow/tfjs-vis&#x27;;</span><br><span class="line"></span><br><span class="line">const MODEL_PATH = &#x27;http://127.0.0.1:8080&#x27;;</span><br><span class="line">let transferRecognizer;</span><br><span class="line"></span><br><span class="line">window.onload = async () =&gt; &#123;</span><br><span class="line">    const recognizer = speechCommands.create(</span><br><span class="line">        &#x27;BROWSER_FFT&#x27;,</span><br><span class="line">        null,</span><br><span class="line">        MODEL_PATH + &#x27;/speech/model.json&#x27;,</span><br><span class="line">        MODEL_PATH + &#x27;/speech/metadata.json&#x27;</span><br><span class="line">    );</span><br><span class="line">    await recognizer.ensureModelLoaded(); // 加载模型</span><br><span class="line">    transferRecognizer = recognizer.createTransfer(&#x27;轮播图&#x27;); // 创建一个训练器</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">window.collect = async (btn) =&gt; &#123;</span><br><span class="line">    btn.disabled = true;</span><br><span class="line">    const label = btn.innerText;</span><br><span class="line">    await transferRecognizer.collectExample( //  收集样本</span><br><span class="line">        label === &#x27;背景噪音&#x27; ? &#x27;_background_noise_&#x27; : label</span><br><span class="line">    );</span><br><span class="line">    btn.disabled = false;</span><br><span class="line">    document.querySelector(&#x27;#count&#x27;).innerHTML = JSON.stringify(transferRecognizer.countExamples(), null, 2);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">window.train = async () =&gt; &#123;</span><br><span class="line">    await transferRecognizer.train(&#123;</span><br><span class="line">        epochs: 30,</span><br><span class="line">        callback: tfvis.show.fitCallbacks(</span><br><span class="line">            &#123; name: &#x27;训练效果&#x27; &#125;,</span><br><span class="line">            [&#x27;loss&#x27;, &#x27;acc&#x27;],</span><br><span class="line">            &#123; callbacks: [&#x27;onEpochEnd&#x27;] &#125;</span><br><span class="line">        )</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">window.toggle = async (checked) =&gt; &#123;</span><br><span class="line">    if (checked) &#123;</span><br><span class="line">        await transferRecognizer.listen(result =&gt; &#123; // 监听</span><br><span class="line">            const &#123; scores &#125; = result;</span><br><span class="line">            const labels = transferRecognizer.wordLabels();</span><br><span class="line">            const index = scores.indexOf(Math.max(...scores));</span><br><span class="line">            console.log(labels[index]);</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            overlapFactor: 0,</span><br><span class="line">            probabilityThreshold: 0.75</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        transferRecognizer.stopListening();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">window.save = () =&gt; &#123;</span><br><span class="line">    const arrayBuffer = transferRecognizer.serializeExamples(); //把采集好的数据存下来</span><br><span class="line">    const blob = new Blob([arrayBuffer]);</span><br><span class="line">    const link = document.createElement(&#x27;a&#x27;);</span><br><span class="line">    link.href = window.URL.createObjectURL(blob);</span><br><span class="line">    link.download = &#x27;data.bin&#x27;;</span><br><span class="line">    link.click();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="轮播图"><a href="#轮播图" class="headerlink" title="轮播图"></a>轮播图</h2><p>index.html</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">监听开关：&lt;input type=&quot;checkbox&quot; onchange=&quot;toggle(this.checked)&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">    .slider &#123;</span><br><span class="line">        width: 600px;</span><br><span class="line">        overflow: hidden;</span><br><span class="line">        margin: 10px auto;</span><br><span class="line">    &#125;</span><br><span class="line">    .slider &gt; div&#123;</span><br><span class="line">        display: flex;</span><br><span class="line">        align-items: center;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;div class=&quot;slider&quot;&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;img src=&quot;https://cdn.pixabay.com/photo/2019/10/29/15/57/vancouver-4587302__480.jpg&quot; alt=&quot;&quot; width=&quot;600&quot;&gt;</span><br><span class="line">        &lt;img src=&quot;https://cdn.pixabay.com/photo/2019/10/31/07/14/coffee-4591159__480.jpg&quot; alt=&quot;&quot; width=&quot;600&quot;&gt;</span><br><span class="line">        &lt;img src=&quot;https://cdn.pixabay.com/photo/2019/11/01/11/08/landscape-4593909__480.jpg&quot; alt=&quot;&quot; width=&quot;600&quot;&gt;</span><br><span class="line">        &lt;img src=&quot;https://cdn.pixabay.com/photo/2019/11/02/21/45/maple-leaf-4597501__480.jpg&quot; alt=&quot;&quot; width=&quot;600&quot;&gt;</span><br><span class="line">        &lt;img src=&quot;https://cdn.pixabay.com/photo/2019/11/02/03/13/in-xinjiang-4595560__480.jpg&quot; alt=&quot;&quot; width=&quot;600&quot;&gt;</span><br><span class="line">        &lt;img src=&quot;https://cdn.pixabay.com/photo/2019/11/01/22/45/reschensee-4595385__480.jpg&quot; alt=&quot;&quot; width=&quot;600&quot;&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>script.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">import * as speechCommands from &#x27;@tensorflow-models/speech-commands&#x27;;</span><br><span class="line"></span><br><span class="line">const MODEL_PATH = &#x27;http://127.0.0.1:8080&#x27;;</span><br><span class="line">let transferRecognizer;</span><br><span class="line">let curIndex = 0;</span><br><span class="line"></span><br><span class="line">window.onload = async () =&gt; &#123;</span><br><span class="line">    const recognizer = speechCommands.create(</span><br><span class="line">        &#x27;BROWSER_FFT&#x27;,</span><br><span class="line">        null,</span><br><span class="line">        MODEL_PATH + &#x27;/speech/model.json&#x27;,</span><br><span class="line">        MODEL_PATH + &#x27;/speech/metadata.json&#x27;,</span><br><span class="line">    );</span><br><span class="line">    await recognizer.ensureModelLoaded();</span><br><span class="line">    transferRecognizer = recognizer.createTransfer(&#x27;轮播图&#x27;);</span><br><span class="line">    const res = await fetch(MODEL_PATH + &#x27;/slider/data.bin&#x27;);</span><br><span class="line">    const arrayBuffer = await res.arrayBuffer();</span><br><span class="line">    transferRecognizer.loadExamples(arrayBuffer);</span><br><span class="line">    await transferRecognizer.train(&#123; epochs: 30 &#125;);</span><br><span class="line">    console.log(&#x27;done&#x27;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">window.toggle = async (checked) =&gt; &#123;</span><br><span class="line">    if (checked) &#123;</span><br><span class="line">        await transferRecognizer.listen(result =&gt; &#123;</span><br><span class="line">            const &#123; scores &#125; = result;</span><br><span class="line">            const labels = transferRecognizer.wordLabels();</span><br><span class="line">            const index = scores.indexOf(Math.max(...scores));</span><br><span class="line">            window.play(labels[index]);</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            overlapFactor: 0,</span><br><span class="line">            probabilityThreshold: 0.5</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        transferRecognizer.stopListening();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">window.play = (label) =&gt; &#123;</span><br><span class="line">    const div = document.querySelector(&#x27;.slider&gt;div&#x27;);</span><br><span class="line">    if (label === &#x27;上一张&#x27;) &#123;</span><br><span class="line">        if (curIndex === 0) &#123; return; &#125;</span><br><span class="line">        curIndex -= 1;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        if (curIndex === document.querySelectorAll(&#x27;img&#x27;).length - 1) &#123; return; &#125;</span><br><span class="line">        curIndex += 1;</span><br><span class="line">    &#125;</span><br><span class="line">    div.style.transition = &quot;transform 1s&quot;</span><br><span class="line">    div.style.transform = `translateX(-$&#123;100 * curIndex&#125;%)`;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/05/10/tfjs-study4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="wangzhiwei">
      <meta itemprop="description" content="javascript nodejs web developer...">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WBlog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/05/10/tfjs-study4/" class="post-title-link" itemprop="url">tfjs-study4</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-05-10 10:27:08 / 修改时间：12:05:40" itemprop="dateCreated datePublished" datetime="2025-05-10T10:27:08+08:00">2025-05-10</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="基于迁移学习的图像分类器-–商标识别任务"><a href="#基于迁移学习的图像分类器-–商标识别任务" class="headerlink" title="基于迁移学习的图像分类器 –商标识别任务"></a>基于迁移学习的图像分类器 –商标识别任务</h2><p>把已训练好的模型参数迁移到新的模型来帮助新模型训练</p>
<p>深度学习模型参数多，从头训练陈本高</p>
<p>删除原始模型的最后一层，基于此截断模型的输出训练一个新的（通常相当浅的）模型</p>
<p>加载商标训练数据并可视化<br>定义模型结构：截断模型 + 双层神经网络<br>训练模型并预测</p>
<p><img src="/../images/tfjs/61.png"></p>
<p><img src="/../images/tfjs/62.png"></p>
<p><img src="/../images/tfjs/63.png"></p>
<p><img src="/../images/tfjs/64.png"></p>
<p>data.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">const IMAGE_SIZE = 224;</span><br><span class="line"></span><br><span class="line">const loadImg = (src) =&gt; &#123;</span><br><span class="line">    return new Promise(resolve =&gt; &#123;</span><br><span class="line">        const img = new Image();</span><br><span class="line">        img.crossOrigin = &quot;anonymous&quot;;</span><br><span class="line">        img.src = src;</span><br><span class="line">        img.width = IMAGE_SIZE;</span><br><span class="line">        img.height = IMAGE_SIZE;</span><br><span class="line">        img.onload = () =&gt; resolve(img);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">export const getInputs = async () =&gt; &#123;</span><br><span class="line">    const loadImgs = [];</span><br><span class="line">    const labels = [];</span><br><span class="line">    for (let i = 0; i &lt; 30; i += 1) &#123;</span><br><span class="line">        [&#x27;android&#x27;, &#x27;apple&#x27;, &#x27;windows&#x27;].forEach(label =&gt; &#123;</span><br><span class="line">            const src = `http://127.0.0.1:8080/brand/train/$&#123;label&#125;-$&#123;i&#125;.jpg`;</span><br><span class="line">            const img = loadImg(src);</span><br><span class="line">            loadImgs.push(img);</span><br><span class="line">            labels.push([</span><br><span class="line">                label === &#x27;android&#x27; ? 1 : 0,</span><br><span class="line">                label === &#x27;apple&#x27; ? 1 : 0,</span><br><span class="line">                label === &#x27;windows&#x27; ? 1 : 0,</span><br><span class="line">            ]);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    const inputs = await Promise.all(loadImgs);</span><br><span class="line">    return &#123;</span><br><span class="line">        inputs,</span><br><span class="line">        labels,</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>script.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">import * as tf from &#x27;@tensorflow/tfjs&#x27;;</span><br><span class="line">import * as tfvis from &#x27;@tensorflow/tfjs-vis&#x27;;</span><br><span class="line">import &#123; getInputs &#125; from &#x27;./data&#x27;;</span><br><span class="line">import &#123; img2x, file2img &#125; from &#x27;./utils&#x27;;</span><br><span class="line"></span><br><span class="line">const MOBILENET_MODEL_PATH = &#x27;http://127.0.0.1:8080/mobilenet/web_model/model.json&#x27;;</span><br><span class="line">const NUM_CLASSES = 3;</span><br><span class="line">const BRAND_CLASSES = [&#x27;android&#x27;, &#x27;apple&#x27;, &#x27;windows&#x27;];</span><br><span class="line"></span><br><span class="line">window.onload = async () =&gt; &#123;</span><br><span class="line">    const &#123; inputs, labels &#125; = await getInputs();</span><br><span class="line">    const surface = tfvis.visor().surface(&#123; name: &#x27;输入示例&#x27;, styles: &#123; height: 250 &#125; &#125;);</span><br><span class="line">    inputs.forEach(img =&gt; &#123;</span><br><span class="line">        surface.drawArea.appendChild(img);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    const mobilenet = await tf.loadLayersModel(MOBILENET_MODEL_PATH);</span><br><span class="line">    mobilenet.summary(); // 模型结构/*  */</span><br><span class="line">    const layer = mobilenet.getLayer(&#x27;conv_pw_13_relu&#x27;); //  获取模型中间层</span><br><span class="line">    const truncatedMobilenet = tf.model(&#123; //  截断模型</span><br><span class="line">        inputs: mobilenet.inputs, //  输入层</span><br><span class="line">        outputs: layer.output //  输出层 </span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    //  创建新模型</span><br><span class="line">    const model = tf.sequential();</span><br><span class="line"></span><br><span class="line">    console.log(layer.outputShape)</span><br><span class="line">    model.add(tf.layers.flatten(&#123; //  展平层， 一维的向量，无训练参数 </span><br><span class="line">        inputShape: layer.outputShape.slice(1) //  获取中间层输出的形状</span><br><span class="line">    &#125;));</span><br><span class="line">    model.add(tf.layers.dense(&#123; //  全连接层</span><br><span class="line">        units: 10,</span><br><span class="line">        activation: &#x27;relu&#x27;</span><br><span class="line">    &#125;));</span><br><span class="line">    model.add(tf.layers.dense(&#123; // 分类层 </span><br><span class="line">        units: NUM_CLASSES,</span><br><span class="line">        activation: &#x27;softmax&#x27;</span><br><span class="line">    &#125;));</span><br><span class="line"></span><br><span class="line">    // 定义损失函数和优化器</span><br><span class="line">    model.compile(&#123; loss: &#x27;categoricalCrossentropy&#x27;, optimizer: tf.train.adam() &#125;);</span><br><span class="line"></span><br><span class="line">    //训练数据经过截断模型，转为可以用于新模型训练的数据</span><br><span class="line">    const &#123; xs, ys &#125; = tf.tidy(() =&gt; &#123;</span><br><span class="line">        const xs = tf.concat(inputs.map(imgEl =&gt; truncatedMobilenet.predict(img2x(imgEl))));</span><br><span class="line">        const ys = tf.tensor(labels);</span><br><span class="line">        return &#123; xs, ys &#125;;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    await model.fit(xs, ys, &#123;</span><br><span class="line">        epochs: 20,</span><br><span class="line">        callbacks: tfvis.show.fitCallbacks(</span><br><span class="line">            &#123; name: &#x27;训练效果&#x27; &#125;,</span><br><span class="line">            [&#x27;loss&#x27;],</span><br><span class="line">            &#123; callbacks: [&#x27;onEpochEnd&#x27;] &#125;</span><br><span class="line">        )</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    window.predict = async (file) =&gt; &#123;</span><br><span class="line">        const img = await file2img(file);</span><br><span class="line">        document.body.appendChild(img);</span><br><span class="line">        const pred = tf.tidy(() =&gt; &#123;</span><br><span class="line">            const x = img2x(img);</span><br><span class="line">            const input = truncatedMobilenet.predict(x);</span><br><span class="line">            return model.predict(input);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        const index = pred.argMax(1).dataSync()[0];</span><br><span class="line">        setTimeout(() =&gt; &#123;</span><br><span class="line">            alert(`预测结果：$&#123;BRAND_CLASSES[index]&#125;`);</span><br><span class="line">        &#125;, 0);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    window.download = async () =&gt; &#123;</span><br><span class="line">        await model.save(&#x27;downloads://model&#x27;);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>utils.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">import * as tf from &#x27;@tensorflow/tfjs&#x27;;</span><br><span class="line"></span><br><span class="line">export function img2x(imgEl)&#123;</span><br><span class="line">    return tf.tidy(() =&gt; &#123;</span><br><span class="line">        const input = tf.browser.fromPixels(imgEl)</span><br><span class="line">            .toFloat()</span><br><span class="line">            .sub(255 / 2)</span><br><span class="line">            .div(255 / 2)</span><br><span class="line">            .reshape([1, 224, 224, 3]);</span><br><span class="line">        return input;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export function file2img(f) &#123;</span><br><span class="line">    return new Promise(resolve =&gt; &#123;</span><br><span class="line">        const reader = new FileReader();</span><br><span class="line">        reader.readAsDataURL(f);</span><br><span class="line">        reader.onload = (e) =&gt; &#123;</span><br><span class="line">            const img = document.createElement(&#x27;img&#x27;);</span><br><span class="line">            img.src = e.target.result;</span><br><span class="line">            img.width = 224;</span><br><span class="line">            img.height = 224;</span><br><span class="line">            img.onload = () =&gt; resolve(img);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/05/10/tfjs-study3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="wangzhiwei">
      <meta itemprop="description" content="javascript nodejs web developer...">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WBlog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/05/10/tfjs-study3/" class="post-title-link" itemprop="url">tfjs-study3</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-05-10 10:12:07 / 修改时间：10:27:16" itemprop="dateCreated datePublished" datetime="2025-05-10T10:12:07+08:00">2025-05-10</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="使用预训练模型进行图片分类"><a href="#使用预训练模型进行图片分类" class="headerlink" title="使用预训练模型进行图片分类"></a>使用预训练模型进行图片分类</h2><p>加载 MobileNet 模型</p>
<p>进行预测</p>
<p>下载 MobileNet 模型文件</p>
<p>在本地开启静态文件服务器</p>
<p>使用TensorFlow.js的loadLayersModel方法加载模型</p>
<p><img src="/../images/tfjs/60.png"></p>
<p>imagenet_classes.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @license</span><br><span class="line"> * Copyright 2017 Google LLC. All Rights Reserved.</span><br><span class="line"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span><br><span class="line"> * you may not use this file except in compliance with the License.</span><br><span class="line"> * You may obtain a copy of the License at</span><br><span class="line"> *</span><br><span class="line"> * http://www.apache.org/licenses/LICENSE-2.0</span><br><span class="line"> *</span><br><span class="line"> * Unless required by applicable law or agreed to in writing, software</span><br><span class="line"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span><br><span class="line"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span><br><span class="line"> * See the License for the specific language governing permissions and</span><br><span class="line"> * limitations under the License.</span><br><span class="line"> * =============================================================================</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">export const IMAGENET_CLASSES = &#123;</span><br><span class="line">  0: &#x27;tench, Tinca tinca&#x27;,</span><br><span class="line">  1: &#x27;goldfish, Carassius auratus&#x27;,</span><br><span class="line">  2: &#x27;great white shark, white shark, man-eater, man-eating shark, &#x27; +</span><br><span class="line">      &#x27;Carcharodon carcharias&#x27;,</span><br><span class="line">  3: &#x27;tiger shark, Galeocerdo cuvieri&#x27;,</span><br><span class="line">  4: &#x27;hammerhead, hammerhead shark&#x27;,</span><br><span class="line">  5: &#x27;electric ray, crampfish, numbfish, torpedo&#x27;,</span><br><span class="line">  6: &#x27;stingray&#x27;,</span><br><span class="line">  7: &#x27;cock&#x27;,</span><br><span class="line">  8: &#x27;hen&#x27;,</span><br><span class="line">  9: &#x27;ostrich, Struthio camelus&#x27;,</span><br><span class="line">  10: &#x27;brambling, Fringilla montifringilla&#x27;,</span><br><span class="line">  11: &#x27;goldfinch, Carduelis carduelis&#x27;,</span><br><span class="line">  12: &#x27;house finch, linnet, Carpodacus mexicanus&#x27;,</span><br><span class="line">  13: &#x27;junco, snowbird&#x27;,</span><br><span class="line">  14: &#x27;indigo bunting, indigo finch, indigo bird, Passerina cyanea&#x27;,</span><br><span class="line">  15: &#x27;robin, American robin, Turdus migratorius&#x27;,</span><br><span class="line">  16: &#x27;bulbul&#x27;,</span><br><span class="line">  17: &#x27;jay&#x27;,</span><br><span class="line">  18: &#x27;magpie&#x27;,</span><br><span class="line">  19: &#x27;chickadee&#x27;,</span><br><span class="line">  20: &#x27;water ouzel, dipper&#x27;,</span><br><span class="line">  21: &#x27;kite&#x27;,</span><br><span class="line">  22: &#x27;bald eagle, American eagle, Haliaeetus leucocephalus&#x27;,</span><br><span class="line">  23: &#x27;vulture&#x27;,</span><br><span class="line">  24: &#x27;great grey owl, great gray owl, Strix nebulosa&#x27;,</span><br><span class="line">  25: &#x27;European fire salamander, Salamandra salamandra&#x27;,</span><br><span class="line">  26: &#x27;common newt, Triturus vulgaris&#x27;,</span><br><span class="line">  27: &#x27;eft&#x27;,</span><br><span class="line">  28: &#x27;spotted salamander, Ambystoma maculatum&#x27;,</span><br><span class="line">  29: &#x27;axolotl, mud puppy, Ambystoma mexicanum&#x27;,</span><br><span class="line">  30: &#x27;bullfrog, Rana catesbeiana&#x27;,</span><br><span class="line">  31: &#x27;tree frog, tree-frog&#x27;,</span><br><span class="line">  32: &#x27;tailed frog, bell toad, ribbed toad, tailed toad, Ascaphus trui&#x27;,</span><br><span class="line">  33: &#x27;loggerhead, loggerhead turtle, Caretta caretta&#x27;,</span><br><span class="line">  34: &#x27;leatherback turtle, leatherback, leathery turtle, Dermochelys coriacea&#x27;,</span><br><span class="line">  35: &#x27;mud turtle&#x27;,</span><br><span class="line">  36: &#x27;terrapin&#x27;,</span><br><span class="line">  37: &#x27;box turtle, box tortoise&#x27;,</span><br><span class="line">  38: &#x27;banded gecko&#x27;,</span><br><span class="line">  39: &#x27;common iguana, iguana, Iguana iguana&#x27;,</span><br><span class="line">  40: &#x27;American chameleon, anole, Anolis carolinensis&#x27;,</span><br><span class="line">  41: &#x27;whiptail, whiptail lizard&#x27;,</span><br><span class="line">  42: &#x27;agama&#x27;,</span><br><span class="line">  43: &#x27;frilled lizard, Chlamydosaurus kingi&#x27;,</span><br><span class="line">  44: &#x27;alligator lizard&#x27;,</span><br><span class="line">  45: &#x27;Gila monster, Heloderma suspectum&#x27;,</span><br><span class="line">  46: &#x27;green lizard, Lacerta viridis&#x27;,</span><br><span class="line">  47: &#x27;African chameleon, Chamaeleo chamaeleon&#x27;,</span><br><span class="line">  48: &#x27;Komodo dragon, Komodo lizard, dragon lizard, giant lizard, &#x27; +</span><br><span class="line">      &#x27;Varanus komodoensis&#x27;,</span><br><span class="line">  49: &#x27;African crocodile, Nile crocodile, Crocodylus niloticus&#x27;,</span><br><span class="line">  50: &#x27;American alligator, Alligator mississipiensis&#x27;,</span><br><span class="line">  51: &#x27;triceratops&#x27;,</span><br><span class="line">  52: &#x27;thunder snake, worm snake, Carphophis amoenus&#x27;,</span><br><span class="line">  53: &#x27;ringneck snake, ring-necked snake, ring snake&#x27;,</span><br><span class="line">  54: &#x27;hognose snake, puff adder, sand viper&#x27;,</span><br><span class="line">  55: &#x27;green snake, grass snake&#x27;,</span><br><span class="line">  56: &#x27;king snake, kingsnake&#x27;,</span><br><span class="line">  57: &#x27;garter snake, grass snake&#x27;,</span><br><span class="line">  58: &#x27;water snake&#x27;,</span><br><span class="line">  59: &#x27;vine snake&#x27;,</span><br><span class="line">  60: &#x27;night snake, Hypsiglena torquata&#x27;,</span><br><span class="line">  61: &#x27;boa constrictor, Constrictor constrictor&#x27;,</span><br><span class="line">  62: &#x27;rock python, rock snake, Python sebae&#x27;,</span><br><span class="line">  63: &#x27;Indian cobra, Naja naja&#x27;,</span><br><span class="line">  64: &#x27;green mamba&#x27;,</span><br><span class="line">  65: &#x27;sea snake&#x27;,</span><br><span class="line">  66: &#x27;horned viper, cerastes, sand viper, horned asp, Cerastes cornutus&#x27;,</span><br><span class="line">  67: &#x27;diamondback, diamondback rattlesnake, Crotalus adamanteus&#x27;,</span><br><span class="line">  68: &#x27;sidewinder, horned rattlesnake, Crotalus cerastes&#x27;,</span><br><span class="line">  69: &#x27;trilobite&#x27;,</span><br><span class="line">  70: &#x27;harvestman, daddy longlegs, Phalangium opilio&#x27;,</span><br><span class="line">  71: &#x27;scorpion&#x27;,</span><br><span class="line">  72: &#x27;black and gold garden spider, Argiope aurantia&#x27;,</span><br><span class="line">  73: &#x27;barn spider, Araneus cavaticus&#x27;,</span><br><span class="line">  74: &#x27;garden spider, Aranea diademata&#x27;,</span><br><span class="line">  75: &#x27;black widow, Latrodectus mactans&#x27;,</span><br><span class="line">  76: &#x27;tarantula&#x27;,</span><br><span class="line">  77: &#x27;wolf spider, hunting spider&#x27;,</span><br><span class="line">  78: &#x27;tick&#x27;,</span><br><span class="line">  79: &#x27;centipede&#x27;,</span><br><span class="line">  80: &#x27;black grouse&#x27;,</span><br><span class="line">  81: &#x27;ptarmigan&#x27;,</span><br><span class="line">  82: &#x27;ruffed grouse, partridge, Bonasa umbellus&#x27;,</span><br><span class="line">  83: &#x27;prairie chicken, prairie grouse, prairie fowl&#x27;,</span><br><span class="line">  84: &#x27;peacock&#x27;,</span><br><span class="line">  85: &#x27;quail&#x27;,</span><br><span class="line">  86: &#x27;partridge&#x27;,</span><br><span class="line">  87: &#x27;African grey, African gray, Psittacus erithacus&#x27;,</span><br><span class="line">  88: &#x27;macaw&#x27;,</span><br><span class="line">  89: &#x27;sulphur-crested cockatoo, Kakatoe galerita, Cacatua galerita&#x27;,</span><br><span class="line">  90: &#x27;lorikeet&#x27;,</span><br><span class="line">  91: &#x27;coucal&#x27;,</span><br><span class="line">  92: &#x27;bee eater&#x27;,</span><br><span class="line">  93: &#x27;hornbill&#x27;,</span><br><span class="line">  94: &#x27;hummingbird&#x27;,</span><br><span class="line">  95: &#x27;jacamar&#x27;,</span><br><span class="line">  96: &#x27;toucan&#x27;,</span><br><span class="line">  97: &#x27;drake&#x27;,</span><br><span class="line">  98: &#x27;red-breasted merganser, Mergus serrator&#x27;,</span><br><span class="line">  99: &#x27;goose&#x27;,</span><br><span class="line">  100: &#x27;black swan, Cygnus atratus&#x27;,</span><br><span class="line">  101: &#x27;tusker&#x27;,</span><br><span class="line">  102: &#x27;echidna, spiny anteater, anteater&#x27;,</span><br><span class="line">  103: &#x27;platypus, duckbill, duckbilled platypus, duck-billed platypus, &#x27; +</span><br><span class="line">      &#x27;Ornithorhynchus anatinus&#x27;,</span><br><span class="line">  104: &#x27;wallaby, brush kangaroo&#x27;,</span><br><span class="line">  105: &#x27;koala, koala bear, kangaroo bear, native bear, Phascolarctos cinereus&#x27;,</span><br><span class="line">  106: &#x27;wombat&#x27;,</span><br><span class="line">  107: &#x27;jelly fish&#x27;,</span><br><span class="line">  108: &#x27;sea anemone, anemone&#x27;,</span><br><span class="line">  109: &#x27;brain coral&#x27;,</span><br><span class="line">  110: &#x27;flatworm, platyhelminth&#x27;,</span><br><span class="line">  111: &#x27;nematode, nematode worm, roundworm&#x27;,</span><br><span class="line">  112: &#x27;conch&#x27;,</span><br><span class="line">  113: &#x27;snail&#x27;,</span><br><span class="line">  114: &#x27;slug&#x27;,</span><br><span class="line">  115: &#x27;sea slug, nudibranch&#x27;,</span><br><span class="line">  116: &#x27;chiton, coat-of-mail shell, sea cradle, polyplacophore&#x27;,</span><br><span class="line">  117: &#x27;chambered nautilus, pearly nautilus, nautilus&#x27;,</span><br><span class="line">  118: &#x27;Dungeness crab, Cancer magister&#x27;,</span><br><span class="line">  119: &#x27;rock crab, Cancer irroratus&#x27;,</span><br><span class="line">  120: &#x27;fiddler crab&#x27;,</span><br><span class="line">  121: &#x27;king crab, Alaska crab, Alaskan king crab, Alaska king crab, &#x27; +</span><br><span class="line">      &#x27;Paralithodes camtschatica&#x27;,</span><br><span class="line">  122: &#x27;American lobster, Northern lobster, Maine lobster, Homarus americanus&#x27;,</span><br><span class="line">  123: &#x27;spiny lobster, langouste, rock lobster, crawfish, crayfish, sea &#x27; +</span><br><span class="line">      &#x27;crawfish&#x27;,</span><br><span class="line">  124: &#x27;crayfish, crawfish, crawdad, crawdaddy&#x27;,</span><br><span class="line">  125: &#x27;hermit crab&#x27;,</span><br><span class="line">  126: &#x27;isopod&#x27;,</span><br><span class="line">  127: &#x27;white stork, Ciconia ciconia&#x27;,</span><br><span class="line">  128: &#x27;black stork, Ciconia nigra&#x27;,</span><br><span class="line">  129: &#x27;spoonbill&#x27;,</span><br><span class="line">  130: &#x27;flamingo&#x27;,</span><br><span class="line">  131: &#x27;little blue heron, Egretta caerulea&#x27;,</span><br><span class="line">  132: &#x27;American egret, great white heron, Egretta albus&#x27;,</span><br><span class="line">  133: &#x27;bittern&#x27;,</span><br><span class="line">  134: &#x27;crane&#x27;,</span><br><span class="line">  135: &#x27;limpkin, Aramus pictus&#x27;,</span><br><span class="line">  136: &#x27;European gallinule, Porphyrio porphyrio&#x27;,</span><br><span class="line">  137: &#x27;American coot, marsh hen, mud hen, water hen, Fulica americana&#x27;,</span><br><span class="line">  138: &#x27;bustard&#x27;,</span><br><span class="line">  139: &#x27;ruddy turnstone, Arenaria interpres&#x27;,</span><br><span class="line">  140: &#x27;red-backed sandpiper, dunlin, Erolia alpina&#x27;,</span><br><span class="line">  141: &#x27;redshank, Tringa totanus&#x27;,</span><br><span class="line">  142: &#x27;dowitcher&#x27;,</span><br><span class="line">  143: &#x27;oystercatcher, oyster catcher&#x27;,</span><br><span class="line">  144: &#x27;pelican&#x27;,</span><br><span class="line">  145: &#x27;king penguin, Aptenodytes patagonica&#x27;,</span><br><span class="line">  146: &#x27;albatross, mollymawk&#x27;,</span><br><span class="line">  147: &#x27;grey whale, gray whale, devilfish, Eschrichtius gibbosus, &#x27; +</span><br><span class="line">      &#x27;Eschrichtius robustus&#x27;,</span><br><span class="line">  148: &#x27;killer whale, killer, orca, grampus, sea wolf, Orcinus orca&#x27;,</span><br><span class="line">  149: &#x27;dugong, Dugong dugon&#x27;,</span><br><span class="line">  150: &#x27;sea lion&#x27;,</span><br><span class="line">  151: &#x27;Chihuahua&#x27;,</span><br><span class="line">  152: &#x27;Japanese spaniel&#x27;,</span><br><span class="line">  153: &#x27;Maltese dog, Maltese terrier, Maltese&#x27;,</span><br><span class="line">  154: &#x27;Pekinese, Pekingese, Peke&#x27;,</span><br><span class="line">  155: &#x27;Shih-Tzu&#x27;,</span><br><span class="line">  156: &#x27;Blenheim spaniel&#x27;,</span><br><span class="line">  157: &#x27;papillon&#x27;,</span><br><span class="line">  158: &#x27;toy terrier&#x27;,</span><br><span class="line">  159: &#x27;Rhodesian ridgeback&#x27;,</span><br><span class="line">  160: &#x27;Afghan hound, Afghan&#x27;,</span><br><span class="line">  161: &#x27;basset, basset hound&#x27;,</span><br><span class="line">  162: &#x27;beagle&#x27;,</span><br><span class="line">  163: &#x27;bloodhound, sleuthhound&#x27;,</span><br><span class="line">  164: &#x27;bluetick&#x27;,</span><br><span class="line">  165: &#x27;black-and-tan coonhound&#x27;,</span><br><span class="line">  166: &#x27;Walker hound, Walker foxhound&#x27;,</span><br><span class="line">  167: &#x27;English foxhound&#x27;,</span><br><span class="line">  168: &#x27;redbone&#x27;,</span><br><span class="line">  169: &#x27;borzoi, Russian wolfhound&#x27;,</span><br><span class="line">  170: &#x27;Irish wolfhound&#x27;,</span><br><span class="line">  171: &#x27;Italian greyhound&#x27;,</span><br><span class="line">  172: &#x27;whippet&#x27;,</span><br><span class="line">  173: &#x27;Ibizan hound, Ibizan Podenco&#x27;,</span><br><span class="line">  174: &#x27;Norwegian elkhound, elkhound&#x27;,</span><br><span class="line">  175: &#x27;otterhound, otter hound&#x27;,</span><br><span class="line">  176: &#x27;Saluki, gazelle hound&#x27;,</span><br><span class="line">  177: &#x27;Scottish deerhound, deerhound&#x27;,</span><br><span class="line">  178: &#x27;Weimaraner&#x27;,</span><br><span class="line">  179: &#x27;Staffordshire bullterrier, Staffordshire bull terrier&#x27;,</span><br><span class="line">  180: &#x27;American Staffordshire terrier, Staffordshire terrier, American pit &#x27; +</span><br><span class="line">      &#x27;bull terrier, pit bull terrier&#x27;,</span><br><span class="line">  181: &#x27;Bedlington terrier&#x27;,</span><br><span class="line">  182: &#x27;Border terrier&#x27;,</span><br><span class="line">  183: &#x27;Kerry blue terrier&#x27;,</span><br><span class="line">  184: &#x27;Irish terrier&#x27;,</span><br><span class="line">  185: &#x27;Norfolk terrier&#x27;,</span><br><span class="line">  186: &#x27;Norwich terrier&#x27;,</span><br><span class="line">  187: &#x27;Yorkshire terrier&#x27;,</span><br><span class="line">  188: &#x27;wire-haired fox terrier&#x27;,</span><br><span class="line">  189: &#x27;Lakeland terrier&#x27;,</span><br><span class="line">  190: &#x27;Sealyham terrier, Sealyham&#x27;,</span><br><span class="line">  191: &#x27;Airedale, Airedale terrier&#x27;,</span><br><span class="line">  192: &#x27;cairn, cairn terrier&#x27;,</span><br><span class="line">  193: &#x27;Australian terrier&#x27;,</span><br><span class="line">  194: &#x27;Dandie Dinmont, Dandie Dinmont terrier&#x27;,</span><br><span class="line">  195: &#x27;Boston bull, Boston terrier&#x27;,</span><br><span class="line">  196: &#x27;miniature schnauzer&#x27;,</span><br><span class="line">  197: &#x27;giant schnauzer&#x27;,</span><br><span class="line">  198: &#x27;standard schnauzer&#x27;,</span><br><span class="line">  199: &#x27;Scotch terrier, Scottish terrier, Scottie&#x27;,</span><br><span class="line">  200: &#x27;Tibetan terrier, chrysanthemum dog&#x27;,</span><br><span class="line">  201: &#x27;silky terrier, Sydney silky&#x27;,</span><br><span class="line">  202: &#x27;soft-coated wheaten terrier&#x27;,</span><br><span class="line">  203: &#x27;West Highland white terrier&#x27;,</span><br><span class="line">  204: &#x27;Lhasa, Lhasa apso&#x27;,</span><br><span class="line">  205: &#x27;flat-coated retriever&#x27;,</span><br><span class="line">  206: &#x27;curly-coated retriever&#x27;,</span><br><span class="line">  207: &#x27;golden retriever&#x27;,</span><br><span class="line">  208: &#x27;Labrador retriever&#x27;,</span><br><span class="line">  209: &#x27;Chesapeake Bay retriever&#x27;,</span><br><span class="line">  210: &#x27;German short-haired pointer&#x27;,</span><br><span class="line">  211: &#x27;vizsla, Hungarian pointer&#x27;,</span><br><span class="line">  212: &#x27;English setter&#x27;,</span><br><span class="line">  213: &#x27;Irish setter, red setter&#x27;,</span><br><span class="line">  214: &#x27;Gordon setter&#x27;,</span><br><span class="line">  215: &#x27;Brittany spaniel&#x27;,</span><br><span class="line">  216: &#x27;clumber, clumber spaniel&#x27;,</span><br><span class="line">  217: &#x27;English springer, English springer spaniel&#x27;,</span><br><span class="line">  218: &#x27;Welsh springer spaniel&#x27;,</span><br><span class="line">  219: &#x27;cocker spaniel, English cocker spaniel, cocker&#x27;,</span><br><span class="line">  220: &#x27;Sussex spaniel&#x27;,</span><br><span class="line">  221: &#x27;Irish water spaniel&#x27;,</span><br><span class="line">  222: &#x27;kuvasz&#x27;,</span><br><span class="line">  223: &#x27;schipperke&#x27;,</span><br><span class="line">  224: &#x27;groenendael&#x27;,</span><br><span class="line">  225: &#x27;malinois&#x27;,</span><br><span class="line">  226: &#x27;briard&#x27;,</span><br><span class="line">  227: &#x27;kelpie&#x27;,</span><br><span class="line">  228: &#x27;komondor&#x27;,</span><br><span class="line">  229: &#x27;Old English sheepdog, bobtail&#x27;,</span><br><span class="line">  230: &#x27;Shetland sheepdog, Shetland sheep dog, Shetland&#x27;,</span><br><span class="line">  231: &#x27;collie&#x27;,</span><br><span class="line">  232: &#x27;Border collie&#x27;,</span><br><span class="line">  233: &#x27;Bouvier des Flandres, Bouviers des Flandres&#x27;,</span><br><span class="line">  234: &#x27;Rottweiler&#x27;,</span><br><span class="line">  235: &#x27;German shepherd, German shepherd dog, German police dog, alsatian&#x27;,</span><br><span class="line">  236: &#x27;Doberman, Doberman pinscher&#x27;,</span><br><span class="line">  237: &#x27;miniature pinscher&#x27;,</span><br><span class="line">  238: &#x27;Greater Swiss Mountain dog&#x27;,</span><br><span class="line">  239: &#x27;Bernese mountain dog&#x27;,</span><br><span class="line">  240: &#x27;Appenzeller&#x27;,</span><br><span class="line">  241: &#x27;EntleBucher&#x27;,</span><br><span class="line">  242: &#x27;boxer&#x27;,</span><br><span class="line">  243: &#x27;bull mastiff&#x27;,</span><br><span class="line">  244: &#x27;Tibetan mastiff&#x27;,</span><br><span class="line">  245: &#x27;French bulldog&#x27;,</span><br><span class="line">  246: &#x27;Great Dane&#x27;,</span><br><span class="line">  247: &#x27;Saint Bernard, St Bernard&#x27;,</span><br><span class="line">  248: &#x27;Eskimo dog, husky&#x27;,</span><br><span class="line">  249: &#x27;malamute, malemute, Alaskan malamute&#x27;,</span><br><span class="line">  250: &#x27;Siberian husky&#x27;,</span><br><span class="line">  251: &#x27;dalmatian, coach dog, carriage dog&#x27;,</span><br><span class="line">  252: &#x27;affenpinscher, monkey pinscher, monkey dog&#x27;,</span><br><span class="line">  253: &#x27;basenji&#x27;,</span><br><span class="line">  254: &#x27;pug, pug-dog&#x27;,</span><br><span class="line">  255: &#x27;Leonberg&#x27;,</span><br><span class="line">  256: &#x27;Newfoundland, Newfoundland dog&#x27;,</span><br><span class="line">  257: &#x27;Great Pyrenees&#x27;,</span><br><span class="line">  258: &#x27;Samoyed, Samoyede&#x27;,</span><br><span class="line">  259: &#x27;Pomeranian&#x27;,</span><br><span class="line">  260: &#x27;chow, chow chow&#x27;,</span><br><span class="line">  261: &#x27;keeshond&#x27;,</span><br><span class="line">  262: &#x27;Brabancon griffon&#x27;,</span><br><span class="line">  263: &#x27;Pembroke, Pembroke Welsh corgi&#x27;,</span><br><span class="line">  264: &#x27;Cardigan, Cardigan Welsh corgi&#x27;,</span><br><span class="line">  265: &#x27;toy poodle&#x27;,</span><br><span class="line">  266: &#x27;miniature poodle&#x27;,</span><br><span class="line">  267: &#x27;standard poodle&#x27;,</span><br><span class="line">  268: &#x27;Mexican hairless&#x27;,</span><br><span class="line">  269: &#x27;timber wolf, grey wolf, gray wolf, Canis lupus&#x27;,</span><br><span class="line">  270: &#x27;white wolf, Arctic wolf, Canis lupus tundrarum&#x27;,</span><br><span class="line">  271: &#x27;red wolf, maned wolf, Canis rufus, Canis niger&#x27;,</span><br><span class="line">  272: &#x27;coyote, prairie wolf, brush wolf, Canis latrans&#x27;,</span><br><span class="line">  273: &#x27;dingo, warrigal, warragal, Canis dingo&#x27;,</span><br><span class="line">  274: &#x27;dhole, Cuon alpinus&#x27;,</span><br><span class="line">  275: &#x27;African hunting dog, hyena dog, Cape hunting dog, Lycaon pictus&#x27;,</span><br><span class="line">  276: &#x27;hyena, hyaena&#x27;,</span><br><span class="line">  277: &#x27;red fox, Vulpes vulpes&#x27;,</span><br><span class="line">  278: &#x27;kit fox, Vulpes macrotis&#x27;,</span><br><span class="line">  279: &#x27;Arctic fox, white fox, Alopex lagopus&#x27;,</span><br><span class="line">  280: &#x27;grey fox, gray fox, Urocyon cinereoargenteus&#x27;,</span><br><span class="line">  281: &#x27;tabby, tabby cat&#x27;,</span><br><span class="line">  282: &#x27;tiger cat&#x27;,</span><br><span class="line">  283: &#x27;Persian cat&#x27;,</span><br><span class="line">  284: &#x27;Siamese cat, Siamese&#x27;,</span><br><span class="line">  285: &#x27;Egyptian cat&#x27;,</span><br><span class="line">  286: &#x27;cougar, puma, catamount, mountain lion, painter, panther, &#x27; +</span><br><span class="line">      &#x27;Felis concolor&#x27;,</span><br><span class="line">  287: &#x27;lynx, catamount&#x27;,</span><br><span class="line">  288: &#x27;leopard, Panthera pardus&#x27;,</span><br><span class="line">  289: &#x27;snow leopard, ounce, Panthera uncia&#x27;,</span><br><span class="line">  290: &#x27;jaguar, panther, Panthera onca, Felis onca&#x27;,</span><br><span class="line">  291: &#x27;lion, king of beasts, Panthera leo&#x27;,</span><br><span class="line">  292: &#x27;tiger, Panthera tigris&#x27;,</span><br><span class="line">  293: &#x27;cheetah, chetah, Acinonyx jubatus&#x27;,</span><br><span class="line">  294: &#x27;brown bear, bruin, Ursus arctos&#x27;,</span><br><span class="line">  295: &#x27;American black bear, black bear, Ursus americanus, Euarctos &#x27; +</span><br><span class="line">      &#x27;americanus&#x27;,</span><br><span class="line">  296: &#x27;ice bear, polar bear, Ursus Maritimus, Thalarctos maritimus&#x27;,</span><br><span class="line">  297: &#x27;sloth bear, Melursus ursinus, Ursus ursinus&#x27;,</span><br><span class="line">  298: &#x27;mongoose&#x27;,</span><br><span class="line">  299: &#x27;meerkat, mierkat&#x27;,</span><br><span class="line">  300: &#x27;tiger beetle&#x27;,</span><br><span class="line">  301: &#x27;ladybug, ladybeetle, lady beetle, ladybird, ladybird beetle&#x27;,</span><br><span class="line">  302: &#x27;ground beetle, carabid beetle&#x27;,</span><br><span class="line">  303: &#x27;long-horned beetle, longicorn, longicorn beetle&#x27;,</span><br><span class="line">  304: &#x27;leaf beetle, chrysomelid&#x27;,</span><br><span class="line">  305: &#x27;dung beetle&#x27;,</span><br><span class="line">  306: &#x27;rhinoceros beetle&#x27;,</span><br><span class="line">  307: &#x27;weevil&#x27;,</span><br><span class="line">  308: &#x27;fly&#x27;,</span><br><span class="line">  309: &#x27;bee&#x27;,</span><br><span class="line">  310: &#x27;ant, emmet, pismire&#x27;,</span><br><span class="line">  311: &#x27;grasshopper, hopper&#x27;,</span><br><span class="line">  312: &#x27;cricket&#x27;,</span><br><span class="line">  313: &#x27;walking stick, walkingstick, stick insect&#x27;,</span><br><span class="line">  314: &#x27;cockroach, roach&#x27;,</span><br><span class="line">  315: &#x27;mantis, mantid&#x27;,</span><br><span class="line">  316: &#x27;cicada, cicala&#x27;,</span><br><span class="line">  317: &#x27;leafhopper&#x27;,</span><br><span class="line">  318: &#x27;lacewing, lacewing fly&#x27;,</span><br><span class="line">  319: &#x27;dragonfly, darning needle, devil\&#x27;s darning needle, sewing needle, &#x27; +</span><br><span class="line">      &#x27;snake feeder, snake doctor, mosquito hawk, skeeter hawk&#x27;,</span><br><span class="line">  320: &#x27;damselfly&#x27;,</span><br><span class="line">  321: &#x27;admiral&#x27;,</span><br><span class="line">  322: &#x27;ringlet, ringlet butterfly&#x27;,</span><br><span class="line">  323: &#x27;monarch, monarch butterfly, milkweed butterfly, Danaus plexippus&#x27;,</span><br><span class="line">  324: &#x27;cabbage butterfly&#x27;,</span><br><span class="line">  325: &#x27;sulphur butterfly, sulfur butterfly&#x27;,</span><br><span class="line">  326: &#x27;lycaenid, lycaenid butterfly&#x27;,</span><br><span class="line">  327: &#x27;starfish, sea star&#x27;,</span><br><span class="line">  328: &#x27;sea urchin&#x27;,</span><br><span class="line">  329: &#x27;sea cucumber, holothurian&#x27;,</span><br><span class="line">  330: &#x27;wood rabbit, cottontail, cottontail rabbit&#x27;,</span><br><span class="line">  331: &#x27;hare&#x27;,</span><br><span class="line">  332: &#x27;Angora, Angora rabbit&#x27;,</span><br><span class="line">  333: &#x27;hamster&#x27;,</span><br><span class="line">  334: &#x27;porcupine, hedgehog&#x27;,</span><br><span class="line">  335: &#x27;fox squirrel, eastern fox squirrel, Sciurus niger&#x27;,</span><br><span class="line">  336: &#x27;marmot&#x27;,</span><br><span class="line">  337: &#x27;beaver&#x27;,</span><br><span class="line">  338: &#x27;guinea pig, Cavia cobaya&#x27;,</span><br><span class="line">  339: &#x27;sorrel&#x27;,</span><br><span class="line">  340: &#x27;zebra&#x27;,</span><br><span class="line">  341: &#x27;hog, pig, grunter, squealer, Sus scrofa&#x27;,</span><br><span class="line">  342: &#x27;wild boar, boar, Sus scrofa&#x27;,</span><br><span class="line">  343: &#x27;warthog&#x27;,</span><br><span class="line">  344: &#x27;hippopotamus, hippo, river horse, Hippopotamus amphibius&#x27;,</span><br><span class="line">  345: &#x27;ox&#x27;,</span><br><span class="line">  346: &#x27;water buffalo, water ox, Asiatic buffalo, Bubalus bubalis&#x27;,</span><br><span class="line">  347: &#x27;bison&#x27;,</span><br><span class="line">  348: &#x27;ram, tup&#x27;,</span><br><span class="line">  349: &#x27;bighorn, bighorn sheep, cimarron, Rocky Mountain bighorn, Rocky &#x27; +</span><br><span class="line">      &#x27;Mountain sheep, Ovis canadensis&#x27;,</span><br><span class="line">  350: &#x27;ibex, Capra ibex&#x27;,</span><br><span class="line">  351: &#x27;hartebeest&#x27;,</span><br><span class="line">  352: &#x27;impala, Aepyceros melampus&#x27;,</span><br><span class="line">  353: &#x27;gazelle&#x27;,</span><br><span class="line">  354: &#x27;Arabian camel, dromedary, Camelus dromedarius&#x27;,</span><br><span class="line">  355: &#x27;llama&#x27;,</span><br><span class="line">  356: &#x27;weasel&#x27;,</span><br><span class="line">  357: &#x27;mink&#x27;,</span><br><span class="line">  358: &#x27;polecat, fitch, foulmart, foumart, Mustela putorius&#x27;,</span><br><span class="line">  359: &#x27;black-footed ferret, ferret, Mustela nigripes&#x27;,</span><br><span class="line">  360: &#x27;otter&#x27;,</span><br><span class="line">  361: &#x27;skunk, polecat, wood pussy&#x27;,</span><br><span class="line">  362: &#x27;badger&#x27;,</span><br><span class="line">  363: &#x27;armadillo&#x27;,</span><br><span class="line">  364: &#x27;three-toed sloth, ai, Bradypus tridactylus&#x27;,</span><br><span class="line">  365: &#x27;orangutan, orang, orangutang, Pongo pygmaeus&#x27;,</span><br><span class="line">  366: &#x27;gorilla, Gorilla gorilla&#x27;,</span><br><span class="line">  367: &#x27;chimpanzee, chimp, Pan troglodytes&#x27;,</span><br><span class="line">  368: &#x27;gibbon, Hylobates lar&#x27;,</span><br><span class="line">  369: &#x27;siamang, Hylobates syndactylus, Symphalangus syndactylus&#x27;,</span><br><span class="line">  370: &#x27;guenon, guenon monkey&#x27;,</span><br><span class="line">  371: &#x27;patas, hussar monkey, Erythrocebus patas&#x27;,</span><br><span class="line">  372: &#x27;baboon&#x27;,</span><br><span class="line">  373: &#x27;macaque&#x27;,</span><br><span class="line">  374: &#x27;langur&#x27;,</span><br><span class="line">  375: &#x27;colobus, colobus monkey&#x27;,</span><br><span class="line">  376: &#x27;proboscis monkey, Nasalis larvatus&#x27;,</span><br><span class="line">  377: &#x27;marmoset&#x27;,</span><br><span class="line">  378: &#x27;capuchin, ringtail, Cebus capucinus&#x27;,</span><br><span class="line">  379: &#x27;howler monkey, howler&#x27;,</span><br><span class="line">  380: &#x27;titi, titi monkey&#x27;,</span><br><span class="line">  381: &#x27;spider monkey, Ateles geoffroyi&#x27;,</span><br><span class="line">  382: &#x27;squirrel monkey, Saimiri sciureus&#x27;,</span><br><span class="line">  383: &#x27;Madagascar cat, ring-tailed lemur, Lemur catta&#x27;,</span><br><span class="line">  384: &#x27;indri, indris, Indri indri, Indri brevicaudatus&#x27;,</span><br><span class="line">  385: &#x27;Indian elephant, Elephas maximus&#x27;,</span><br><span class="line">  386: &#x27;African elephant, Loxodonta africana&#x27;,</span><br><span class="line">  387: &#x27;lesser panda, red panda, panda, bear cat, cat bear, Ailurus fulgens&#x27;,</span><br><span class="line">  388: &#x27;giant panda, panda, panda bear, coon bear, Ailuropoda melanoleuca&#x27;,</span><br><span class="line">  389: &#x27;barracouta, snoek&#x27;,</span><br><span class="line">  390: &#x27;eel&#x27;,</span><br><span class="line">  391: &#x27;coho, cohoe, coho salmon, blue jack, silver salmon, Oncorhynchus &#x27; +</span><br><span class="line">      &#x27;kisutch&#x27;,</span><br><span class="line">  392: &#x27;rock beauty, Holocanthus tricolor&#x27;,</span><br><span class="line">  393: &#x27;anemone fish&#x27;,</span><br><span class="line">  394: &#x27;sturgeon&#x27;,</span><br><span class="line">  395: &#x27;gar, garfish, garpike, billfish, Lepisosteus osseus&#x27;,</span><br><span class="line">  396: &#x27;lionfish&#x27;,</span><br><span class="line">  397: &#x27;puffer, pufferfish, blowfish, globefish&#x27;,</span><br><span class="line">  398: &#x27;abacus&#x27;,</span><br><span class="line">  399: &#x27;abaya&#x27;,</span><br><span class="line">  400: &#x27;academic gown, academic robe, judge\&#x27;s robe&#x27;,</span><br><span class="line">  401: &#x27;accordion, piano accordion, squeeze box&#x27;,</span><br><span class="line">  402: &#x27;acoustic guitar&#x27;,</span><br><span class="line">  403: &#x27;aircraft carrier, carrier, flattop, attack aircraft carrier&#x27;,</span><br><span class="line">  404: &#x27;airliner&#x27;,</span><br><span class="line">  405: &#x27;airship, dirigible&#x27;,</span><br><span class="line">  406: &#x27;altar&#x27;,</span><br><span class="line">  407: &#x27;ambulance&#x27;,</span><br><span class="line">  408: &#x27;amphibian, amphibious vehicle&#x27;,</span><br><span class="line">  409: &#x27;analog clock&#x27;,</span><br><span class="line">  410: &#x27;apiary, bee house&#x27;,</span><br><span class="line">  411: &#x27;apron&#x27;,</span><br><span class="line">  412: &#x27;ashcan, trash can, garbage can, wastebin, ash bin, ash-bin, ashbin, &#x27; +</span><br><span class="line">      &#x27;dustbin, trash barrel, trash bin&#x27;,</span><br><span class="line">  413: &#x27;assault rifle, assault gun&#x27;,</span><br><span class="line">  414: &#x27;backpack, back pack, knapsack, packsack, rucksack, haversack&#x27;,</span><br><span class="line">  415: &#x27;bakery, bakeshop, bakehouse&#x27;,</span><br><span class="line">  416: &#x27;balance beam, beam&#x27;,</span><br><span class="line">  417: &#x27;balloon&#x27;,</span><br><span class="line">  418: &#x27;ballpoint, ballpoint pen, ballpen, Biro&#x27;,</span><br><span class="line">  419: &#x27;Band Aid&#x27;,</span><br><span class="line">  420: &#x27;banjo&#x27;,</span><br><span class="line">  421: &#x27;bannister, banister, balustrade, balusters, handrail&#x27;,</span><br><span class="line">  422: &#x27;barbell&#x27;,</span><br><span class="line">  423: &#x27;barber chair&#x27;,</span><br><span class="line">  424: &#x27;barbershop&#x27;,</span><br><span class="line">  425: &#x27;barn&#x27;,</span><br><span class="line">  426: &#x27;barometer&#x27;,</span><br><span class="line">  427: &#x27;barrel, cask&#x27;,</span><br><span class="line">  428: &#x27;barrow, garden cart, lawn cart, wheelbarrow&#x27;,</span><br><span class="line">  429: &#x27;baseball&#x27;,</span><br><span class="line">  430: &#x27;basketball&#x27;,</span><br><span class="line">  431: &#x27;bassinet&#x27;,</span><br><span class="line">  432: &#x27;bassoon&#x27;,</span><br><span class="line">  433: &#x27;bathing cap, swimming cap&#x27;,</span><br><span class="line">  434: &#x27;bath towel&#x27;,</span><br><span class="line">  435: &#x27;bathtub, bathing tub, bath, tub&#x27;,</span><br><span class="line">  436: &#x27;beach wagon, station wagon, wagon, estate car, beach waggon, station &#x27; +</span><br><span class="line">      &#x27;waggon, waggon&#x27;,</span><br><span class="line">  437: &#x27;beacon, lighthouse, beacon light, pharos&#x27;,</span><br><span class="line">  438: &#x27;beaker&#x27;,</span><br><span class="line">  439: &#x27;bearskin, busby, shako&#x27;,</span><br><span class="line">  440: &#x27;beer bottle&#x27;,</span><br><span class="line">  441: &#x27;beer glass&#x27;,</span><br><span class="line">  442: &#x27;bell cote, bell cot&#x27;,</span><br><span class="line">  443: &#x27;bib&#x27;,</span><br><span class="line">  444: &#x27;bicycle-built-for-two, tandem bicycle, tandem&#x27;,</span><br><span class="line">  445: &#x27;bikini, two-piece&#x27;,</span><br><span class="line">  446: &#x27;binder, ring-binder&#x27;,</span><br><span class="line">  447: &#x27;binoculars, field glasses, opera glasses&#x27;,</span><br><span class="line">  448: &#x27;birdhouse&#x27;,</span><br><span class="line">  449: &#x27;boathouse&#x27;,</span><br><span class="line">  450: &#x27;bobsled, bobsleigh, bob&#x27;,</span><br><span class="line">  451: &#x27;bolo tie, bolo, bola tie, bola&#x27;,</span><br><span class="line">  452: &#x27;bonnet, poke bonnet&#x27;,</span><br><span class="line">  453: &#x27;bookcase&#x27;,</span><br><span class="line">  454: &#x27;bookshop, bookstore, bookstall&#x27;,</span><br><span class="line">  455: &#x27;bottlecap&#x27;,</span><br><span class="line">  456: &#x27;bow&#x27;,</span><br><span class="line">  457: &#x27;bow tie, bow-tie, bowtie&#x27;,</span><br><span class="line">  458: &#x27;brass, memorial tablet, plaque&#x27;,</span><br><span class="line">  459: &#x27;brassiere, bra, bandeau&#x27;,</span><br><span class="line">  460: &#x27;breakwater, groin, groyne, mole, bulwark, seawall, jetty&#x27;,</span><br><span class="line">  461: &#x27;breastplate, aegis, egis&#x27;,</span><br><span class="line">  462: &#x27;broom&#x27;,</span><br><span class="line">  463: &#x27;bucket, pail&#x27;,</span><br><span class="line">  464: &#x27;buckle&#x27;,</span><br><span class="line">  465: &#x27;bulletproof vest&#x27;,</span><br><span class="line">  466: &#x27;bullet train, bullet&#x27;,</span><br><span class="line">  467: &#x27;butcher shop, meat market&#x27;,</span><br><span class="line">  468: &#x27;cab, hack, taxi, taxicab&#x27;,</span><br><span class="line">  469: &#x27;caldron, cauldron&#x27;,</span><br><span class="line">  470: &#x27;candle, taper, wax light&#x27;,</span><br><span class="line">  471: &#x27;cannon&#x27;,</span><br><span class="line">  472: &#x27;canoe&#x27;,</span><br><span class="line">  473: &#x27;can opener, tin opener&#x27;,</span><br><span class="line">  474: &#x27;cardigan&#x27;,</span><br><span class="line">  475: &#x27;car mirror&#x27;,</span><br><span class="line">  476: &#x27;carousel, carrousel, merry-go-round, roundabout, whirligig&#x27;,</span><br><span class="line">  477: &#x27;carpenter\&#x27;s kit, tool kit&#x27;,</span><br><span class="line">  478: &#x27;carton&#x27;,</span><br><span class="line">  479: &#x27;car wheel&#x27;,</span><br><span class="line">  480: &#x27;cash machine, cash dispenser, automated teller machine, automatic &#x27; +</span><br><span class="line">      &#x27;teller machine, automated teller, automatic teller, ATM&#x27;,</span><br><span class="line">  481: &#x27;cassette&#x27;,</span><br><span class="line">  482: &#x27;cassette player&#x27;,</span><br><span class="line">  483: &#x27;castle&#x27;,</span><br><span class="line">  484: &#x27;catamaran&#x27;,</span><br><span class="line">  485: &#x27;CD player&#x27;,</span><br><span class="line">  486: &#x27;cello, violoncello&#x27;,</span><br><span class="line">  487: &#x27;cellular telephone, cellular phone, cellphone, cell, mobile phone&#x27;,</span><br><span class="line">  488: &#x27;chain&#x27;,</span><br><span class="line">  489: &#x27;chainlink fence&#x27;,</span><br><span class="line">  490: &#x27;chain mail, ring mail, mail, chain armor, chain armour, ring armor, &#x27; +</span><br><span class="line">      &#x27;ring armour&#x27;,</span><br><span class="line">  491: &#x27;chain saw, chainsaw&#x27;,</span><br><span class="line">  492: &#x27;chest&#x27;,</span><br><span class="line">  493: &#x27;chiffonier, commode&#x27;,</span><br><span class="line">  494: &#x27;chime, bell, gong&#x27;,</span><br><span class="line">  495: &#x27;china cabinet, china closet&#x27;,</span><br><span class="line">  496: &#x27;Christmas stocking&#x27;,</span><br><span class="line">  497: &#x27;church, church building&#x27;,</span><br><span class="line">  498: &#x27;cinema, movie theater, movie theatre, movie house, picture palace&#x27;,</span><br><span class="line">  499: &#x27;cleaver, meat cleaver, chopper&#x27;,</span><br><span class="line">  500: &#x27;cliff dwelling&#x27;,</span><br><span class="line">  501: &#x27;cloak&#x27;,</span><br><span class="line">  502: &#x27;clog, geta, patten, sabot&#x27;,</span><br><span class="line">  503: &#x27;cocktail shaker&#x27;,</span><br><span class="line">  504: &#x27;coffee mug&#x27;,</span><br><span class="line">  505: &#x27;coffeepot&#x27;,</span><br><span class="line">  506: &#x27;coil, spiral, volute, whorl, helix&#x27;,</span><br><span class="line">  507: &#x27;combination lock&#x27;,</span><br><span class="line">  508: &#x27;computer keyboard, keypad&#x27;,</span><br><span class="line">  509: &#x27;confectionery, confectionary, candy store&#x27;,</span><br><span class="line">  510: &#x27;container ship, containership, container vessel&#x27;,</span><br><span class="line">  511: &#x27;convertible&#x27;,</span><br><span class="line">  512: &#x27;corkscrew, bottle screw&#x27;,</span><br><span class="line">  513: &#x27;cornet, horn, trumpet, trump&#x27;,</span><br><span class="line">  514: &#x27;cowboy boot&#x27;,</span><br><span class="line">  515: &#x27;cowboy hat, ten-gallon hat&#x27;,</span><br><span class="line">  516: &#x27;cradle&#x27;,</span><br><span class="line">  517: &#x27;crane&#x27;,</span><br><span class="line">  518: &#x27;crash helmet&#x27;,</span><br><span class="line">  519: &#x27;crate&#x27;,</span><br><span class="line">  520: &#x27;crib, cot&#x27;,</span><br><span class="line">  521: &#x27;Crock Pot&#x27;,</span><br><span class="line">  522: &#x27;croquet ball&#x27;,</span><br><span class="line">  523: &#x27;crutch&#x27;,</span><br><span class="line">  524: &#x27;cuirass&#x27;,</span><br><span class="line">  525: &#x27;dam, dike, dyke&#x27;,</span><br><span class="line">  526: &#x27;desk&#x27;,</span><br><span class="line">  527: &#x27;desktop computer&#x27;,</span><br><span class="line">  528: &#x27;dial telephone, dial phone&#x27;,</span><br><span class="line">  529: &#x27;diaper, nappy, napkin&#x27;,</span><br><span class="line">  530: &#x27;digital clock&#x27;,</span><br><span class="line">  531: &#x27;digital watch&#x27;,</span><br><span class="line">  532: &#x27;dining table, board&#x27;,</span><br><span class="line">  533: &#x27;dishrag, dishcloth&#x27;,</span><br><span class="line">  534: &#x27;dishwasher, dish washer, dishwashing machine&#x27;,</span><br><span class="line">  535: &#x27;disk brake, disc brake&#x27;,</span><br><span class="line">  536: &#x27;dock, dockage, docking facility&#x27;,</span><br><span class="line">  537: &#x27;dogsled, dog sled, dog sleigh&#x27;,</span><br><span class="line">  538: &#x27;dome&#x27;,</span><br><span class="line">  539: &#x27;doormat, welcome mat&#x27;,</span><br><span class="line">  540: &#x27;drilling platform, offshore rig&#x27;,</span><br><span class="line">  541: &#x27;drum, membranophone, tympan&#x27;,</span><br><span class="line">  542: &#x27;drumstick&#x27;,</span><br><span class="line">  543: &#x27;dumbbell&#x27;,</span><br><span class="line">  544: &#x27;Dutch oven&#x27;,</span><br><span class="line">  545: &#x27;electric fan, blower&#x27;,</span><br><span class="line">  546: &#x27;electric guitar&#x27;,</span><br><span class="line">  547: &#x27;electric locomotive&#x27;,</span><br><span class="line">  548: &#x27;entertainment center&#x27;,</span><br><span class="line">  549: &#x27;envelope&#x27;,</span><br><span class="line">  550: &#x27;espresso maker&#x27;,</span><br><span class="line">  551: &#x27;face powder&#x27;,</span><br><span class="line">  552: &#x27;feather boa, boa&#x27;,</span><br><span class="line">  553: &#x27;file, file cabinet, filing cabinet&#x27;,</span><br><span class="line">  554: &#x27;fireboat&#x27;,</span><br><span class="line">  555: &#x27;fire engine, fire truck&#x27;,</span><br><span class="line">  556: &#x27;fire screen, fireguard&#x27;,</span><br><span class="line">  557: &#x27;flagpole, flagstaff&#x27;,</span><br><span class="line">  558: &#x27;flute, transverse flute&#x27;,</span><br><span class="line">  559: &#x27;folding chair&#x27;,</span><br><span class="line">  560: &#x27;football helmet&#x27;,</span><br><span class="line">  561: &#x27;forklift&#x27;,</span><br><span class="line">  562: &#x27;fountain&#x27;,</span><br><span class="line">  563: &#x27;fountain pen&#x27;,</span><br><span class="line">  564: &#x27;four-poster&#x27;,</span><br><span class="line">  565: &#x27;freight car&#x27;,</span><br><span class="line">  566: &#x27;French horn, horn&#x27;,</span><br><span class="line">  567: &#x27;frying pan, frypan, skillet&#x27;,</span><br><span class="line">  568: &#x27;fur coat&#x27;,</span><br><span class="line">  569: &#x27;garbage truck, dustcart&#x27;,</span><br><span class="line">  570: &#x27;gasmask, respirator, gas helmet&#x27;,</span><br><span class="line">  571: &#x27;gas pump, gasoline pump, petrol pump, island dispenser&#x27;,</span><br><span class="line">  572: &#x27;goblet&#x27;,</span><br><span class="line">  573: &#x27;go-kart&#x27;,</span><br><span class="line">  574: &#x27;golf ball&#x27;,</span><br><span class="line">  575: &#x27;golfcart, golf cart&#x27;,</span><br><span class="line">  576: &#x27;gondola&#x27;,</span><br><span class="line">  577: &#x27;gong, tam-tam&#x27;,</span><br><span class="line">  578: &#x27;gown&#x27;,</span><br><span class="line">  579: &#x27;grand piano, grand&#x27;,</span><br><span class="line">  580: &#x27;greenhouse, nursery, glasshouse&#x27;,</span><br><span class="line">  581: &#x27;grille, radiator grille&#x27;,</span><br><span class="line">  582: &#x27;grocery store, grocery, food market, market&#x27;,</span><br><span class="line">  583: &#x27;guillotine&#x27;,</span><br><span class="line">  584: &#x27;hair slide&#x27;,</span><br><span class="line">  585: &#x27;hair spray&#x27;,</span><br><span class="line">  586: &#x27;half track&#x27;,</span><br><span class="line">  587: &#x27;hammer&#x27;,</span><br><span class="line">  588: &#x27;hamper&#x27;,</span><br><span class="line">  589: &#x27;hand blower, blow dryer, blow drier, hair dryer, hair drier&#x27;,</span><br><span class="line">  590: &#x27;hand-held computer, hand-held microcomputer&#x27;,</span><br><span class="line">  591: &#x27;handkerchief, hankie, hanky, hankey&#x27;,</span><br><span class="line">  592: &#x27;hard disc, hard disk, fixed disk&#x27;,</span><br><span class="line">  593: &#x27;harmonica, mouth organ, harp, mouth harp&#x27;,</span><br><span class="line">  594: &#x27;harp&#x27;,</span><br><span class="line">  595: &#x27;harvester, reaper&#x27;,</span><br><span class="line">  596: &#x27;hatchet&#x27;,</span><br><span class="line">  597: &#x27;holster&#x27;,</span><br><span class="line">  598: &#x27;home theater, home theatre&#x27;,</span><br><span class="line">  599: &#x27;honeycomb&#x27;,</span><br><span class="line">  600: &#x27;hook, claw&#x27;,</span><br><span class="line">  601: &#x27;hoopskirt, crinoline&#x27;,</span><br><span class="line">  602: &#x27;horizontal bar, high bar&#x27;,</span><br><span class="line">  603: &#x27;horse cart, horse-cart&#x27;,</span><br><span class="line">  604: &#x27;hourglass&#x27;,</span><br><span class="line">  605: &#x27;iPod&#x27;,</span><br><span class="line">  606: &#x27;iron, smoothing iron&#x27;,</span><br><span class="line">  607: &#x27;jack-o\&#x27;-lantern&#x27;,</span><br><span class="line">  608: &#x27;jean, blue jean, denim&#x27;,</span><br><span class="line">  609: &#x27;jeep, landrover&#x27;,</span><br><span class="line">  610: &#x27;jersey, T-shirt, tee shirt&#x27;,</span><br><span class="line">  611: &#x27;jigsaw puzzle&#x27;,</span><br><span class="line">  612: &#x27;jinrikisha, ricksha, rickshaw&#x27;,</span><br><span class="line">  613: &#x27;joystick&#x27;,</span><br><span class="line">  614: &#x27;kimono&#x27;,</span><br><span class="line">  615: &#x27;knee pad&#x27;,</span><br><span class="line">  616: &#x27;knot&#x27;,</span><br><span class="line">  617: &#x27;lab coat, laboratory coat&#x27;,</span><br><span class="line">  618: &#x27;ladle&#x27;,</span><br><span class="line">  619: &#x27;lampshade, lamp shade&#x27;,</span><br><span class="line">  620: &#x27;laptop, laptop computer&#x27;,</span><br><span class="line">  621: &#x27;lawn mower, mower&#x27;,</span><br><span class="line">  622: &#x27;lens cap, lens cover&#x27;,</span><br><span class="line">  623: &#x27;letter opener, paper knife, paperknife&#x27;,</span><br><span class="line">  624: &#x27;library&#x27;,</span><br><span class="line">  625: &#x27;lifeboat&#x27;,</span><br><span class="line">  626: &#x27;lighter, light, igniter, ignitor&#x27;,</span><br><span class="line">  627: &#x27;limousine, limo&#x27;,</span><br><span class="line">  628: &#x27;liner, ocean liner&#x27;,</span><br><span class="line">  629: &#x27;lipstick, lip rouge&#x27;,</span><br><span class="line">  630: &#x27;Loafer&#x27;,</span><br><span class="line">  631: &#x27;lotion&#x27;,</span><br><span class="line">  632: &#x27;loudspeaker, speaker, speaker unit, loudspeaker system, speaker &#x27; +</span><br><span class="line">      &#x27;system&#x27;,</span><br><span class="line">  633: &#x27;loupe, jeweler\&#x27;s loupe&#x27;,</span><br><span class="line">  634: &#x27;lumbermill, sawmill&#x27;,</span><br><span class="line">  635: &#x27;magnetic compass&#x27;,</span><br><span class="line">  636: &#x27;mailbag, postbag&#x27;,</span><br><span class="line">  637: &#x27;mailbox, letter box&#x27;,</span><br><span class="line">  638: &#x27;maillot&#x27;,</span><br><span class="line">  639: &#x27;maillot, tank suit&#x27;,</span><br><span class="line">  640: &#x27;manhole cover&#x27;,</span><br><span class="line">  641: &#x27;maraca&#x27;,</span><br><span class="line">  642: &#x27;marimba, xylophone&#x27;,</span><br><span class="line">  643: &#x27;mask&#x27;,</span><br><span class="line">  644: &#x27;matchstick&#x27;,</span><br><span class="line">  645: &#x27;maypole&#x27;,</span><br><span class="line">  646: &#x27;maze, labyrinth&#x27;,</span><br><span class="line">  647: &#x27;measuring cup&#x27;,</span><br><span class="line">  648: &#x27;medicine chest, medicine cabinet&#x27;,</span><br><span class="line">  649: &#x27;megalith, megalithic structure&#x27;,</span><br><span class="line">  650: &#x27;microphone, mike&#x27;,</span><br><span class="line">  651: &#x27;microwave, microwave oven&#x27;,</span><br><span class="line">  652: &#x27;military uniform&#x27;,</span><br><span class="line">  653: &#x27;milk can&#x27;,</span><br><span class="line">  654: &#x27;minibus&#x27;,</span><br><span class="line">  655: &#x27;miniskirt, mini&#x27;,</span><br><span class="line">  656: &#x27;minivan&#x27;,</span><br><span class="line">  657: &#x27;missile&#x27;,</span><br><span class="line">  658: &#x27;mitten&#x27;,</span><br><span class="line">  659: &#x27;mixing bowl&#x27;,</span><br><span class="line">  660: &#x27;mobile home, manufactured home&#x27;,</span><br><span class="line">  661: &#x27;Model T&#x27;,</span><br><span class="line">  662: &#x27;modem&#x27;,</span><br><span class="line">  663: &#x27;monastery&#x27;,</span><br><span class="line">  664: &#x27;monitor&#x27;,</span><br><span class="line">  665: &#x27;moped&#x27;,</span><br><span class="line">  666: &#x27;mortar&#x27;,</span><br><span class="line">  667: &#x27;mortarboard&#x27;,</span><br><span class="line">  668: &#x27;mosque&#x27;,</span><br><span class="line">  669: &#x27;mosquito net&#x27;,</span><br><span class="line">  670: &#x27;motor scooter, scooter&#x27;,</span><br><span class="line">  671: &#x27;mountain bike, all-terrain bike, off-roader&#x27;,</span><br><span class="line">  672: &#x27;mountain tent&#x27;,</span><br><span class="line">  673: &#x27;mouse, computer mouse&#x27;,</span><br><span class="line">  674: &#x27;mousetrap&#x27;,</span><br><span class="line">  675: &#x27;moving van&#x27;,</span><br><span class="line">  676: &#x27;muzzle&#x27;,</span><br><span class="line">  677: &#x27;nail&#x27;,</span><br><span class="line">  678: &#x27;neck brace&#x27;,</span><br><span class="line">  679: &#x27;necklace&#x27;,</span><br><span class="line">  680: &#x27;nipple&#x27;,</span><br><span class="line">  681: &#x27;notebook, notebook computer&#x27;,</span><br><span class="line">  682: &#x27;obelisk&#x27;,</span><br><span class="line">  683: &#x27;oboe, hautboy, hautbois&#x27;,</span><br><span class="line">  684: &#x27;ocarina, sweet potato&#x27;,</span><br><span class="line">  685: &#x27;odometer, hodometer, mileometer, milometer&#x27;,</span><br><span class="line">  686: &#x27;oil filter&#x27;,</span><br><span class="line">  687: &#x27;organ, pipe organ&#x27;,</span><br><span class="line">  688: &#x27;oscilloscope, scope, cathode-ray oscilloscope, CRO&#x27;,</span><br><span class="line">  689: &#x27;overskirt&#x27;,</span><br><span class="line">  690: &#x27;oxcart&#x27;,</span><br><span class="line">  691: &#x27;oxygen mask&#x27;,</span><br><span class="line">  692: &#x27;packet&#x27;,</span><br><span class="line">  693: &#x27;paddle, boat paddle&#x27;,</span><br><span class="line">  694: &#x27;paddlewheel, paddle wheel&#x27;,</span><br><span class="line">  695: &#x27;padlock&#x27;,</span><br><span class="line">  696: &#x27;paintbrush&#x27;,</span><br><span class="line">  697: &#x27;pajama, pyjama, pj\&#x27;s, jammies&#x27;,</span><br><span class="line">  698: &#x27;palace&#x27;,</span><br><span class="line">  699: &#x27;panpipe, pandean pipe, syrinx&#x27;,</span><br><span class="line">  700: &#x27;paper towel&#x27;,</span><br><span class="line">  701: &#x27;parachute, chute&#x27;,</span><br><span class="line">  702: &#x27;parallel bars, bars&#x27;,</span><br><span class="line">  703: &#x27;park bench&#x27;,</span><br><span class="line">  704: &#x27;parking meter&#x27;,</span><br><span class="line">  705: &#x27;passenger car, coach, carriage&#x27;,</span><br><span class="line">  706: &#x27;patio, terrace&#x27;,</span><br><span class="line">  707: &#x27;pay-phone, pay-station&#x27;,</span><br><span class="line">  708: &#x27;pedestal, plinth, footstall&#x27;,</span><br><span class="line">  709: &#x27;pencil box, pencil case&#x27;,</span><br><span class="line">  710: &#x27;pencil sharpener&#x27;,</span><br><span class="line">  711: &#x27;perfume, essence&#x27;,</span><br><span class="line">  712: &#x27;Petri dish&#x27;,</span><br><span class="line">  713: &#x27;photocopier&#x27;,</span><br><span class="line">  714: &#x27;pick, plectrum, plectron&#x27;,</span><br><span class="line">  715: &#x27;pickelhaube&#x27;,</span><br><span class="line">  716: &#x27;picket fence, paling&#x27;,</span><br><span class="line">  717: &#x27;pickup, pickup truck&#x27;,</span><br><span class="line">  718: &#x27;pier&#x27;,</span><br><span class="line">  719: &#x27;piggy bank, penny bank&#x27;,</span><br><span class="line">  720: &#x27;pill bottle&#x27;,</span><br><span class="line">  721: &#x27;pillow&#x27;,</span><br><span class="line">  722: &#x27;ping-pong ball&#x27;,</span><br><span class="line">  723: &#x27;pinwheel&#x27;,</span><br><span class="line">  724: &#x27;pirate, pirate ship&#x27;,</span><br><span class="line">  725: &#x27;pitcher, ewer&#x27;,</span><br><span class="line">  726: &#x27;plane, carpenter\&#x27;s plane, woodworking plane&#x27;,</span><br><span class="line">  727: &#x27;planetarium&#x27;,</span><br><span class="line">  728: &#x27;plastic bag&#x27;,</span><br><span class="line">  729: &#x27;plate rack&#x27;,</span><br><span class="line">  730: &#x27;plow, plough&#x27;,</span><br><span class="line">  731: &#x27;plunger, plumber\&#x27;s helper&#x27;,</span><br><span class="line">  732: &#x27;Polaroid camera, Polaroid Land camera&#x27;,</span><br><span class="line">  733: &#x27;pole&#x27;,</span><br><span class="line">  734: &#x27;police van, police wagon, paddy wagon, patrol wagon, wagon, black &#x27; +</span><br><span class="line">      &#x27;Maria&#x27;,</span><br><span class="line">  735: &#x27;poncho&#x27;,</span><br><span class="line">  736: &#x27;pool table, billiard table, snooker table&#x27;,</span><br><span class="line">  737: &#x27;pop bottle, soda bottle&#x27;,</span><br><span class="line">  738: &#x27;pot, flowerpot&#x27;,</span><br><span class="line">  739: &#x27;potter\&#x27;s wheel&#x27;,</span><br><span class="line">  740: &#x27;power drill&#x27;,</span><br><span class="line">  741: &#x27;prayer rug, prayer mat&#x27;,</span><br><span class="line">  742: &#x27;printer&#x27;,</span><br><span class="line">  743: &#x27;prison, prison house&#x27;,</span><br><span class="line">  744: &#x27;projectile, missile&#x27;,</span><br><span class="line">  745: &#x27;projector&#x27;,</span><br><span class="line">  746: &#x27;puck, hockey puck&#x27;,</span><br><span class="line">  747: &#x27;punching bag, punch bag, punching ball, punchball&#x27;,</span><br><span class="line">  748: &#x27;purse&#x27;,</span><br><span class="line">  749: &#x27;quill, quill pen&#x27;,</span><br><span class="line">  750: &#x27;quilt, comforter, comfort, puff&#x27;,</span><br><span class="line">  751: &#x27;racer, race car, racing car&#x27;,</span><br><span class="line">  752: &#x27;racket, racquet&#x27;,</span><br><span class="line">  753: &#x27;radiator&#x27;,</span><br><span class="line">  754: &#x27;radio, wireless&#x27;,</span><br><span class="line">  755: &#x27;radio telescope, radio reflector&#x27;,</span><br><span class="line">  756: &#x27;rain barrel&#x27;,</span><br><span class="line">  757: &#x27;recreational vehicle, RV, R.V.&#x27;,</span><br><span class="line">  758: &#x27;reel&#x27;,</span><br><span class="line">  759: &#x27;reflex camera&#x27;,</span><br><span class="line">  760: &#x27;refrigerator, icebox&#x27;,</span><br><span class="line">  761: &#x27;remote control, remote&#x27;,</span><br><span class="line">  762: &#x27;restaurant, eating house, eating place, eatery&#x27;,</span><br><span class="line">  763: &#x27;revolver, six-gun, six-shooter&#x27;,</span><br><span class="line">  764: &#x27;rifle&#x27;,</span><br><span class="line">  765: &#x27;rocking chair, rocker&#x27;,</span><br><span class="line">  766: &#x27;rotisserie&#x27;,</span><br><span class="line">  767: &#x27;rubber eraser, rubber, pencil eraser&#x27;,</span><br><span class="line">  768: &#x27;rugby ball&#x27;,</span><br><span class="line">  769: &#x27;rule, ruler&#x27;,</span><br><span class="line">  770: &#x27;running shoe&#x27;,</span><br><span class="line">  771: &#x27;safe&#x27;,</span><br><span class="line">  772: &#x27;safety pin&#x27;,</span><br><span class="line">  773: &#x27;saltshaker, salt shaker&#x27;,</span><br><span class="line">  774: &#x27;sandal&#x27;,</span><br><span class="line">  775: &#x27;sarong&#x27;,</span><br><span class="line">  776: &#x27;sax, saxophone&#x27;,</span><br><span class="line">  777: &#x27;scabbard&#x27;,</span><br><span class="line">  778: &#x27;scale, weighing machine&#x27;,</span><br><span class="line">  779: &#x27;school bus&#x27;,</span><br><span class="line">  780: &#x27;schooner&#x27;,</span><br><span class="line">  781: &#x27;scoreboard&#x27;,</span><br><span class="line">  782: &#x27;screen, CRT screen&#x27;,</span><br><span class="line">  783: &#x27;screw&#x27;,</span><br><span class="line">  784: &#x27;screwdriver&#x27;,</span><br><span class="line">  785: &#x27;seat belt, seatbelt&#x27;,</span><br><span class="line">  786: &#x27;sewing machine&#x27;,</span><br><span class="line">  787: &#x27;shield, buckler&#x27;,</span><br><span class="line">  788: &#x27;shoe shop, shoe-shop, shoe store&#x27;,</span><br><span class="line">  789: &#x27;shoji&#x27;,</span><br><span class="line">  790: &#x27;shopping basket&#x27;,</span><br><span class="line">  791: &#x27;shopping cart&#x27;,</span><br><span class="line">  792: &#x27;shovel&#x27;,</span><br><span class="line">  793: &#x27;shower cap&#x27;,</span><br><span class="line">  794: &#x27;shower curtain&#x27;,</span><br><span class="line">  795: &#x27;ski&#x27;,</span><br><span class="line">  796: &#x27;ski mask&#x27;,</span><br><span class="line">  797: &#x27;sleeping bag&#x27;,</span><br><span class="line">  798: &#x27;slide rule, slipstick&#x27;,</span><br><span class="line">  799: &#x27;sliding door&#x27;,</span><br><span class="line">  800: &#x27;slot, one-armed bandit&#x27;,</span><br><span class="line">  801: &#x27;snorkel&#x27;,</span><br><span class="line">  802: &#x27;snowmobile&#x27;,</span><br><span class="line">  803: &#x27;snowplow, snowplough&#x27;,</span><br><span class="line">  804: &#x27;soap dispenser&#x27;,</span><br><span class="line">  805: &#x27;soccer ball&#x27;,</span><br><span class="line">  806: &#x27;sock&#x27;,</span><br><span class="line">  807: &#x27;solar dish, solar collector, solar furnace&#x27;,</span><br><span class="line">  808: &#x27;sombrero&#x27;,</span><br><span class="line">  809: &#x27;soup bowl&#x27;,</span><br><span class="line">  810: &#x27;space bar&#x27;,</span><br><span class="line">  811: &#x27;space heater&#x27;,</span><br><span class="line">  812: &#x27;space shuttle&#x27;,</span><br><span class="line">  813: &#x27;spatula&#x27;,</span><br><span class="line">  814: &#x27;speedboat&#x27;,</span><br><span class="line">  815: &#x27;spider web, spider\&#x27;s web&#x27;,</span><br><span class="line">  816: &#x27;spindle&#x27;,</span><br><span class="line">  817: &#x27;sports car, sport car&#x27;,</span><br><span class="line">  818: &#x27;spotlight, spot&#x27;,</span><br><span class="line">  819: &#x27;stage&#x27;,</span><br><span class="line">  820: &#x27;steam locomotive&#x27;,</span><br><span class="line">  821: &#x27;steel arch bridge&#x27;,</span><br><span class="line">  822: &#x27;steel drum&#x27;,</span><br><span class="line">  823: &#x27;stethoscope&#x27;,</span><br><span class="line">  824: &#x27;stole&#x27;,</span><br><span class="line">  825: &#x27;stone wall&#x27;,</span><br><span class="line">  826: &#x27;stopwatch, stop watch&#x27;,</span><br><span class="line">  827: &#x27;stove&#x27;,</span><br><span class="line">  828: &#x27;strainer&#x27;,</span><br><span class="line">  829: &#x27;streetcar, tram, tramcar, trolley, trolley car&#x27;,</span><br><span class="line">  830: &#x27;stretcher&#x27;,</span><br><span class="line">  831: &#x27;studio couch, day bed&#x27;,</span><br><span class="line">  832: &#x27;stupa, tope&#x27;,</span><br><span class="line">  833: &#x27;submarine, pigboat, sub, U-boat&#x27;,</span><br><span class="line">  834: &#x27;suit, suit of clothes&#x27;,</span><br><span class="line">  835: &#x27;sundial&#x27;,</span><br><span class="line">  836: &#x27;sunglass&#x27;,</span><br><span class="line">  837: &#x27;sunglasses, dark glasses, shades&#x27;,</span><br><span class="line">  838: &#x27;sunscreen, sunblock, sun blocker&#x27;,</span><br><span class="line">  839: &#x27;suspension bridge&#x27;,</span><br><span class="line">  840: &#x27;swab, swob, mop&#x27;,</span><br><span class="line">  841: &#x27;sweatshirt&#x27;,</span><br><span class="line">  842: &#x27;swimming trunks, bathing trunks&#x27;,</span><br><span class="line">  843: &#x27;swing&#x27;,</span><br><span class="line">  844: &#x27;switch, electric switch, electrical switch&#x27;,</span><br><span class="line">  845: &#x27;syringe&#x27;,</span><br><span class="line">  846: &#x27;table lamp&#x27;,</span><br><span class="line">  847: &#x27;tank, army tank, armored combat vehicle, armoured combat vehicle&#x27;,</span><br><span class="line">  848: &#x27;tape player&#x27;,</span><br><span class="line">  849: &#x27;teapot&#x27;,</span><br><span class="line">  850: &#x27;teddy, teddy bear&#x27;,</span><br><span class="line">  851: &#x27;television, television system&#x27;,</span><br><span class="line">  852: &#x27;tennis ball&#x27;,</span><br><span class="line">  853: &#x27;thatch, thatched roof&#x27;,</span><br><span class="line">  854: &#x27;theater curtain, theatre curtain&#x27;,</span><br><span class="line">  855: &#x27;thimble&#x27;,</span><br><span class="line">  856: &#x27;thresher, thrasher, threshing machine&#x27;,</span><br><span class="line">  857: &#x27;throne&#x27;,</span><br><span class="line">  858: &#x27;tile roof&#x27;,</span><br><span class="line">  859: &#x27;toaster&#x27;,</span><br><span class="line">  860: &#x27;tobacco shop, tobacconist shop, tobacconist&#x27;,</span><br><span class="line">  861: &#x27;toilet seat&#x27;,</span><br><span class="line">  862: &#x27;torch&#x27;,</span><br><span class="line">  863: &#x27;totem pole&#x27;,</span><br><span class="line">  864: &#x27;tow truck, tow car, wrecker&#x27;,</span><br><span class="line">  865: &#x27;toyshop&#x27;,</span><br><span class="line">  866: &#x27;tractor&#x27;,</span><br><span class="line">  867: &#x27;trailer truck, tractor trailer, trucking rig, rig, articulated &#x27; +</span><br><span class="line">      &#x27;lorry, semi&#x27;,</span><br><span class="line">  868: &#x27;tray&#x27;,</span><br><span class="line">  869: &#x27;trench coat&#x27;,</span><br><span class="line">  870: &#x27;tricycle, trike, velocipede&#x27;,</span><br><span class="line">  871: &#x27;trimaran&#x27;,</span><br><span class="line">  872: &#x27;tripod&#x27;,</span><br><span class="line">  873: &#x27;triumphal arch&#x27;,</span><br><span class="line">  874: &#x27;trolleybus, trolley coach, trackless trolley&#x27;,</span><br><span class="line">  875: &#x27;trombone&#x27;,</span><br><span class="line">  876: &#x27;tub, vat&#x27;,</span><br><span class="line">  877: &#x27;turnstile&#x27;,</span><br><span class="line">  878: &#x27;typewriter keyboard&#x27;,</span><br><span class="line">  879: &#x27;umbrella&#x27;,</span><br><span class="line">  880: &#x27;unicycle, monocycle&#x27;,</span><br><span class="line">  881: &#x27;upright, upright piano&#x27;,</span><br><span class="line">  882: &#x27;vacuum, vacuum cleaner&#x27;,</span><br><span class="line">  883: &#x27;vase&#x27;,</span><br><span class="line">  884: &#x27;vault&#x27;,</span><br><span class="line">  885: &#x27;velvet&#x27;,</span><br><span class="line">  886: &#x27;vending machine&#x27;,</span><br><span class="line">  887: &#x27;vestment&#x27;,</span><br><span class="line">  888: &#x27;viaduct&#x27;,</span><br><span class="line">  889: &#x27;violin, fiddle&#x27;,</span><br><span class="line">  890: &#x27;volleyball&#x27;,</span><br><span class="line">  891: &#x27;waffle iron&#x27;,</span><br><span class="line">  892: &#x27;wall clock&#x27;,</span><br><span class="line">  893: &#x27;wallet, billfold, notecase, pocketbook&#x27;,</span><br><span class="line">  894: &#x27;wardrobe, closet, press&#x27;,</span><br><span class="line">  895: &#x27;warplane, military plane&#x27;,</span><br><span class="line">  896: &#x27;washbasin, handbasin, washbowl, lavabo, wash-hand basin&#x27;,</span><br><span class="line">  897: &#x27;washer, automatic washer, washing machine&#x27;,</span><br><span class="line">  898: &#x27;water bottle&#x27;,</span><br><span class="line">  899: &#x27;water jug&#x27;,</span><br><span class="line">  900: &#x27;water tower&#x27;,</span><br><span class="line">  901: &#x27;whiskey jug&#x27;,</span><br><span class="line">  902: &#x27;whistle&#x27;,</span><br><span class="line">  903: &#x27;wig&#x27;,</span><br><span class="line">  904: &#x27;window screen&#x27;,</span><br><span class="line">  905: &#x27;window shade&#x27;,</span><br><span class="line">  906: &#x27;Windsor tie&#x27;,</span><br><span class="line">  907: &#x27;wine bottle&#x27;,</span><br><span class="line">  908: &#x27;wing&#x27;,</span><br><span class="line">  909: &#x27;wok&#x27;,</span><br><span class="line">  910: &#x27;wooden spoon&#x27;,</span><br><span class="line">  911: &#x27;wool, woolen, woollen&#x27;,</span><br><span class="line">  912: &#x27;worm fence, snake fence, snake-rail fence, Virginia fence&#x27;,</span><br><span class="line">  913: &#x27;wreck&#x27;,</span><br><span class="line">  914: &#x27;yawl&#x27;,</span><br><span class="line">  915: &#x27;yurt&#x27;,</span><br><span class="line">  916: &#x27;web site, website, internet site, site&#x27;,</span><br><span class="line">  917: &#x27;comic book&#x27;,</span><br><span class="line">  918: &#x27;crossword puzzle, crossword&#x27;,</span><br><span class="line">  919: &#x27;street sign&#x27;,</span><br><span class="line">  920: &#x27;traffic light, traffic signal, stoplight&#x27;,</span><br><span class="line">  921: &#x27;book jacket, dust cover, dust jacket, dust wrapper&#x27;,</span><br><span class="line">  922: &#x27;menu&#x27;,</span><br><span class="line">  923: &#x27;plate&#x27;,</span><br><span class="line">  924: &#x27;guacamole&#x27;,</span><br><span class="line">  925: &#x27;consomme&#x27;,</span><br><span class="line">  926: &#x27;hot pot, hotpot&#x27;,</span><br><span class="line">  927: &#x27;trifle&#x27;,</span><br><span class="line">  928: &#x27;ice cream, icecream&#x27;,</span><br><span class="line">  929: &#x27;ice lolly, lolly, lollipop, popsicle&#x27;,</span><br><span class="line">  930: &#x27;French loaf&#x27;,</span><br><span class="line">  931: &#x27;bagel, beigel&#x27;,</span><br><span class="line">  932: &#x27;pretzel&#x27;,</span><br><span class="line">  933: &#x27;cheeseburger&#x27;,</span><br><span class="line">  934: &#x27;hotdog, hot dog, red hot&#x27;,</span><br><span class="line">  935: &#x27;mashed potato&#x27;,</span><br><span class="line">  936: &#x27;head cabbage&#x27;,</span><br><span class="line">  937: &#x27;broccoli&#x27;,</span><br><span class="line">  938: &#x27;cauliflower&#x27;,</span><br><span class="line">  939: &#x27;zucchini, courgette&#x27;,</span><br><span class="line">  940: &#x27;spaghetti squash&#x27;,</span><br><span class="line">  941: &#x27;acorn squash&#x27;,</span><br><span class="line">  942: &#x27;butternut squash&#x27;,</span><br><span class="line">  943: &#x27;cucumber, cuke&#x27;,</span><br><span class="line">  944: &#x27;artichoke, globe artichoke&#x27;,</span><br><span class="line">  945: &#x27;bell pepper&#x27;,</span><br><span class="line">  946: &#x27;cardoon&#x27;,</span><br><span class="line">  947: &#x27;mushroom&#x27;,</span><br><span class="line">  948: &#x27;Granny Smith&#x27;,</span><br><span class="line">  949: &#x27;strawberry&#x27;,</span><br><span class="line">  950: &#x27;orange&#x27;,</span><br><span class="line">  951: &#x27;lemon&#x27;,</span><br><span class="line">  952: &#x27;fig&#x27;,</span><br><span class="line">  953: &#x27;pineapple, ananas&#x27;,</span><br><span class="line">  954: &#x27;banana&#x27;,</span><br><span class="line">  955: &#x27;jackfruit, jak, jack&#x27;,</span><br><span class="line">  956: &#x27;custard apple&#x27;,</span><br><span class="line">  957: &#x27;pomegranate&#x27;,</span><br><span class="line">  958: &#x27;hay&#x27;,</span><br><span class="line">  959: &#x27;carbonara&#x27;,</span><br><span class="line">  960: &#x27;chocolate sauce, chocolate syrup&#x27;,</span><br><span class="line">  961: &#x27;dough&#x27;,</span><br><span class="line">  962: &#x27;meat loaf, meatloaf&#x27;,</span><br><span class="line">  963: &#x27;pizza, pizza pie&#x27;,</span><br><span class="line">  964: &#x27;potpie&#x27;,</span><br><span class="line">  965: &#x27;burrito&#x27;,</span><br><span class="line">  966: &#x27;red wine&#x27;,</span><br><span class="line">  967: &#x27;espresso&#x27;,</span><br><span class="line">  968: &#x27;cup&#x27;,</span><br><span class="line">  969: &#x27;eggnog&#x27;,</span><br><span class="line">  970: &#x27;alp&#x27;,</span><br><span class="line">  971: &#x27;bubble&#x27;,</span><br><span class="line">  972: &#x27;cliff, drop, drop-off&#x27;,</span><br><span class="line">  973: &#x27;coral reef&#x27;,</span><br><span class="line">  974: &#x27;geyser&#x27;,</span><br><span class="line">  975: &#x27;lakeside, lakeshore&#x27;,</span><br><span class="line">  976: &#x27;promontory, headland, head, foreland&#x27;,</span><br><span class="line">  977: &#x27;sandbar, sand bar&#x27;,</span><br><span class="line">  978: &#x27;seashore, coast, seacoast, sea-coast&#x27;,</span><br><span class="line">  979: &#x27;valley, vale&#x27;,</span><br><span class="line">  980: &#x27;volcano&#x27;,</span><br><span class="line">  981: &#x27;ballplayer, baseball player&#x27;,</span><br><span class="line">  982: &#x27;groom, bridegroom&#x27;,</span><br><span class="line">  983: &#x27;scuba diver&#x27;,</span><br><span class="line">  984: &#x27;rapeseed&#x27;,</span><br><span class="line">  985: &#x27;daisy&#x27;,</span><br><span class="line">  986: &#x27;yellow lady\&#x27;s slipper, yellow lady-slipper, Cypripedium calceolus, &#x27; +</span><br><span class="line">      &#x27;Cypripedium parviflorum&#x27;,</span><br><span class="line">  987: &#x27;corn&#x27;,</span><br><span class="line">  988: &#x27;acorn&#x27;,</span><br><span class="line">  989: &#x27;hip, rose hip, rosehip&#x27;,</span><br><span class="line">  990: &#x27;buckeye, horse chestnut, conker&#x27;,</span><br><span class="line">  991: &#x27;coral fungus&#x27;,</span><br><span class="line">  992: &#x27;agaric&#x27;,</span><br><span class="line">  993: &#x27;gyromitra&#x27;,</span><br><span class="line">  994: &#x27;stinkhorn, carrion fungus&#x27;,</span><br><span class="line">  995: &#x27;earthstar&#x27;,</span><br><span class="line">  996: &#x27;hen-of-the-woods, hen of the woods, Polyporus frondosus, Grifola &#x27; +</span><br><span class="line">      &#x27;frondosa&#x27;,</span><br><span class="line">  997: &#x27;bolete&#x27;,</span><br><span class="line">  998: &#x27;ear, spike, capitulum&#x27;,</span><br><span class="line">  999: &#x27;toilet tissue, toilet paper, bathroom tissue&#x27;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>utils.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">export function file2img(f) &#123;</span><br><span class="line">    return new Promise(resolve =&gt; &#123;</span><br><span class="line">        const reader = new FileReader();</span><br><span class="line">        reader.readAsDataURL(f);</span><br><span class="line">        reader.onload = (e) =&gt; &#123;</span><br><span class="line">            const img = document.createElement(&#x27;img&#x27;);</span><br><span class="line">            img.src = e.target.result;</span><br><span class="line">            img.width = 224;</span><br><span class="line">            img.height = 224;</span><br><span class="line">            img.onload = () =&gt; resolve(img);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>script.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">import * as tf from &#x27;@tensorflow/tfjs&#x27;;</span><br><span class="line">import &#123; IMAGENET_CLASSES &#125; from &#x27;./imagenet_classes&#x27;;</span><br><span class="line">import &#123; file2img &#125; from &#x27;./utils&#x27;;</span><br><span class="line"></span><br><span class="line">const MOBILENET_MODEL_PATH = &#x27;http://127.0.0.1:8080/mobilenet/web_model/model.json&#x27;;</span><br><span class="line"></span><br><span class="line">window.onload = async () =&gt; &#123;</span><br><span class="line">    const model = await tf.loadLayersModel(MOBILENET_MODEL_PATH);</span><br><span class="line">    window.predict = async (file) =&gt; &#123;</span><br><span class="line">        const img = await file2img(file);</span><br><span class="line">        document.body.appendChild(img);</span><br><span class="line">        const pred = tf.tidy(() =&gt; &#123;</span><br><span class="line">            const input = tf.browser.fromPixels(img)</span><br><span class="line">                .toFloat()</span><br><span class="line">                .sub(255 / 2)</span><br><span class="line">                .div(255 / 2)</span><br><span class="line">                .reshape([1, 224, 224, 3]);</span><br><span class="line">            return model.predict(input);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        const index = pred.argMax(1).dataSync()[0];</span><br><span class="line">        setTimeout(() =&gt; &#123;</span><br><span class="line">            alert(`预测结果：$&#123;IMAGENET_CLASSES[index]&#125;`);</span><br><span class="line">        &#125;, 0);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>index.html</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;input type=&quot;file&quot; onchange=&quot;predict(this.files[0])&quot;&gt;</span><br></pre></td></tr></table></figure>



      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/05/09/tfjs-study2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="wangzhiwei">
      <meta itemprop="description" content="javascript nodejs web developer...">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WBlog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/05/09/tfjs-study2/" class="post-title-link" itemprop="url">tfjs-study2</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-05-09 20:03:12" itemprop="dateCreated datePublished" datetime="2025-05-09T20:03:12+08:00">2025-05-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-05-10 09:37:59" itemprop="dateModified" datetime="2025-05-10T09:37:59+08:00">2025-05-10</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="手写数字识别-使用卷积神经网络"><a href="#手写数字识别-使用卷积神经网络" class="headerlink" title="手写数字识别 - 使用卷积神经网络"></a>手写数字识别 - 使用卷积神经网络</h2><p><img src="/../images/tfjs/45.png"></p>
<p><img src="/../images/tfjs/46.png"></p>
<p><img src="/../images/tfjs/47.png"></p>
<p><img src="/../images/tfjs/48.png"></p>
<p><img src="/../images/tfjs/49.png"></p>
<p><img src="/../images/tfjs/50.png"></p>
<p><img src="/../images/tfjs/51.png"></p>
<p><img src="/../images/tfjs/52.png"></p>
<p>为什么要用卷积神经网络？</p>
<p>图片数据量大，运算量大， 200 * 200 * 3 &#x3D; 120，000</p>
<p>卷积神经网络模拟人类视觉处理流程，高效提取特征</p>
<p>卷积神经网络的层</p>
<h2 id="卷积层：提取特征"><a href="#卷积层：提取特征" class="headerlink" title="卷积层：提取特征"></a>卷积层：提取特征</h2><p>跟着 image kernels （卷积核） 了解卷积运算</p>
<p><a target="_blank" rel="noopener" href="https://setosa.io/ev/image-kernels/">https://setosa.io/ev/image-kernels/</a></p>
<p><img src="/../images/tfjs/53.png"></p>
<p><img src="/../images/tfjs/54.png"></p>
<p>使用多个卷积核（filter&#x2F; kernel）对图像进行卷积操作</p>
<p><a target="_blank" rel="noopener" href="https://cs231n.github.io/convolutional-networks/">https://cs231n.github.io/convolutional-networks/</a></p>
<p><img src="/../images/tfjs/55.png"></p>
<p>卷积层有权重需要需要训练，卷积核就是权重</p>
<h2 id="池化层：用于提取最强的特征，扩大感受野，减少计算量，没有权重需要训练"><a href="#池化层：用于提取最强的特征，扩大感受野，减少计算量，没有权重需要训练" class="headerlink" title="池化层：用于提取最强的特征，扩大感受野，减少计算量，没有权重需要训练"></a>池化层：用于提取最强的特征，扩大感受野，减少计算量，没有权重需要训练</h2><p><img src="/../images/tfjs/56.png"></p>
<h2 id="全连接层：-作为输出层，作为分类器，有权重需要训练"><a href="#全连接层：-作为输出层，作为分类器，有权重需要训练" class="headerlink" title="全连接层： 作为输出层，作为分类器，有权重需要训练"></a>全连接层： 作为输出层，作为分类器，有权重需要训练</h2><p>relu : 从 0 和 x  中选择最大的，小于0 的部分变成 0，大于0 的部分不变</p>
<p><img src="/../images/tfjs/57.png"></p>
<p>http-server -p 8080 –cors</p>
<p><img src="/../images/tfjs/58.png"></p>
<p><img src="/../images/tfjs/59.png"></p>
<p>data.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * @license</span><br><span class="line"> * Copyright 2018 Google LLC. All Rights Reserved.</span><br><span class="line"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span><br><span class="line"> * you may not use this file except in compliance with the License.</span><br><span class="line"> * You may obtain a copy of the License at</span><br><span class="line"> *</span><br><span class="line"> * http://www.apache.org/licenses/LICENSE-2.0</span><br><span class="line"> *</span><br><span class="line"> * Unless required by applicable law or agreed to in writing, software</span><br><span class="line"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span><br><span class="line"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span><br><span class="line"> * See the License for the specific language governing permissions and</span><br><span class="line"> * limitations under the License.</span><br><span class="line"> * =============================================================================</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">import * as tf from &#x27;@tensorflow/tfjs&#x27;;</span><br><span class="line"></span><br><span class="line">const IMAGE_SIZE = 784;</span><br><span class="line">const NUM_CLASSES = 10;</span><br><span class="line">const NUM_DATASET_ELEMENTS = 65000;</span><br><span class="line"></span><br><span class="line">const TRAIN_TEST_RATIO = 5 / 6;</span><br><span class="line"></span><br><span class="line">const NUM_TRAIN_ELEMENTS = Math.floor(TRAIN_TEST_RATIO * NUM_DATASET_ELEMENTS);</span><br><span class="line">const NUM_TEST_ELEMENTS = NUM_DATASET_ELEMENTS - NUM_TRAIN_ELEMENTS;</span><br><span class="line"></span><br><span class="line">const MNIST_IMAGES_SPRITE_PATH =</span><br><span class="line">    &#x27;http://127.0.0.1:8080/mnist/mnist_images.png&#x27;;</span><br><span class="line">const MNIST_LABELS_PATH =</span><br><span class="line">    &#x27;http://127.0.0.1:8080/mnist/mnist_labels_uint8&#x27;;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * A class that fetches the sprited MNIST dataset and returns shuffled batches.</span><br><span class="line"> *</span><br><span class="line"> * NOTE: This will get much easier. For now, we do data fetching and</span><br><span class="line"> * manipulation manually.</span><br><span class="line"> */</span><br><span class="line">export class MnistData &#123;</span><br><span class="line">  constructor() &#123;</span><br><span class="line">    this.shuffledTrainIndex = 0;</span><br><span class="line">    this.shuffledTestIndex = 0;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  async load() &#123;</span><br><span class="line">    // Make a request for the MNIST sprited image.</span><br><span class="line">    const img = new Image();</span><br><span class="line">    const canvas = document.createElement(&#x27;canvas&#x27;);</span><br><span class="line">    const ctx = canvas.getContext(&#x27;2d&#x27;);</span><br><span class="line">    const imgRequest = new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">      img.crossOrigin = &#x27;&#x27;;</span><br><span class="line">      img.onload = () =&gt; &#123;</span><br><span class="line">        img.width = img.naturalWidth;</span><br><span class="line">        img.height = img.naturalHeight;</span><br><span class="line"></span><br><span class="line">        const datasetBytesBuffer =</span><br><span class="line">            new ArrayBuffer(NUM_DATASET_ELEMENTS * IMAGE_SIZE * 4);</span><br><span class="line"></span><br><span class="line">        const chunkSize = 5000;</span><br><span class="line">        canvas.width = img.width;</span><br><span class="line">        canvas.height = chunkSize;</span><br><span class="line"></span><br><span class="line">        for (let i = 0; i &lt; NUM_DATASET_ELEMENTS / chunkSize; i++) &#123;</span><br><span class="line">          const datasetBytesView = new Float32Array(</span><br><span class="line">              datasetBytesBuffer, i * IMAGE_SIZE * chunkSize * 4,</span><br><span class="line">              IMAGE_SIZE * chunkSize);</span><br><span class="line">          ctx.drawImage(</span><br><span class="line">              img, 0, i * chunkSize, img.width, chunkSize, 0, 0, img.width,</span><br><span class="line">              chunkSize);</span><br><span class="line"></span><br><span class="line">          const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);</span><br><span class="line"></span><br><span class="line">          for (let j = 0; j &lt; imageData.data.length / 4; j++) &#123;</span><br><span class="line">            // All channels hold an equal value since the image is grayscale, so</span><br><span class="line">            // just read the red channel.</span><br><span class="line">            datasetBytesView[j] = imageData.data[j * 4] / 255;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        this.datasetImages = new Float32Array(datasetBytesBuffer);</span><br><span class="line"></span><br><span class="line">        resolve();</span><br><span class="line">      &#125;;</span><br><span class="line">      img.src = MNIST_IMAGES_SPRITE_PATH;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    const labelsRequest = fetch(MNIST_LABELS_PATH);</span><br><span class="line">    const [imgResponse, labelsResponse] =</span><br><span class="line">        await Promise.all([imgRequest, labelsRequest]);</span><br><span class="line"></span><br><span class="line">    this.datasetLabels = new Uint8Array(await labelsResponse.arrayBuffer());</span><br><span class="line"></span><br><span class="line">    // Create shuffled indices into the train/test set for when we select a</span><br><span class="line">    // random dataset element for training / validation.</span><br><span class="line">    this.trainIndices = tf.util.createShuffledIndices(NUM_TRAIN_ELEMENTS);</span><br><span class="line">    this.testIndices = tf.util.createShuffledIndices(NUM_TEST_ELEMENTS);</span><br><span class="line"></span><br><span class="line">    // Slice the the images and labels into train and test sets.</span><br><span class="line">    this.trainImages =</span><br><span class="line">        this.datasetImages.slice(0, IMAGE_SIZE * NUM_TRAIN_ELEMENTS);</span><br><span class="line">    this.testImages = this.datasetImages.slice(IMAGE_SIZE * NUM_TRAIN_ELEMENTS);</span><br><span class="line">    this.trainLabels =</span><br><span class="line">        this.datasetLabels.slice(0, NUM_CLASSES * NUM_TRAIN_ELEMENTS);</span><br><span class="line">    this.testLabels =</span><br><span class="line">        this.datasetLabels.slice(NUM_CLASSES * NUM_TRAIN_ELEMENTS);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  nextTrainBatch(batchSize) &#123;</span><br><span class="line">    return this.nextBatch(</span><br><span class="line">        batchSize, [this.trainImages, this.trainLabels], () =&gt; &#123;</span><br><span class="line">          this.shuffledTrainIndex =</span><br><span class="line">              (this.shuffledTrainIndex + 1) % this.trainIndices.length;</span><br><span class="line">          return this.trainIndices[this.shuffledTrainIndex];</span><br><span class="line">        &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  nextTestBatch(batchSize) &#123;</span><br><span class="line">    return this.nextBatch(batchSize, [this.testImages, this.testLabels], () =&gt; &#123;</span><br><span class="line">      this.shuffledTestIndex =</span><br><span class="line">          (this.shuffledTestIndex + 1) % this.testIndices.length;</span><br><span class="line">      return this.testIndices[this.shuffledTestIndex];</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  nextBatch(batchSize, data, index) &#123;</span><br><span class="line">    const batchImagesArray = new Float32Array(batchSize * IMAGE_SIZE);</span><br><span class="line">    const batchLabelsArray = new Uint8Array(batchSize * NUM_CLASSES);</span><br><span class="line"></span><br><span class="line">    for (let i = 0; i &lt; batchSize; i++) &#123;</span><br><span class="line">      const idx = index();</span><br><span class="line"></span><br><span class="line">      const image =</span><br><span class="line">          data[0].slice(idx * IMAGE_SIZE, idx * IMAGE_SIZE + IMAGE_SIZE);</span><br><span class="line">      batchImagesArray.set(image, i * IMAGE_SIZE);</span><br><span class="line"></span><br><span class="line">      const label =</span><br><span class="line">          data[1].slice(idx * NUM_CLASSES, idx * NUM_CLASSES + NUM_CLASSES);</span><br><span class="line">      batchLabelsArray.set(label, i * NUM_CLASSES);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    const xs = tf.tensor2d(batchImagesArray, [batchSize, IMAGE_SIZE]);</span><br><span class="line">    const labels = tf.tensor2d(batchLabelsArray, [batchSize, NUM_CLASSES]);</span><br><span class="line"></span><br><span class="line">    return &#123;xs, labels&#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>script.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><span class="line">import * as tf from &#x27;@tensorflow/tfjs&#x27;;</span><br><span class="line">import * as tfvis from &#x27;@tensorflow/tfjs-vis&#x27;;</span><br><span class="line">import &#123; MnistData &#125; from &#x27;./data&#x27;;</span><br><span class="line"></span><br><span class="line">window.onload = async () =&gt; &#123;</span><br><span class="line">    const data = new MnistData();</span><br><span class="line">    await data.load();</span><br><span class="line">    const examples = data.nextTestBatch(20);</span><br><span class="line"></span><br><span class="line">    console.log(examples)</span><br><span class="line"></span><br><span class="line">    const surface = tfvis.visor().surface(&#123; name: &#x27;输入示例&#x27; &#125;);</span><br><span class="line">    for (let i = 0; i &lt; 20; i += 1) &#123;</span><br><span class="line">        //tf.tidy 创建一个临时的tensor，当tensor被使用完之后，tf.tidy会自动销毁tensor</span><br><span class="line">        const imageTensor = tf.tidy(() =&gt; &#123;</span><br><span class="line">            return examples.xs</span><br><span class="line">                .slice([i, 0], [1, 784]) // / 获取第i个数据</span><br><span class="line">                .reshape([28, 28, 1]);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        const canvas = document.createElement(&#x27;canvas&#x27;);</span><br><span class="line">        canvas.width = 28;</span><br><span class="line">        canvas.height = 28;</span><br><span class="line">        canvas.style = &#x27;margin: 4px&#x27;;</span><br><span class="line">        await tf.browser.toPixels(imageTensor, canvas); // 将tensor转为canvas</span><br><span class="line">        surface.drawArea.appendChild(canvas); // 添加canvas到surface</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    const model = tf.sequential();</span><br><span class="line">    model.add(tf.layers.conv2d(&#123;</span><br><span class="line">        inputShape: [28, 28, 1],</span><br><span class="line">        kernelSize: 5, // 卷积核大小，奇数有中心点</span><br><span class="line">        filters: 8, // 卷积核数量，即输出通道数量</span><br><span class="line">        strides: 1, // 步长，即卷积核滑动的步长</span><br><span class="line">        activation: &#x27;relu&#x27;,</span><br><span class="line">        kernelInitializer: &#x27;varianceScaling&#x27; // 初始化权重的函数，这里使用varianceScaling，即权重初始化为0，方差为1</span><br><span class="line">    &#125;));</span><br><span class="line"></span><br><span class="line">    //  池化层，将输入的图片缩小，即缩小图片的分辨率，但图片内容不变</span><br><span class="line">    model.add(tf.layers.maxPool2d(&#123;</span><br><span class="line">        poolSize: [2, 2], // 池化核大小</span><br><span class="line">        strides: [2, 2] // 滑动步长</span><br><span class="line">    &#125;));</span><br><span class="line">    model.add(tf.layers.conv2d(&#123;</span><br><span class="line">        kernelSize: 5,</span><br><span class="line">        filters: 16,</span><br><span class="line">        strides: 1,</span><br><span class="line">        activation: &#x27;relu&#x27;,</span><br><span class="line">        kernelInitializer: &#x27;varianceScaling&#x27;</span><br><span class="line">    &#125;));</span><br><span class="line">    model.add(tf.layers.maxPool2d(&#123;</span><br><span class="line">        poolSize: [2, 2],</span><br><span class="line">        strides: [2, 2]</span><br><span class="line">    &#125;));</span><br><span class="line">    model.add(tf.layers.flatten()); // 展平，将二维数组变为一维数组</span><br><span class="line"></span><br><span class="line">    model.add(tf.layers.dropout(&#123; rate: 0.9 &#125;)); // 防止过拟合，随机丢弃一些神经元</span><br><span class="line"></span><br><span class="line">    model.add(tf.layers.dense(&#123;</span><br><span class="line">        units: 10, // 0-9 10个分类</span><br><span class="line">        activation: &#x27;softmax&#x27;, // 输出为0-9的概率</span><br><span class="line">        kernelInitializer: &#x27;varianceScaling&#x27; // 权重初始化为0，方差为1</span><br><span class="line">    &#125;));</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    model.compile(&#123;</span><br><span class="line">        loss: &#x27;categoricalCrossentropy&#x27;, // 交叉熵损失函数，用于多分类</span><br><span class="line">        optimizer: tf.train.adam(), // Adam优化器，用于训练</span><br><span class="line">        metrics: [&#x27;accuracy&#x27;] // 准确率</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    const [trainXs, trainYs] = tf.tidy(() =&gt; &#123;</span><br><span class="line">        const d = data.nextTrainBatch(1000); //  获取训练数据 1000个训练数据</span><br><span class="line"></span><br><span class="line">        console.log(d)</span><br><span class="line"></span><br><span class="line">        return [</span><br><span class="line">            d.xs.reshape([1000, 28, 28, 1]),</span><br><span class="line">            d.labels</span><br><span class="line">        ];</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    const [testXs, testYs] = tf.tidy(() =&gt; &#123;</span><br><span class="line">        const d = data.nextTestBatch(200); // 获取测试数据</span><br><span class="line">        return [</span><br><span class="line">            d.xs.reshape([200, 28, 28, 1]),</span><br><span class="line">            d.labels</span><br><span class="line">        ];</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    await model.fit(trainXs, trainYs, &#123;</span><br><span class="line">        validationData: [testXs, testYs],</span><br><span class="line">        batchSize: 50,</span><br><span class="line">        epochs: 100,</span><br><span class="line">        callbacks: tfvis.show.fitCallbacks(</span><br><span class="line">            &#123; name: &#x27;训练效果&#x27; &#125;,</span><br><span class="line">            [&#x27;loss&#x27;, &#x27;val_loss&#x27;, &#x27;acc&#x27;, &#x27;val_acc&#x27;],</span><br><span class="line">            &#123; callbacks: [&#x27;onEpochEnd&#x27;] &#125;</span><br><span class="line">        )</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    const canvas = document.querySelector(&#x27;canvas&#x27;);</span><br><span class="line"></span><br><span class="line">    canvas.addEventListener(&#x27;mousemove&#x27;, (e) =&gt; &#123;</span><br><span class="line">        if (e.buttons === 1) &#123; // 左键按下</span><br><span class="line">            const ctx = canvas.getContext(&#x27;2d&#x27;);</span><br><span class="line">            ctx.fillStyle = &#x27;rgb(255,255,255)&#x27;; // 白色</span><br><span class="line">            ctx.fillRect(e.offsetX, e.offsetY, 25, 25); // 画一个25*25的矩形</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    window.clear = () =&gt; &#123;</span><br><span class="line">        const ctx = canvas.getContext(&#x27;2d&#x27;);</span><br><span class="line">        ctx.fillStyle = &#x27;rgb(0,0,0)&#x27;; // 黑色</span><br><span class="line">        ctx.fillRect(0, 0, 300, 300); // 填充一个黑色</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    clear();</span><br><span class="line"></span><br><span class="line">    window.predict = () =&gt; &#123;</span><br><span class="line">        const input = tf.tidy(() =&gt; &#123;</span><br><span class="line">            return tf.image.resizeBilinear( // 缩放图片</span><br><span class="line">                tf.browser.fromPixels(canvas), // 缩放图片</span><br><span class="line">                [28, 28], // 缩放后的大小</span><br><span class="line">                true // 是否保持图片的宽高比</span><br><span class="line">            ).slice([0, 0, 0], [28, 28, 1]) // 将彩色图片转换为黑白图片 获取图片的像素</span><br><span class="line">            .toFloat() // 转换为浮点数</span><br><span class="line">            .div(255) // 转换为0-1</span><br><span class="line">            .reshape([1, 28, 28, 1]); // 转换为张量</span><br><span class="line">        &#125;);</span><br><span class="line">        const pred = model.predict(input).argMax(1);</span><br><span class="line">        alert(`预测结果为 $&#123;pred.dataSync()[0]&#125;`);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>index.html</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;canvas width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 2px solid #666;&quot;&gt;&lt;/canvas&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;button onclick=&quot;window.clear();&quot; style=&quot;margin: 4px;&quot;&gt;清除&lt;/button&gt;</span><br><span class="line">&lt;button onclick=&quot;window.predict();&quot; style=&quot;margin: 4px;&quot;&gt;预测&lt;/button&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/04/28/tfjs-study/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="wangzhiwei">
      <meta itemprop="description" content="javascript nodejs web developer...">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WBlog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/04/28/tfjs-study/" class="post-title-link" itemprop="url">tfjs-study</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-04-28 18:01:37" itemprop="dateCreated datePublished" datetime="2025-04-28T18:01:37+08:00">2025-04-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-05-09 20:02:15" itemprop="dateModified" datetime="2025-05-09T20:02:15+08:00">2025-05-09</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="机器学习是什么？"><a href="#机器学习是什么？" class="headerlink" title="机器学习是什么？"></a>机器学习是什么？</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">机器学习是对能通过经验自动改进的计算机算法的研究。</span><br><span class="line"></span><br><span class="line">机器学习是研究</span><br><span class="line">机器学习是计算机算法的研究</span><br><span class="line">机器学习是对（经验）自动改进的计算机算法的研究。</span><br><span class="line"></span><br><span class="line">机器学习是用（数据）或以往的（经验），以此优化计算机程序的性能标准。</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="机器学习例子-线性回归"><a href="#机器学习例子-线性回归" class="headerlink" title="机器学习例子 - 线性回归"></a>机器学习例子 - 线性回归</h3><p><img src="/../images/tfjs/01.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="机器学习例子-逻辑回归"><a href="#机器学习例子-逻辑回归" class="headerlink" title="机器学习例子 - 逻辑回归"></a>机器学习例子 - 逻辑回归</h3><p><img src="/../images/tfjs/02.png"></p>
<h3 id="机器学习例子-图片分类"><a href="#机器学习例子-图片分类" class="headerlink" title="机器学习例子 - 图片分类"></a>机器学习例子 - 图片分类</h3><p><img src="/../images/tfjs/03.png"></p>
<h3 id="机器学习例子-语音助手"><a href="#机器学习例子-语音助手" class="headerlink" title="机器学习例子 - 语音助手"></a>机器学习例子 - 语音助手</h3><p><img src="/../images/tfjs/04.png"></p>
<h2 id="为何要用机器学习？"><a href="#为何要用机器学习？" class="headerlink" title="为何要用机器学习？"></a>为何要用机器学习？</h2><p>有些棘手问题只能用机器学习来解决<br>获取数据比编写规则更容易<br>GPU等计算能力显著提升</p>
<h2 id="机器学习如何运作？"><a href="#机器学习如何运作？" class="headerlink" title="机器学习如何运作？"></a>机器学习如何运作？</h2><h3 id="神经网络-重点"><a href="#神经网络-重点" class="headerlink" title="神经网络 (重点)"></a>神经网络 (重点)</h3><h3 id="2、决策树、支持向量机、贝叶斯分类器、强化学习…"><a href="#2、决策树、支持向量机、贝叶斯分类器、强化学习…" class="headerlink" title="2、决策树、支持向量机、贝叶斯分类器、强化学习…"></a>2、决策树、支持向量机、贝叶斯分类器、强化学习…</h3><h2 id="神经网络"><a href="#神经网络" class="headerlink" title="神经网络"></a>神经网络</h2><h3 id="什么是神经网络？"><a href="#什么是神经网络？" class="headerlink" title="什么是神经网络？"></a>什么是神经网络？</h3><p>在本课程中，指的是人工神经网络</p>
<p>人工神经网络是一种运算模型（就是输入输出的映射），由大量的节点（或称神经元）之间相互连接构成</p>
<p><img src="/../images/tfjs/05.png"></p>
<p>在上图中显示的是双层神经网络</p>
<p>每个神经元里存储着若干 权重（weight）、偏置（bias）和一个激活函数（activation function） </p>
<p>计算过程：输入乘上权重，加上偏置，再经过激活函数得到输出</p>
<p>激活函数 用于添加一些非线性变化，不能一直线性增长</p>
<p>神经网络通常包括一个输入层、若干个隐藏层、一个输出层</p>
<p>输入层通常不用于计算神经网络的层数</p>
<h2 id="什么是神经网络训练？"><a href="#什么是神经网络训练？" class="headerlink" title="什么是神经网络训练？"></a>什么是神经网络训练？</h2><p>给大量输入和输出，算出神经网络里所有神经元的权重和偏置，然后给定新的输入，可以算出新的输出<br>在机器学习里输入输出被称为特征和标签，大量的输入和输出被称为训练集</p>
<p>例子：<br>给1000个相亲对象的数据(特征),和对应的满意程度(标签),训练完后,给一份新的相亲对象的数据,就可以判定满意程度了。</p>
<h2 id="如何训练神经网络？"><a href="#如何训练神经网络？" class="headerlink" title="如何训练神经网络？"></a>如何训练神经网络？</h2><p>初始化：随机生成一些权重和偏置<br>计算损失：给定特征，计算出标签，得到它与真实标签的差距<br>优化：微调权重和偏置，让差距（损失）变小</p>
<p>前向传播与反向传播<br>前向传播：将训练数据的特征输入到神经网络，得到预测的标签<br>反向传播：将预测的标签与真实标签比较，得到损失，然后根据损失微调权重和偏置，让差距变小 （计算损失并优化）</p>
<h2 id="如何计算损失？"><a href="#如何计算损失？" class="headerlink" title="如何计算损失？"></a>如何计算损失？</h2><p>使用损失函数<br>本课称涉及的损失函数：均方误差、对数损失、交叉熵损失<br>了解原理即可，工作中可以直接从第三方库中调用。tensorflow.js 中调用</p>
<h2 id="如何优化？"><a href="#如何优化？" class="headerlink" title="如何优化？"></a>如何优化？</h2><p>使用优化器<br>本课称涉及的优化器：随机梯度下降（SGD）、Adam<br>了解原理即可，工作中可以直接从第三方库中调用。tensorflow.js 中调用</p>
<h2 id="tensorflow-js-是什么"><a href="#tensorflow-js-是什么" class="headerlink" title="tensorflow.js 是什么"></a>tensorflow.js 是什么</h2><p>tensorflow.js 是一个开源的机器学习库，基于 TensorFlow 的 JavaScript 实现。<br>可以直接在浏览器和Node.js 中使用机器学习技术了</p>
<h2 id="tensorflow-js-具体功能"><a href="#tensorflow-js-具体功能" class="headerlink" title="tensorflow.js 具体功能"></a>tensorflow.js 具体功能</h2><p>运行现有模型<br>重新训练现有模型<br>使用 JavaScript 开发机器学习模型</p>
<p><img src="/../images/tfjs/06.png"></p>
<h2 id="什么是-Tensor"><a href="#什么是-Tensor" class="headerlink" title="什么是 Tensor ?"></a>什么是 Tensor ?</h2><p>中文名叫张量<br>张量是向量和矩阵向更高维度的推广<br>相当于多维数组</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import * as tf from &#x27;@tensorflow/tfjs&#x27;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const t0 = tf.tensor(1);</span><br><span class="line">t0.print();</span><br><span class="line">console.log(t0);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="/../images/tfjs/07.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const t1 = tf.tensor([1, 2]);</span><br><span class="line">t1.print();</span><br><span class="line"></span><br><span class="line">console.log(t1);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/../images/tfjs/08.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">const t2 = tf.tensor([[1, 2], [3, 4]]);</span><br><span class="line"></span><br><span class="line">t2.print();</span><br><span class="line">console.log(t2);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="/../images/tfjs/09.png"></p>
<h2 id="Tensor和机器学习的关系"><a href="#Tensor和机器学习的关系" class="headerlink" title="Tensor和机器学习的关系"></a>Tensor和机器学习的关系</h2><p><img src="/../images/tfjs/10.png"></p>
<p>神经网络的每一层要存储N维数据<br>N层的For循环运算<br>Tensor作为高维数据结构完美解决以上问题</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">import * as tf from &#x27;@tensorflow/tfjs&#x27;;</span><br><span class="line"></span><br><span class="line">// 传统 for 循环</span><br><span class="line">const input = [1, 2, 3, 4];</span><br><span class="line">const w = [[1, 2, 3, 4], [2, 3, 4, 5], [3, 4, 5, 6], [4, 5, 6, 7]];</span><br><span class="line">const output = [0, 0, 0, 0];</span><br><span class="line"></span><br><span class="line">for (let i = 0; i &lt; w.length; i++) &#123;</span><br><span class="line">    for (let j = 0; j &lt; input.length; j++) &#123;</span><br><span class="line">        output[i] += input[j] * w[i][j];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log(output);</span><br><span class="line"></span><br><span class="line">tf.tensor(w).dot(tf.tensor(input)).print();</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/../images/tfjs/11.png"></p>
<p><img src="/../images/tfjs/12.png"></p>
<p><img src="/../images/tfjs/13.png"></p>
<p>什么是线性回归？<br>利用数理统计中回归分析，来确定两种或两种以上变量间相互依赖的定量关系的一种统计分析方法。</p>
<p>例子：身高体重预测、房价预测</p>
<p>操作步骤<br>准备、可视化训练数据</p>
<p>使用TensorFlow.js的API 构建神经网络（只有一个神经元）</p>
<p>训练模型并预测</p>
<p>tf-vis 文档<br><a target="_blank" rel="noopener" href="https://js.tensorflow.org/api_vis/1.5.1/#render.scatterplot">https://js.tensorflow.org/api_vis/1.5.1/#render.scatterplot</a></p>
<p>定义模型结构：</p>
<p>单层单个神经元组成的神经网络</p>
<p>linear-study<br>.<br>├── dist<br>├── index.html<br>├── node_modules<br>├── package-lock.json<br>├── package.json<br>└── script.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">index.html</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">import * as tfvis from &#x27;@tensorflow/tfjs-vis&#x27;;</span><br><span class="line"></span><br><span class="line">window.onload = function () &#123;</span><br><span class="line"></span><br><span class="line">    const xs = [1,2,3,4]</span><br><span class="line">    const ys = [1,3,5,7]</span><br><span class="line"></span><br><span class="line">    tfvis.render.scatterplot(</span><br><span class="line">        &#123; name: &#x27;Linear Regression&#x27; &#125;,</span><br><span class="line">        &#123; values: xs.map((x, i) =&gt; (&#123; x, y: ys[i] &#125;)) &#125;,</span><br><span class="line">        // &#123;</span><br><span class="line">        //     xLabel: &#x27;X&#x27;,</span><br><span class="line">        //     yLabel: &#x27;Y&#x27;,</span><br><span class="line">        //     height: 300,</span><br><span class="line">        // &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            xAxisDomain: [0, 10],</span><br><span class="line">            yAxisDomain: [0, 10]</span><br><span class="line">        &#125;</span><br><span class="line">    );</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    // const model = tf.sequential(); //创建模型 （连续的模型）</span><br><span class="line">    // model.add(tf.layers.dense(&#123; units: 1, inputShape: [1] &#125;)); //添加层 dense全连接层 输入维度为1 输出维度为1 units为输出维度 units 神经元的个数 https://js.tensorflow.org/api/4.22.0/#layers.dense</span><br><span class="line">    // model.compile(&#123; loss: tf.losses.meanSquaredError, optimizer: tf.train.sgd(0.1) &#125;); //编译模型 meanSquaredError MSE 均方误差损失函数 sgd 随机梯度下降 优化器</span><br><span class="line">    // </span><br><span class="line">    // const xs = tf.tensor2d([0, 1, 2, 3], [4, 1]);</span><br><span class="line">    // const ys = tf.tensor2d([0, 1, 2, 3], [4, 1]);</span><br><span class="line">    </span><br><span class="line">    // const container = &#123;</span><br><span class="line">    //     name: &#x27;Linear Regression&#x27;,</span><br><span class="line">    //     styles: &#123;</span><br><span class="line">    //     height: &#x27;1000px&#x27;,</span><br><span class="line">    //     width: &#x27;1000px&#x27;,</span><br><span class="line">    //     &#125;,</span><br><span class="line">    // &#125;;</span><br><span class="line">    </span><br><span class="line">    // const surface = tfvis.visor().surface(container);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/../images/tfjs/14.png"></p>
<p><img src="/../images/tfjs/15.png"></p>
<p><img src="/../images/tfjs/16.png"></p>
<p>cnpm i parcel-bundler -g</p>
<p>parcel index2.html</p>
<p>cnpm 安装  @tensorflow&#x2F;tfjs 报错，改为 </p>
<p>npm install @tensorflow&#x2F;tfjs 就没问题了</p>
<p>线性回归，训练模型并可视化训练过程</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import * as tf from &#x27;@tensorflow/tfjs&#x27;;</span><br><span class="line">import * as tfvis from &#x27;@tensorflow/tfjs-vis&#x27;;</span><br><span class="line"></span><br><span class="line">window.onload = async () =&gt; &#123;</span><br><span class="line">    const xs = [1, 2, 3, 4];</span><br><span class="line">    const ys = [1, 3, 5, 7];</span><br><span class="line"></span><br><span class="line">    tfvis.render.scatterplot(</span><br><span class="line">        &#123; name: &#x27;线性回归训练集&#x27; &#125;,</span><br><span class="line">        &#123; values: xs.map((x, i) =&gt; (&#123; x, y: ys[i] &#125;)) &#125;,</span><br><span class="line">        &#123; xAxisDomain: [0, 5], yAxisDomain: [0, 8] &#125;</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    const model = tf.sequential();</span><br><span class="line">    model.add(tf.layers.dense(&#123; units: 1, inputShape: [1] &#125;));</span><br><span class="line">    // sgd 是随机梯度下降 meanSquaredError 是均方误差</span><br><span class="line">    model.compile(&#123; loss: tf.losses.meanSquaredError, optimizer: tf.train.sgd(0.1) &#125;); </span><br><span class="line"></span><br><span class="line">    const inputs = tf.tensor(xs);</span><br><span class="line">    const labels = tf.tensor(ys);</span><br><span class="line">    await model.fit(inputs, labels, &#123;</span><br><span class="line">        batchSize: 4,</span><br><span class="line">        epochs: 200,</span><br><span class="line">        callbacks: tfvis.show.fitCallbacks(</span><br><span class="line">            &#123; name: &#x27;训练过程&#x27; &#125;,</span><br><span class="line">            [&#x27;loss&#x27;]</span><br><span class="line">        )</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    const output = model.predict(tf.tensor([5]));</span><br><span class="line">    alert(`如果 x 为 5，那么预测 y 为 $&#123;output.dataSync()[0]&#125;`);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/../images/tfjs/17.png"></p>
<h2 id="什么是归一化"><a href="#什么是归一化" class="headerlink" title="什么是归一化"></a>什么是归一化</h2><p>把大数量级特征转化到较小的数量级下，通常是 0-1 之间，或者 -1-1 之间。</p>
<p>绝大多数 TensorFlow.js 模型都不是给特别大的数设计的</p>
<p>将不同数量级的特征归一化到同一数量级，防止某个特征影响过大</p>
<p>例子：身高体重预测、房价预测</p>
<p>准备身高体重训练数据并归一化</p>
<p>训练模型并预测，将结果反归一化为正常数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">import * as tf from &#x27;@tensorflow/tfjs&#x27;;</span><br><span class="line">import * as tfvis from &#x27;@tensorflow/tfjs-vis&#x27;;</span><br><span class="line"></span><br><span class="line">window.onload = async () =&gt; &#123;</span><br><span class="line">    const heights = [150, 160, 170];</span><br><span class="line">    const weights = [40, 50, 60];</span><br><span class="line"></span><br><span class="line">    tfvis.render.scatterplot(</span><br><span class="line">        &#123; name: &#x27;身高体重训练数据&#x27; &#125;,</span><br><span class="line">        &#123; values: heights.map((x, i) =&gt; (&#123; x, y: weights[i] &#125;)) &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            xAxisDomain: [140, 180],</span><br><span class="line">            yAxisDomain: [30, 70]</span><br><span class="line">        &#125;</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    const inputs = tf.tensor(heights).sub(150).div(20);</span><br><span class="line">    const labels = tf.tensor(weights).sub(40).div(20);</span><br><span class="line"></span><br><span class="line">    const model = tf.sequential();</span><br><span class="line">    model.add(tf.layers.dense(&#123; units: 1, inputShape: [1] &#125;));</span><br><span class="line">    model.compile(&#123; loss: tf.losses.meanSquaredError, optimizer: tf.train.sgd(0.1) &#125;);</span><br><span class="line"></span><br><span class="line">    await model.fit(inputs, labels, &#123;</span><br><span class="line">        batchSize: 3,</span><br><span class="line">        epochs: 200,</span><br><span class="line">        callbacks: tfvis.show.fitCallbacks(</span><br><span class="line">            &#123; name: &#x27;训练过程&#x27; &#125;,</span><br><span class="line">            [&#x27;loss&#x27;]</span><br><span class="line">        )</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    const output = model.predict(tf.tensor([180]).sub(150).div(20));</span><br><span class="line">    alert(`如果身高为 180cm，那么预测体重为 $&#123;output.mul(20).add(40).dataSync()[0]&#125;kg`);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/../images/tfjs/18.png"></p>
<h2 id="逻辑回归"><a href="#逻辑回归" class="headerlink" title="逻辑回归"></a>逻辑回归</h2><p><img src="/../images/tfjs/19.png"></p>
<p>输出概率 （0-1）之间。</p>
<p>采用激活函数处理</p>
<p>加载二分类数据集</p>
<p>定义模型结构：带有激活函数的单个神经元</p>
<p>训练模型并预测</p>
<p>操作步骤：<br>使用预先准备好的脚本生成二分类数据集<br>可视化二分类数据集</p>
<p>data.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">export function getData(numSamples) &#123;</span><br><span class="line">    let points = [];</span><br><span class="line">  </span><br><span class="line">    function genGauss(cx, cy, label) &#123;</span><br><span class="line">      for (let i = 0; i &lt; numSamples / 2; i++) &#123;</span><br><span class="line">        let x = normalRandom(cx);</span><br><span class="line">        let y = normalRandom(cy);</span><br><span class="line">        points.push(&#123; x, y, label &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    genGauss(2, 2, 1);</span><br><span class="line">    genGauss(-2, -2, 0);</span><br><span class="line">    return points;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  /**</span><br><span class="line">   * Samples from a normal distribution. Uses the seedrandom library as the</span><br><span class="line">   * random generator.</span><br><span class="line">   *</span><br><span class="line">   * @param mean The mean. Default is 0.</span><br><span class="line">   * @param variance The variance. Default is 1.</span><br><span class="line">   */</span><br><span class="line">  function normalRandom(mean = 0, variance = 1) &#123;</span><br><span class="line">    let v1, v2, s;</span><br><span class="line">    do &#123;</span><br><span class="line">      v1 = 2 * Math.random() - 1;</span><br><span class="line">      v2 = 2 * Math.random() - 1;</span><br><span class="line">      s = v1 * v1 + v2 * v2;</span><br><span class="line">    &#125; while (s &gt; 1);</span><br><span class="line">  </span><br><span class="line">    let result = Math.sqrt(-2 * Math.log(s) / s) * v1;</span><br><span class="line">    return mean + Math.sqrt(variance) * result;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>script.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">import * as tf from &#x27;@tensorflow/tfjs&#x27;;</span><br><span class="line">import * as tfvis from &#x27;@tensorflow/tfjs-vis&#x27;;</span><br><span class="line">import &#123; getData &#125; from &#x27;./data.js&#x27;;</span><br><span class="line"></span><br><span class="line">window.onload = async () =&gt; &#123;</span><br><span class="line">    const data = getData(400);</span><br><span class="line"></span><br><span class="line">    tfvis.render.scatterplot(</span><br><span class="line">        &#123; name: &#x27;逻辑回归训练数据&#x27; &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            values: [</span><br><span class="line">                data.filter(p =&gt; p.label === 1),</span><br><span class="line">                data.filter(p =&gt; p.label === 0),</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    const model = tf.sequential();</span><br><span class="line">    model.add(tf.layers.dense(&#123;</span><br><span class="line">        units: 1,</span><br><span class="line">        inputShape: [2],</span><br><span class="line">        activation: &#x27;sigmoid&#x27;</span><br><span class="line">    &#125;));</span><br><span class="line">    model.compile(&#123;</span><br><span class="line">        loss: tf.losses.logLoss,</span><br><span class="line">        optimizer: tf.train.adam(0.1)</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    const inputs = tf.tensor(data.map(p =&gt; [p.x, p.y]));</span><br><span class="line">    const labels = tf.tensor(data.map(p =&gt; p.label));</span><br><span class="line"></span><br><span class="line">    await model.fit(inputs, labels, &#123;</span><br><span class="line">        batchSize: 40,</span><br><span class="line">        epochs: 20,</span><br><span class="line">        callbacks: tfvis.show.fitCallbacks(</span><br><span class="line">            &#123; name: &#x27;训练效果&#x27; &#125;,</span><br><span class="line">            [&#x27;loss&#x27;]</span><br><span class="line">        )</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    window.predict = (form) =&gt; &#123;</span><br><span class="line">        const pred = model.predict(tf.tensor([[form.x.value * 1, form.y.value * 1]]));</span><br><span class="line">        alert(`预测结果：$&#123;pred.dataSync()[0]&#125;`);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>html</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;form action=&quot;&quot; onsubmit=&quot;predict(this);return false;&quot;&gt;</span><br><span class="line">    x: &lt;input type=&quot;text&quot; name=&quot;x&quot;&gt;</span><br><span class="line">    y: &lt;input type=&quot;text&quot; name=&quot;y&quot;&gt;</span><br><span class="line">    &lt;button type=&quot;submit&quot;&gt;预测&lt;/button&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>activation: ‘sigmoid’  激活函数 的 函数曲线</p>
<p><img src="/../images/tfjs/20.png"></p>
<p>不管输入有多小，输出都接近 0 不管输入有多大，输出都接近 1</p>
<p>loss: tf.losses.logLoss, 对数损失函数</p>
<p><img src="/../images/tfjs/21.png"></p>
<p><img src="/../images/tfjs/22.png"></p>
<p><img src="/../images/tfjs/23.png"></p>
<p>0的时候无限大，1的时候无限接近0</p>
<p><img src="/../images/tfjs/24.png"></p>
<p><img src="/../images/tfjs/25.png"></p>
<p><img src="/../images/tfjs/26.png"></p>
<h2 id="多层神经网络"><a href="#多层神经网络" class="headerlink" title="多层神经网络"></a>多层神经网络</h2><p>多层神经网络配合激活函数解决复杂的XOR问题 （XOR 异或 两个0 或者两个 1 异或的时候得到的值是 0， 一个 0 和一个 1 异或的时候得到的值是 1）</p>
<p><img src="/../images/tfjs/27.png"></p>
<p>（图中 的点 x,y 都为 正 或者为负的时候，为蓝色的点， x,y 为 一正一负的时候，为黄色的点）</p>
<p><img src="/../images/tfjs/28.png"></p>
<p><img src="/../images/tfjs/29.png"></p>
<p><img src="/../images/tfjs/30.png"></p>
<p>data.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">export function getData(numSamples) &#123;</span><br><span class="line">    let points = [];</span><br><span class="line">  </span><br><span class="line">    function genGauss(cx, cy, label) &#123;</span><br><span class="line">      for (let i = 0; i &lt; numSamples / 2; i++) &#123;</span><br><span class="line">        let x = normalRandom(cx);</span><br><span class="line">        let y = normalRandom(cy);</span><br><span class="line">        points.push(&#123; x, y, label &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    genGauss(2, 2, 0);</span><br><span class="line">    genGauss(-2, -2, 0);</span><br><span class="line">    genGauss(-2, 2, 1);</span><br><span class="line">    genGauss(2, -2, 1);</span><br><span class="line">    return points;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  /**</span><br><span class="line">   * Samples from a normal distribution. Uses the seedrandom library as the</span><br><span class="line">   * random generator.</span><br><span class="line">   *</span><br><span class="line">   * @param mean The mean. Default is 0.</span><br><span class="line">   * @param variance The variance. Default is 1.</span><br><span class="line">   */</span><br><span class="line">  function normalRandom(mean = 0, variance = 1) &#123;</span><br><span class="line">    let v1, v2, s;</span><br><span class="line">    do &#123;</span><br><span class="line">      v1 = 2 * Math.random() - 1;</span><br><span class="line">      v2 = 2 * Math.random() - 1;</span><br><span class="line">      s = v1 * v1 + v2 * v2;</span><br><span class="line">    &#125; while (s &gt; 1);</span><br><span class="line">  </span><br><span class="line">    let result = Math.sqrt(-2 * Math.log(s) / s) * v1;</span><br><span class="line">    return mean + Math.sqrt(variance) * result;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>script.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">import * as tf from &#x27;@tensorflow/tfjs&#x27;;</span><br><span class="line">import * as tfvis from &#x27;@tensorflow/tfjs-vis&#x27;;</span><br><span class="line">import &#123; getData &#125; from &#x27;./data.js&#x27;;</span><br><span class="line"></span><br><span class="line">window.onload = async () =&gt; &#123;</span><br><span class="line">    const data = getData(400);</span><br><span class="line"></span><br><span class="line">    tfvis.render.scatterplot(</span><br><span class="line">        &#123; name: &#x27;XOR 训练数据&#x27; &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            values: [</span><br><span class="line">                data.filter(p =&gt; p.label === 1),</span><br><span class="line">                data.filter(p =&gt; p.label === 0),</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    const model = tf.sequential();</span><br><span class="line">    model.add(tf.layers.dense(&#123;</span><br><span class="line">        units: 8,</span><br><span class="line">        inputShape: [2],</span><br><span class="line">        activation: &#x27;relu&#x27;</span><br><span class="line">    &#125;));</span><br><span class="line">    model.add(tf.layers.dense(&#123;</span><br><span class="line">        units: 8,</span><br><span class="line">        inputShape: [2],</span><br><span class="line">        activation: &#x27;relu&#x27;</span><br><span class="line">    &#125;));</span><br><span class="line">    </span><br><span class="line">    model.add(tf.layers.dense(&#123;</span><br><span class="line">        units: 1,</span><br><span class="line">        activation: &#x27;sigmoid&#x27; // 此处只能使用 sigmoid</span><br><span class="line">    &#125;));</span><br><span class="line">    model.compile(&#123;</span><br><span class="line">        loss: tf.losses.logLoss,</span><br><span class="line">        optimizer: tf.train.adam(0.1)</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    const inputs = tf.tensor(data.map(p =&gt; [p.x, p.y]));</span><br><span class="line">    const labels = tf.tensor(data.map(p =&gt; p.label));</span><br><span class="line"></span><br><span class="line">    await model.fit(inputs, labels, &#123;</span><br><span class="line">        epochs: 10,</span><br><span class="line">        callbacks: tfvis.show.fitCallbacks(</span><br><span class="line">            &#123; name: &#x27;训练效果&#x27; &#125;,</span><br><span class="line">            [&#x27;loss&#x27;]</span><br><span class="line">        )</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    window.predict = (form) =&gt; &#123;</span><br><span class="line">        const pred = model.predict(tf.tensor([[form.x.value * 1, form.y.value * 1]]));</span><br><span class="line">        alert(`预测结果：$&#123;pred.dataSync()[0]&#125;`);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>index.html</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;form action=&quot;&quot; onsubmit=&quot;predict(this);return false;&quot;&gt;</span><br><span class="line">    x: &lt;input type=&quot;text&quot; name=&quot;x&quot;&gt;</span><br><span class="line">    y: &lt;input type=&quot;text&quot; name=&quot;y&quot;&gt;</span><br><span class="line">    &lt;button type=&quot;submit&quot;&gt;预测&lt;/button&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>model.add(tf.layers.dense({<br>        units: 1,<br>        activation: ‘sigmoid’ &#x2F;&#x2F; 此处只能使用 sigmoid<br>    }));</p>
<h2 id="多分类任务"><a href="#多分类任务" class="headerlink" title="多分类任务"></a>多分类任务</h2><p>例子:手写数字，图片内容识别 等…</p>
<p><img src="/../images/tfjs/31.png"></p>
<p>加载 IRIS 数据集 （训练集与验证集）</p>
<p>定义模型结构：带有 softmax（激活函数） 的多层神经网络</p>
<p>softmax 把输出压缩为和为一的三个数值（三个值的和为1 ） human-readable 的概率值，然后把概率值作为分类结果</p>
<p>训练模型并预测</p>
<p>增加准确度 acc 训练集的准确度 和验证集的准确度</p>
<p>model.compile({<br>        loss: ‘categoricalCrossentropy’, &#x2F;&#x2F;交叉熵损失函数<br>        optimizer: tf.train.adam(0.1),<br>        metrics: [‘accuracy’]<br>    });</p>
<p>await model.fit(xTrain, yTrain, {<br>        epochs: 100,<br>        validationData: [xTest, yTest],<br>        callbacks: tfvis.show.fitCallbacks(<br>            { name: ‘训练效果’ },<br>            [‘loss’, ‘val_loss’, ‘acc’, ‘val_acc’],<br>            { callbacks: [‘onEpochEnd’] }<br>        )<br>    });</p>
<p><img src="/../images/tfjs/34.png"></p>
<p><img src="/../images/tfjs/35.png"></p>
<p>data.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * @license</span><br><span class="line"> * Copyright 2018 Google LLC. All Rights Reserved.</span><br><span class="line"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span><br><span class="line"> * you may not use this file except in compliance with the License.</span><br><span class="line"> * You may obtain a copy of the License at</span><br><span class="line"> *</span><br><span class="line"> * http://www.apache.org/licenses/LICENSE-2.0</span><br><span class="line"> *</span><br><span class="line"> * Unless required by applicable law or agreed to in writing, software</span><br><span class="line"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span><br><span class="line"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span><br><span class="line"> * See the License for the specific language governing permissions and</span><br><span class="line"> * limitations under the License.</span><br><span class="line"> * =============================================================================</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">import * as tf from &#x27;@tensorflow/tfjs&#x27;;</span><br><span class="line"></span><br><span class="line">export const IRIS_CLASSES =</span><br><span class="line">    [&#x27;山鸢尾&#x27;, &#x27;变色鸢尾&#x27;, &#x27;维吉尼亚鸢尾&#x27;];</span><br><span class="line">export const IRIS_NUM_CLASSES = IRIS_CLASSES.length;</span><br><span class="line"></span><br><span class="line">// Iris flowers data. Source:</span><br><span class="line">//   https://archive.ics.uci.edu/ml/machine-learning-databases/iris/iris.data</span><br><span class="line">const IRIS_DATA = [</span><br><span class="line">  [5.1, 3.5, 1.4, 0.2, 0], [4.9, 3.0, 1.4, 0.2, 0], [4.7, 3.2, 1.3, 0.2, 0],</span><br><span class="line">  [4.6, 3.1, 1.5, 0.2, 0], [5.0, 3.6, 1.4, 0.2, 0], [5.4, 3.9, 1.7, 0.4, 0],</span><br><span class="line">  [4.6, 3.4, 1.4, 0.3, 0], [5.0, 3.4, 1.5, 0.2, 0], [4.4, 2.9, 1.4, 0.2, 0],</span><br><span class="line">  [4.9, 3.1, 1.5, 0.1, 0], [5.4, 3.7, 1.5, 0.2, 0], [4.8, 3.4, 1.6, 0.2, 0],</span><br><span class="line">  [4.8, 3.0, 1.4, 0.1, 0], [4.3, 3.0, 1.1, 0.1, 0], [5.8, 4.0, 1.2, 0.2, 0],</span><br><span class="line">  [5.7, 4.4, 1.5, 0.4, 0], [5.4, 3.9, 1.3, 0.4, 0], [5.1, 3.5, 1.4, 0.3, 0],</span><br><span class="line">  [5.7, 3.8, 1.7, 0.3, 0], [5.1, 3.8, 1.5, 0.3, 0], [5.4, 3.4, 1.7, 0.2, 0],</span><br><span class="line">  [5.1, 3.7, 1.5, 0.4, 0], [4.6, 3.6, 1.0, 0.2, 0], [5.1, 3.3, 1.7, 0.5, 0],</span><br><span class="line">  [4.8, 3.4, 1.9, 0.2, 0], [5.0, 3.0, 1.6, 0.2, 0], [5.0, 3.4, 1.6, 0.4, 0],</span><br><span class="line">  [5.2, 3.5, 1.5, 0.2, 0], [5.2, 3.4, 1.4, 0.2, 0], [4.7, 3.2, 1.6, 0.2, 0],</span><br><span class="line">  [4.8, 3.1, 1.6, 0.2, 0], [5.4, 3.4, 1.5, 0.4, 0], [5.2, 4.1, 1.5, 0.1, 0],</span><br><span class="line">  [5.5, 4.2, 1.4, 0.2, 0], [4.9, 3.1, 1.5, 0.1, 0], [5.0, 3.2, 1.2, 0.2, 0],</span><br><span class="line">  [5.5, 3.5, 1.3, 0.2, 0], [4.9, 3.1, 1.5, 0.1, 0], [4.4, 3.0, 1.3, 0.2, 0],</span><br><span class="line">  [5.1, 3.4, 1.5, 0.2, 0], [5.0, 3.5, 1.3, 0.3, 0], [4.5, 2.3, 1.3, 0.3, 0],</span><br><span class="line">  [4.4, 3.2, 1.3, 0.2, 0], [5.0, 3.5, 1.6, 0.6, 0], [5.1, 3.8, 1.9, 0.4, 0],</span><br><span class="line">  [4.8, 3.0, 1.4, 0.3, 0], [5.1, 3.8, 1.6, 0.2, 0], [4.6, 3.2, 1.4, 0.2, 0],</span><br><span class="line">  [5.3, 3.7, 1.5, 0.2, 0], [5.0, 3.3, 1.4, 0.2, 0], [7.0, 3.2, 4.7, 1.4, 1],</span><br><span class="line">  [6.4, 3.2, 4.5, 1.5, 1], [6.9, 3.1, 4.9, 1.5, 1], [5.5, 2.3, 4.0, 1.3, 1],</span><br><span class="line">  [6.5, 2.8, 4.6, 1.5, 1], [5.7, 2.8, 4.5, 1.3, 1], [6.3, 3.3, 4.7, 1.6, 1],</span><br><span class="line">  [4.9, 2.4, 3.3, 1.0, 1], [6.6, 2.9, 4.6, 1.3, 1], [5.2, 2.7, 3.9, 1.4, 1],</span><br><span class="line">  [5.0, 2.0, 3.5, 1.0, 1], [5.9, 3.0, 4.2, 1.5, 1], [6.0, 2.2, 4.0, 1.0, 1],</span><br><span class="line">  [6.1, 2.9, 4.7, 1.4, 1], [5.6, 2.9, 3.6, 1.3, 1], [6.7, 3.1, 4.4, 1.4, 1],</span><br><span class="line">  [5.6, 3.0, 4.5, 1.5, 1], [5.8, 2.7, 4.1, 1.0, 1], [6.2, 2.2, 4.5, 1.5, 1],</span><br><span class="line">  [5.6, 2.5, 3.9, 1.1, 1], [5.9, 3.2, 4.8, 1.8, 1], [6.1, 2.8, 4.0, 1.3, 1],</span><br><span class="line">  [6.3, 2.5, 4.9, 1.5, 1], [6.1, 2.8, 4.7, 1.2, 1], [6.4, 2.9, 4.3, 1.3, 1],</span><br><span class="line">  [6.6, 3.0, 4.4, 1.4, 1], [6.8, 2.8, 4.8, 1.4, 1], [6.7, 3.0, 5.0, 1.7, 1],</span><br><span class="line">  [6.0, 2.9, 4.5, 1.5, 1], [5.7, 2.6, 3.5, 1.0, 1], [5.5, 2.4, 3.8, 1.1, 1],</span><br><span class="line">  [5.5, 2.4, 3.7, 1.0, 1], [5.8, 2.7, 3.9, 1.2, 1], [6.0, 2.7, 5.1, 1.6, 1],</span><br><span class="line">  [5.4, 3.0, 4.5, 1.5, 1], [6.0, 3.4, 4.5, 1.6, 1], [6.7, 3.1, 4.7, 1.5, 1],</span><br><span class="line">  [6.3, 2.3, 4.4, 1.3, 1], [5.6, 3.0, 4.1, 1.3, 1], [5.5, 2.5, 4.0, 1.3, 1],</span><br><span class="line">  [5.5, 2.6, 4.4, 1.2, 1], [6.1, 3.0, 4.6, 1.4, 1], [5.8, 2.6, 4.0, 1.2, 1],</span><br><span class="line">  [5.0, 2.3, 3.3, 1.0, 1], [5.6, 2.7, 4.2, 1.3, 1], [5.7, 3.0, 4.2, 1.2, 1],</span><br><span class="line">  [5.7, 2.9, 4.2, 1.3, 1], [6.2, 2.9, 4.3, 1.3, 1], [5.1, 2.5, 3.0, 1.1, 1],</span><br><span class="line">  [5.7, 2.8, 4.1, 1.3, 1], [6.3, 3.3, 6.0, 2.5, 2], [5.8, 2.7, 5.1, 1.9, 2],</span><br><span class="line">  [7.1, 3.0, 5.9, 2.1, 2], [6.3, 2.9, 5.6, 1.8, 2], [6.5, 3.0, 5.8, 2.2, 2],</span><br><span class="line">  [7.6, 3.0, 6.6, 2.1, 2], [4.9, 2.5, 4.5, 1.7, 2], [7.3, 2.9, 6.3, 1.8, 2],</span><br><span class="line">  [6.7, 2.5, 5.8, 1.8, 2], [7.2, 3.6, 6.1, 2.5, 2], [6.5, 3.2, 5.1, 2.0, 2],</span><br><span class="line">  [6.4, 2.7, 5.3, 1.9, 2], [6.8, 3.0, 5.5, 2.1, 2], [5.7, 2.5, 5.0, 2.0, 2],</span><br><span class="line">  [5.8, 2.8, 5.1, 2.4, 2], [6.4, 3.2, 5.3, 2.3, 2], [6.5, 3.0, 5.5, 1.8, 2],</span><br><span class="line">  [7.7, 3.8, 6.7, 2.2, 2], [7.7, 2.6, 6.9, 2.3, 2], [6.0, 2.2, 5.0, 1.5, 2],</span><br><span class="line">  [6.9, 3.2, 5.7, 2.3, 2], [5.6, 2.8, 4.9, 2.0, 2], [7.7, 2.8, 6.7, 2.0, 2],</span><br><span class="line">  [6.3, 2.7, 4.9, 1.8, 2], [6.7, 3.3, 5.7, 2.1, 2], [7.2, 3.2, 6.0, 1.8, 2],</span><br><span class="line">  [6.2, 2.8, 4.8, 1.8, 2], [6.1, 3.0, 4.9, 1.8, 2], [6.4, 2.8, 5.6, 2.1, 2],</span><br><span class="line">  [7.2, 3.0, 5.8, 1.6, 2], [7.4, 2.8, 6.1, 1.9, 2], [7.9, 3.8, 6.4, 2.0, 2],</span><br><span class="line">  [6.4, 2.8, 5.6, 2.2, 2], [6.3, 2.8, 5.1, 1.5, 2], [6.1, 2.6, 5.6, 1.4, 2],</span><br><span class="line">  [7.7, 3.0, 6.1, 2.3, 2], [6.3, 3.4, 5.6, 2.4, 2], [6.4, 3.1, 5.5, 1.8, 2],</span><br><span class="line">  [6.0, 3.0, 4.8, 1.8, 2], [6.9, 3.1, 5.4, 2.1, 2], [6.7, 3.1, 5.6, 2.4, 2],</span><br><span class="line">  [6.9, 3.1, 5.1, 2.3, 2], [5.8, 2.7, 5.1, 1.9, 2], [6.8, 3.2, 5.9, 2.3, 2],</span><br><span class="line">  [6.7, 3.3, 5.7, 2.5, 2], [6.7, 3.0, 5.2, 2.3, 2], [6.3, 2.5, 5.0, 1.9, 2],</span><br><span class="line">  [6.5, 3.0, 5.2, 2.0, 2], [6.2, 3.4, 5.4, 2.3, 2], [5.9, 3.0, 5.1, 1.8, 2],</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Convert Iris data arrays to `tf.Tensor`s.</span><br><span class="line"> *</span><br><span class="line"> * @param data The Iris input feature data, an `Array` of `Array`s, each element</span><br><span class="line"> *   of which is assumed to be a length-4 `Array` (for petal length, petal</span><br><span class="line"> *   width, sepal length, sepal width).</span><br><span class="line"> * @param targets An `Array` of numbers, with values from the set &#123;0, 1, 2&#125;:</span><br><span class="line"> *   representing the true category of the Iris flower. Assumed to have the same</span><br><span class="line"> *   array length as `data`.</span><br><span class="line"> * @param testSplit Fraction of the data at the end to split as test data: a</span><br><span class="line"> *   number between 0 and 1.</span><br><span class="line"> * @return A length-4 `Array`, with</span><br><span class="line"> *   - training data as `tf.Tensor` of shape [numTrainExapmles, 4].</span><br><span class="line"> *   - training one-hot labels as a `tf.Tensor` of shape [numTrainExamples, 3]</span><br><span class="line"> *   - test data as `tf.Tensor` of shape [numTestExamples, 4].</span><br><span class="line"> *   - test one-hot labels as a `tf.Tensor` of shape [numTestExamples, 3]</span><br><span class="line"> */</span><br><span class="line">function convertToTensors(data, targets, testSplit) &#123;</span><br><span class="line">  const numExamples = data.length;</span><br><span class="line">  if (numExamples !== targets.length) &#123;</span><br><span class="line">    throw new Error(&#x27;data and split have different numbers of examples&#x27;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // Randomly shuffle `data` and `targets`.</span><br><span class="line">  const indices = [];</span><br><span class="line">  for (let i = 0; i &lt; numExamples; ++i) &#123;</span><br><span class="line">    indices.push(i);</span><br><span class="line">  &#125;</span><br><span class="line">  tf.util.shuffle(indices);</span><br><span class="line"></span><br><span class="line">  const shuffledData = [];</span><br><span class="line">  const shuffledTargets = [];</span><br><span class="line">  for (let i = 0; i &lt; numExamples; ++i) &#123;</span><br><span class="line">    shuffledData.push(data[indices[i]]);</span><br><span class="line">    shuffledTargets.push(targets[indices[i]]);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // Split the data into a training set and a tet set, based on `testSplit`.</span><br><span class="line">  const numTestExamples = Math.round(numExamples * testSplit);</span><br><span class="line">  const numTrainExamples = numExamples - numTestExamples;</span><br><span class="line"></span><br><span class="line">  const xDims = shuffledData[0].length;</span><br><span class="line"></span><br><span class="line">  // Create a 2D `tf.Tensor` to hold the feature data.</span><br><span class="line">  const xs = tf.tensor2d(shuffledData, [numExamples, xDims]);</span><br><span class="line"></span><br><span class="line">  // Create a 1D `tf.Tensor` to hold the labels, and convert the number label</span><br><span class="line">  // from the set &#123;0, 1, 2&#125; into one-hot encoding (.e.g., 0 --&gt; [1, 0, 0]).</span><br><span class="line">  const ys = tf.oneHot(tf.tensor1d(shuffledTargets).toInt(), IRIS_NUM_CLASSES);</span><br><span class="line"></span><br><span class="line">  // Split the data into training and test sets, using `slice`.</span><br><span class="line">  const xTrain = xs.slice([0, 0], [numTrainExamples, xDims]);</span><br><span class="line">  const xTest = xs.slice([numTrainExamples, 0], [numTestExamples, xDims]);</span><br><span class="line">  const yTrain = ys.slice([0, 0], [numTrainExamples, IRIS_NUM_CLASSES]);</span><br><span class="line">  const yTest = ys.slice([0, 0], [numTestExamples, IRIS_NUM_CLASSES]);</span><br><span class="line">  return [xTrain, yTrain, xTest, yTest];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Obtains Iris data, split into training and test sets.</span><br><span class="line"> *</span><br><span class="line"> * @param testSplit Fraction of the data at the end to split as test data: a</span><br><span class="line"> *   number between 0 and 1.</span><br><span class="line"> *</span><br><span class="line"> * @param return A length-4 `Array`, with</span><br><span class="line"> *   - training data as an `Array` of length-4 `Array` of numbers.</span><br><span class="line"> *   - training labels as an `Array` of numbers, with the same length as the</span><br><span class="line"> *     return training data above. Each element of the `Array` is from the set</span><br><span class="line"> *     &#123;0, 1, 2&#125;.</span><br><span class="line"> *   - test data as an `Array` of length-4 `Array` of numbers.</span><br><span class="line"> *   - test labels as an `Array` of numbers, with the same length as the</span><br><span class="line"> *     return test data above. Each element of the `Array` is from the set</span><br><span class="line"> *     &#123;0, 1, 2&#125;.</span><br><span class="line"> */</span><br><span class="line">export function getIrisData(testSplit) &#123;</span><br><span class="line">  return tf.tidy(() =&gt; &#123;</span><br><span class="line">    const dataByClass = [];</span><br><span class="line">    const targetsByClass = [];</span><br><span class="line">    for (let i = 0; i &lt; IRIS_CLASSES.length; ++i) &#123;</span><br><span class="line">      dataByClass.push([]);</span><br><span class="line">      targetsByClass.push([]);</span><br><span class="line">    &#125;</span><br><span class="line">    for (const example of IRIS_DATA) &#123;</span><br><span class="line">      const target = example[example.length - 1];</span><br><span class="line">      const data = example.slice(0, example.length - 1);</span><br><span class="line">      dataByClass[target].push(data);</span><br><span class="line">      targetsByClass[target].push(target);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    const xTrains = [];</span><br><span class="line">    const yTrains = [];</span><br><span class="line">    const xTests = [];</span><br><span class="line">    const yTests = [];</span><br><span class="line">    for (let i = 0; i &lt; IRIS_CLASSES.length; ++i) &#123;</span><br><span class="line">      const [xTrain, yTrain, xTest, yTest] =</span><br><span class="line">          convertToTensors(dataByClass[i], targetsByClass[i], testSplit);</span><br><span class="line">      xTrains.push(xTrain);</span><br><span class="line">      yTrains.push(yTrain);</span><br><span class="line">      xTests.push(xTest);</span><br><span class="line">      yTests.push(yTest);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    const concatAxis = 0;</span><br><span class="line">    return [</span><br><span class="line">      tf.concat(xTrains, concatAxis), tf.concat(yTrains, concatAxis),</span><br><span class="line">      tf.concat(xTests, concatAxis), tf.concat(yTests, concatAxis)</span><br><span class="line">    ];</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>script.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">import * as tf from &#x27;@tensorflow/tfjs&#x27;;</span><br><span class="line">import * as tfvis from &#x27;@tensorflow/tfjs-vis&#x27;;</span><br><span class="line">import &#123; getIrisData, IRIS_CLASSES &#125; from &#x27;./data&#x27;;</span><br><span class="line"></span><br><span class="line">window.onload = async () =&gt; &#123;</span><br><span class="line">    const [xTrain, yTrain, xTest, yTest] = getIrisData(0.15); // 15% 的数据用作验证集</span><br><span class="line"></span><br><span class="line">    const model = tf.sequential();</span><br><span class="line">    model.add(tf.layers.dense(&#123;</span><br><span class="line">        units: 10,</span><br><span class="line">        inputShape: [xTrain.shape[1]],</span><br><span class="line">        activation: &#x27;sigmoid&#x27;</span><br><span class="line">    &#125;));</span><br><span class="line">    model.add(tf.layers.dense(&#123;</span><br><span class="line">        units: 3,</span><br><span class="line">        activation: &#x27;softmax&#x27;</span><br><span class="line">    &#125;));</span><br><span class="line"></span><br><span class="line">    model.compile(&#123;</span><br><span class="line">        loss: &#x27;categoricalCrossentropy&#x27;,</span><br><span class="line">        optimizer: tf.train.adam(0.1),</span><br><span class="line">        metrics: [&#x27;accuracy&#x27;]</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    await model.fit(xTrain, yTrain, &#123;</span><br><span class="line">        epochs: 100,</span><br><span class="line">        validationData: [xTest, yTest], // 验证集</span><br><span class="line">        callbacks: tfvis.show.fitCallbacks(</span><br><span class="line">            &#123; name: &#x27;训练效果&#x27; &#125;,</span><br><span class="line">            [&#x27;loss&#x27;, &#x27;val_loss&#x27;, &#x27;acc&#x27;, &#x27;val_acc&#x27;],</span><br><span class="line">            &#123; callbacks: [&#x27;onEpochEnd&#x27;] &#125;</span><br><span class="line">        )</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    window.predict = (form) =&gt; &#123;</span><br><span class="line">        const input = tf.tensor([[</span><br><span class="line">            form.a.value * 1,</span><br><span class="line">            form.b.value * 1,</span><br><span class="line">            form.c.value * 1,</span><br><span class="line">            form.d.value * 1,</span><br><span class="line">        ]]);</span><br><span class="line">        const pred = model.predict(input);</span><br><span class="line">        alert(`预测结果：$&#123;IRIS_CLASSES[pred.argMax(1).dataSync(0)]&#125;`);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>index.html</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;form action=&quot;&quot; onsubmit=&quot;predict(this); return false;&quot;&gt;</span><br><span class="line">    花萼长度：&lt;input type=&quot;text&quot; name=&quot;a&quot;&gt;&lt;br&gt;</span><br><span class="line">    花萼宽度：&lt;input type=&quot;text&quot; name=&quot;b&quot;&gt;&lt;br&gt;</span><br><span class="line">    花瓣长度：&lt;input type=&quot;text&quot; name=&quot;c&quot;&gt;&lt;br&gt;</span><br><span class="line">    花瓣宽度：&lt;input type=&quot;text&quot; name=&quot;d&quot;&gt;&lt;br&gt;</span><br><span class="line">    &lt;button type=&quot;submit&quot;&gt;预测&lt;/button&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/../images/tfjs/32.png"><br><img src="/../images/tfjs/33.png"></p>
<h2 id="欠拟合"><a href="#欠拟合" class="headerlink" title="欠拟合"></a>欠拟合</h2><p><img src="/../images/tfjs/36.png"></p>
<p>数据很复杂，模型太简单了，拟合不了这个数据</p>
<p>上图中黑色的线代表的数据，蓝色线是我们的模型，显然蓝色的模型不能拟合黑色的数据，这种情况就叫欠拟合</p>
<p><img src="/../images/tfjs/37.png"></p>
<h2 id="过拟合"><a href="#过拟合" class="headerlink" title="过拟合"></a>过拟合</h2><p><img src="/../images/tfjs/38.png"></p>
<p>模型太过复杂，新数据验证的效果不好</p>
<p>上图中红色的点和蓝色的点代表两类数据，黑色的线代表正常的模型，绿色的线就是过拟合的模型，模型的形态比较混乱</p>
<p><img src="/../images/tfjs/39.png"></p>
<p>经典的过拟合曲线 （红色代表验证集的损失，蓝色的线代表训练集的损失）</p>
<p>训练数据简单，模型太过复杂</p>
<p>应对过拟合的方法：</p>
<ol>
<li>早停法</li>
<li>权重衰减法 kernelRegularizer: tf.regularizers.l2({ l2: 1 })</li>
<li>丢弃法 model.add(tf.layers.dropout({ rate: 0.9 })); 是在神经网络模型中添加一个 dropout 层，用于防止过拟合。<br>等。。。</li>
</ol>
<p><img src="/../images/tfjs/40.png"></p>
<p><img src="/../images/tfjs/41.png"></p>
<p>欠拟合代码</p>
<p>script.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">import * as tf from &#x27;@tensorflow/tfjs&#x27;;</span><br><span class="line">import * as tfvis from &#x27;@tensorflow/tfjs-vis&#x27;;</span><br><span class="line">import &#123; getData &#125; from &#x27;../xor/data&#x27;;</span><br><span class="line"></span><br><span class="line">window.onload = async () =&gt; &#123;</span><br><span class="line">    const data = getData(200);</span><br><span class="line"></span><br><span class="line">    tfvis.render.scatterplot(</span><br><span class="line">        &#123; name: &#x27;训练数据&#x27; &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            values: [</span><br><span class="line">                data.filter(p =&gt; p.label === 1),</span><br><span class="line">                data.filter(p =&gt; p.label === 0),</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    const model = tf.sequential();</span><br><span class="line">    model.add(tf.layers.dense(&#123;</span><br><span class="line">        units: 1,</span><br><span class="line">        inputShape: [2],</span><br><span class="line">        activation: &quot;sigmoid&quot;,</span><br><span class="line">        // kernelRegularizer: tf.regularizers.l2(&#123; l2: 1 &#125;)</span><br><span class="line">    &#125;));</span><br><span class="line"></span><br><span class="line">    model.compile(&#123;</span><br><span class="line">        loss: tf.losses.logLoss,</span><br><span class="line">        optimizer: tf.train.adam(0.1)</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    const inputs = tf.tensor(data.map(p =&gt; [p.x, p.y]));</span><br><span class="line">    const labels = tf.tensor(data.map(p =&gt; p.label));</span><br><span class="line"></span><br><span class="line">    await model.fit(inputs, labels, &#123;</span><br><span class="line">        validationSplit: 0.2,</span><br><span class="line">        epochs: 200,</span><br><span class="line">        callbacks: tfvis.show.fitCallbacks(</span><br><span class="line">            &#123; name: &#x27;训练效果&#x27; &#125;,</span><br><span class="line">            [&#x27;loss&#x27;, &#x27;val_loss&#x27;],</span><br><span class="line">            &#123; callbacks: [&#x27;onEpochEnd&#x27;] &#125;</span><br><span class="line">        )</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/../images/tfjs/42.png"></p>
<p>过拟合代码</p>
<p>data.js 带有噪音的二分类数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">export function getData(numSamples, variance) &#123;</span><br><span class="line">    let points = [];</span><br><span class="line">  </span><br><span class="line">    function genGauss(cx, cy, label) &#123;</span><br><span class="line">      for (let i = 0; i &lt; numSamples / 2; i++) &#123;</span><br><span class="line">        let x = normalRandom(cx, variance);</span><br><span class="line">        let y = normalRandom(cy, variance);</span><br><span class="line">        points.push(&#123; x, y, label &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    genGauss(2, 2, 1);</span><br><span class="line">    genGauss(-2, -2, 0);</span><br><span class="line">    return points;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  /**</span><br><span class="line">   * Samples from a normal distribution. Uses the seedrandom library as the</span><br><span class="line">   * random generator.</span><br><span class="line">   *</span><br><span class="line">   * @param mean The mean. Default is 0.</span><br><span class="line">   * @param variance The variance. Default is 1.</span><br><span class="line">   */</span><br><span class="line">  function normalRandom(mean = 0, variance = 1) &#123;</span><br><span class="line">    let v1, v2, s;</span><br><span class="line">    do &#123;</span><br><span class="line">      v1 = 2 * Math.random() - 1;</span><br><span class="line">      v2 = 2 * Math.random() - 1;</span><br><span class="line">      s = v1 * v1 + v2 * v2;</span><br><span class="line">    &#125; while (s &gt; 1);</span><br><span class="line">  </span><br><span class="line">    let result = Math.sqrt(-2 * Math.log(s) / s) * v1;</span><br><span class="line">    return mean + Math.sqrt(variance) * result;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>script.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">import * as tf from &#x27;@tensorflow/tfjs&#x27;;</span><br><span class="line">import * as tfvis from &#x27;@tensorflow/tfjs-vis&#x27;;</span><br><span class="line">import &#123; getData &#125; from &#x27;./data&#x27;;</span><br><span class="line"></span><br><span class="line">window.onload = async () =&gt; &#123;</span><br><span class="line">    const data = getData(200, 2);</span><br><span class="line"></span><br><span class="line">    tfvis.render.scatterplot(</span><br><span class="line">        &#123; name: &#x27;训练数据&#x27; &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            values: [</span><br><span class="line">                data.filter(p =&gt; p.label === 1),</span><br><span class="line">                data.filter(p =&gt; p.label === 0),</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    const model = tf.sequential();</span><br><span class="line">    model.add(tf.layers.dense(&#123;</span><br><span class="line">        units: 10,</span><br><span class="line">        inputShape: [2],</span><br><span class="line">        activation: &quot;tanh&quot;,</span><br><span class="line">        // kernelRegularizer: tf.regularizers.l2(&#123; l2: 1 &#125;)</span><br><span class="line">    &#125;));</span><br><span class="line">    model.add(tf.layers.dropout(&#123; rate: 0.9 &#125;));</span><br><span class="line">    model.add(tf.layers.dense(&#123;</span><br><span class="line">        units: 1,</span><br><span class="line">        activation: &#x27;sigmoid&#x27;</span><br><span class="line">    &#125;));</span><br><span class="line">    model.compile(&#123;</span><br><span class="line">        loss: tf.losses.logLoss,</span><br><span class="line">        optimizer: tf.train.adam(0.1)</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    const inputs = tf.tensor(data.map(p =&gt; [p.x, p.y]));</span><br><span class="line">    const labels = tf.tensor(data.map(p =&gt; p.label));</span><br><span class="line"></span><br><span class="line">    await model.fit(inputs, labels, &#123;</span><br><span class="line">        validationSplit: 0.2,</span><br><span class="line">        epochs: 200,</span><br><span class="line">        callbacks: tfvis.show.fitCallbacks(</span><br><span class="line">            &#123; name: &#x27;训练效果&#x27; &#125;,</span><br><span class="line">            [&#x27;loss&#x27;, &#x27;val_loss&#x27;],</span><br><span class="line">            &#123; callbacks: [&#x27;onEpochEnd&#x27;] &#125;</span><br><span class="line">        )</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>index.html</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/../images/tfjs/43.png"></p>
<p>设置权重衰减：kernelRegularizer: tf.regularizers.l2({ l2: 1 }) 结果如下图</p>
<p><img src="/../images/tfjs/44.png"></p>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://playground.tensorflow.org/#activation=tanh&batchSize=10&dataset=circle&regDataset=reg-plane&learningRate=0.03&regularizationRate=0&noise=0&networkShape=4,2&seed=0.94941&showTestData=false&discretize=false&percTrainData=50&x=true&y=true&xTimesY=false&xSquared=false&ySquared=false&cosX=false&sinX=false&cosY=false&sinY=false&collectStats=false&problem=classification&initZero=false&hideText=false">https://playground.tensorflow.org/#activation=tanh&amp;batchSize=10&amp;dataset=circle&amp;regDataset=reg-plane&amp;learningRate=0.03&amp;regularizationRate=0&amp;noise=0&amp;networkShape=4,2&amp;seed=0.94941&amp;showTestData=false&amp;discretize=false&amp;percTrainData=50&amp;x=true&amp;y=true&amp;xTimesY=false&amp;xSquared=false&amp;ySquared=false&amp;cosX=false&amp;sinX=false&amp;cosY=false&amp;sinY=false&amp;collectStats=false&amp;problem=classification&amp;initZero=false&amp;hideText=false</a></p>
<p><a target="_blank" rel="noopener" href="https://js.tensorflow.org/api/latest/?hl=zh-cn&_gl=1*nv702p*_ga*MjExOTY1MjIyNi4xNzQ1ODI3MTc0*_ga_W0YLR4190T*MTc0NTgzMTA0MC4yLjEuMTc0NTgzMjU4OC4wLjAuMA..#dot">https://js.tensorflow.org/api/latest/?hl=zh-cn&amp;_gl=1*nv702p*_ga*MjExOTY1MjIyNi4xNzQ1ODI3MTc0*_ga_W0YLR4190T*MTc0NTgzMTA0MC4yLjEuMTc0NTgzMjU4OC4wLjAuMA..#dot</a></p>
<p>google机器学习课程 course<br><a target="_blank" rel="noopener" href="https://developers.google.com/machine-learning/crash-course/linear-regression?hl=zh-cn">https://developers.google.com/machine-learning/crash-course/linear-regression?hl=zh-cn</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1p2BWYVEik?spm_id_from=333.788.player.switch&vd_source=ffda878df0ed45bee1ade91d8f451048&p=10">https://www.bilibili.com/video/BV1p2BWYVEik?spm_id_from=333.788.player.switch&amp;vd_source=ffda878df0ed45bee1ade91d8f451048&amp;p=10</a></p>
<p>kimi问答<br><a target="_blank" rel="noopener" href="https://kimi.moonshot.cn/chat/d0dcjumf2kqelc31foc0">https://kimi.moonshot.cn/chat/d0dcjumf2kqelc31foc0</a></p>
<p><a target="_blank" rel="noopener" href="https://ml-cheatsheet.readthedocs.io/en/latest/loss_functions.html?highlight=cross#cross-entropy">https://ml-cheatsheet.readthedocs.io/en/latest/loss_functions.html?highlight=cross#cross-entropy</a></p>
<pre><code>
</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/04/25/ollama-serve-%E5%A6%82%E4%BD%95%E8%AE%A9%E8%BF%9B%E7%A8%8B%E4%B8%80%E7%9B%B4%E5%9C%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="wangzhiwei">
      <meta itemprop="description" content="javascript nodejs web developer...">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WBlog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/04/25/ollama-serve-%E5%A6%82%E4%BD%95%E8%AE%A9%E8%BF%9B%E7%A8%8B%E4%B8%80%E7%9B%B4%E5%9C%A8/" class="post-title-link" itemprop="url">ollama serve 如何让进程一直在</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-04-25 14:18:16 / 修改时间：14:18:49" itemprop="dateCreated datePublished" datetime="2025-04-25T14:18:16+08:00">2025-04-25</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>以下是几种让 <code>ollama serve</code> 进程一直运行的方法：</p>
<h3 id="使用-screen-工具"><a href="#使用-screen-工具" class="headerlink" title="使用 screen 工具"></a>使用 <code>screen</code> 工具</h3><ol>
<li>安装 <code>screen</code>（如果尚未安装）：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install screen</span><br></pre></td></tr></table></figure></li>
<li>创建一个新的 <code>screen</code> 会话并运行 <code>ollama serve</code>：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">screen -S ollama_session</span><br><span class="line">ollama serve</span><br></pre></td></tr></table></figure></li>
<li>按下 <code>Ctrl+A</code> 然后按下 <code>D</code>，将当前会话分离，此时 <code>ollama serve</code> 将在后台继续运行。</li>
</ol>
<h3 id="使用-tmux-工具"><a href="#使用-tmux-工具" class="headerlink" title="使用 tmux 工具"></a>使用 <code>tmux</code> 工具</h3><ol>
<li>安装 <code>tmux</code>（如果尚未安装）：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install tmux</span><br></pre></td></tr></table></figure></li>
<li>创建一个新的 <code>tmux</code> 会话并运行 <code>ollama serve</code>：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tmux new -s ollama_session</span><br><span class="line">ollama serve</span><br></pre></td></tr></table></figure></li>
<li>按下 <code>Ctrl+B</code> 然后按下 <code>D</code>，将当前会话分离，<code>ollama serve</code> 会在后台持续运行。</li>
</ol>
<h3 id="使用-nohup-命令"><a href="#使用-nohup-命令" class="headerlink" title="使用 nohup 命令"></a>使用 <code>nohup</code> 命令</h3><p>执行以下命令来后台运行 Ollama：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">nohup</span> ollama serve &amp;</span><br></pre></td></tr></table></figure>
<p>这会生成一个名为 <code>nohup.out</code> 的文件，用于存储输出日志。</p>
<h3 id="使用-systemd-管理服务（仅限-Linux）"><a href="#使用-systemd-管理服务（仅限-Linux）" class="headerlink" title="使用 systemd 管理服务（仅限 Linux）"></a>使用 <code>systemd</code> 管理服务（仅限 Linux）</h3><ol>
<li>创建服务文件：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> nano /etc/systemd/system/ollama.service</span><br></pre></td></tr></table></figure></li>
<li>在文件中添加以下内容：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Ollama AI Service</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=simple</span><br><span class="line">User=&lt;your-username&gt;</span><br><span class="line">WorkingDirectory=/path/to/ollama</span><br><span class="line">ExecStart=/usr/bin/ollama serve</span><br><span class="line">Restart=on-failure</span><br><span class="line">Environment=&quot;OLLAMA_HOST=0.0.0.0:11434&quot;</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure></li>
<li>启用并启动服务：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> ollama.service</span><br><span class="line"><span class="built_in">sudo</span> systemctl start ollama.service</span><br></pre></td></tr></table></figure>
如果需要停止服务，可以使用以下命令：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl stop ollama.service</span><br></pre></td></tr></table></figure>
查看服务状态：</li>
</ol>
<pre><code class="bash">sudo systemctl status ollama.service
```。

### 关闭终端时自动重启

这种方式需要手动编写字 shell 脚本，并将其添加到系统的启动项中，让系统在启动时自动运行该脚本，从而实现关闭终端时自动重启的效果。不过需要注意的是，这种方法一般用于特定场景，且需要根据系统的不同（如 Windows 和 Linux）采取不同的实现方式。

这些方法可以让 `ollama serve` 在后台持续运行，你可以根据自己的需求和系统环境选择合适的方式。


这是一段 `systemd` 服务配置文件的代码，用于管理 Ollama 服务的启动、运行和停止等行为。下面是对代码各部分的详细解释：

### `[Unit]` 部分

  * **Description=Ollama AI Service** ：用于描述该服务的简单信息，这里表示这是一个名为 “Ollama AI Service” 的服务。
  * **After=network.target** ：定义了服务的启动顺序依赖关系，表示该服务要在 `network.target` 单元之后启动。`network.target` 是一个用于标记网络服务可用的目标单元，这确保了 Ollama 服务在启动时网络已经就绪，以便它能正常地通过网络进行通信。

### `[Service]` 部分

  * **Type=simple** ：指定了服务的类型为简单类型，表示服务进程会在启动后立即开始运行，并且不会 fork 出子进程。这是最常见和简单的服务类型，适用于大多数直接运行的守护进程。
  * **User=&lt;your-username&gt;** ：定义了运行该服务的系统用户。`&lt;your-username&gt;` 是一个占位符，需要替换为实际的系统用户名。这样可以控制服务运行时的用户权限，以确保服务在合适的权限级别下运行，避免使用 root 用户带来的安全风险。
  * **WorkingDirectory=/path/to/ollama** ：设置了服务的工作目录，即服务在运行时所在的目录。`/path/to/ollama` 是一个示例路径，需替换为实际存放 Ollama 相关文件和配置的目录路径，这有助于服务在运行过程中正确地访问和操作文件。
  * **ExecStart=/usr/bin/ollama serve** ：指定了启动服务时要执行的命令。这里表示使用 `/usr/bin/ollama` 可执行文件，并传递 `serve` 参数来启动 Ollama 服务，这是启动 Ollama 的核心命令，用于使 Ollama 以服务的形式开始监听和处理请求。
  * **Restart=on-failure** ：配置了服务的重启策略。当服务因错误（如非零退出码、被信号终止等）而停止时，`systemd` 会自动尝试重启该服务，这提高了服务的可靠性和可用性，确保服务能够自动从一些常见的故障中恢复。
  * **Environment=&quot;OLLAMA_HOST=0.0.0.0:11434&quot;** ：设置了一个环境变量 `OLLAMA_HOST`，其值为 `0.0.0.0:11434`。这通常用于指定 Ollama 服务监听的主机地址和端口号，`0.0.0.0` 表示监听所有网络接口，`11434` 是默认的服务端口，这样可以使 Ollama 服务能够接收来自任何网络接口的请求。

### `[Install]` 部分

  * **WantedBy=multi-user.target** ：定义了该服务的安装目标，表示当系统进入多用户模式（`multi-user.target`）时，该服务会被自动启动。`multi-user.target` 是一个常见的系统目标，用于表示多用户环境下的系统状态，这使得 Ollama 服务能够在系统启动后自动运行，为用户提供了一种方便的自动启动机制。
</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/04/24/%E6%98%AF%E5%90%A6%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87-%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%91%E9%80%81-ws-localhost-8080/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="wangzhiwei">
      <meta itemprop="description" content="javascript nodejs web developer...">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WBlog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/04/24/%E6%98%AF%E5%90%A6%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87-%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%91%E9%80%81-ws-localhost-8080/" class="post-title-link" itemprop="url">是否可以通过 命令行发送 ws://localhost:8080</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-04-24 18:08:00 / 修改时间：18:09:18" itemprop="dateCreated datePublished" datetime="2025-04-24T18:08:00+08:00">2025-04-24</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>是的，可以通过命令行工具发送消息到 <code>ws://localhost:8080</code>，但需要借助一些工具，比如 <code>wscat</code>。</p>
<h3 id="1-安装-wscat"><a href="#1-安装-wscat" class="headerlink" title="1. 安装 wscat"></a>1. <strong>安装 wscat</strong></h3><p><code>wscat</code> 是一个命令行工具，可以用来测试 WebSocket 服务。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g wscat</span><br></pre></td></tr></table></figure>

<h3 id="2-连接到-WebSocket-服务器"><a href="#2-连接到-WebSocket-服务器" class="headerlink" title="2. 连接到 WebSocket 服务器"></a>2. <strong>连接到 WebSocket 服务器</strong></h3><p>使用 <code>wscat</code> 连接到服务器：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wscat -c ws://localhost:8080</span><br></pre></td></tr></table></figure>

<p>连接成功后，你应该看到类似这样的提示：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">connected (press CTRL+C to quit)</span><br></pre></td></tr></table></figure>

<h3 id="3-发送消息"><a href="#3-发送消息" class="headerlink" title="3. 发送消息"></a>3. <strong>发送消息</strong></h3><p>当连接成功后，可以发送 JSON 格式的指令。例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; &#123;<span class="string">&quot;windowSize&quot;</span>: 10, <span class="string">&quot;predictionTime&quot;</span>: 5&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-查看返回消息"><a href="#4-查看返回消息" class="headerlink" title="4. 查看返回消息"></a>4. <strong>查看返回消息</strong></h3><p>服务器会将监控和预测数据发送回客户端，你可以在命令行中看到返回的 JSON 消息。</p>
<h3 id="5-断开连接"><a href="#5-断开连接" class="headerlink" title="5. 断开连接"></a>5. <strong>断开连接</strong></h3><p>按 <code>Ctrl+C</code> 断开连接。</p>
<h3 id="6-其他命令行工具"><a href="#6-其他命令行工具" class="headerlink" title="6. 其他命令行工具"></a>6. <strong>其他命令行工具</strong></h3><ul>
<li>**<code>websocat</code>**：另一个选择，使用方法类似：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">websocat ws://localhost:8080</span><br></pre></td></tr></table></figure>
安装方法：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cargo install websocat</span><br></pre></td></tr></table></figure></li>
<li>**<code>socat</code>**：通过 <code>socat</code> 也可以实现类似功能，但语法略有不同。</li>
</ul>
<p>使用这些工具，你可以快速测试 WebSocket 服务器的功能。</p>
<p>package.json</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;nodejs-backend&quot;,</span><br><span class="line">  &quot;version&quot;: &quot;1.0.0&quot;,</span><br><span class="line">  &quot;description&quot;: &quot;&quot;,</span><br><span class="line">  &quot;main&quot;: &quot;index.js&quot;,</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;keywords&quot;: [],</span><br><span class="line">  &quot;author&quot;: &quot;&quot;,</span><br><span class="line">  &quot;license&quot;: &quot;ISC&quot;,</span><br><span class="line">  &quot;dependencies&quot;: &#123;</span><br><span class="line">    &quot;systeminformation&quot;: &quot;^5.25.11&quot;,</span><br><span class="line">    &quot;websocket&quot;: &quot;^1.0.35&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>server.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br></pre></td><td class="code"><pre><span class="line">// 指定与服务器和监控过程相关的导入。</span><br><span class="line">const http = require(&quot;http&quot;); // 导入 &#x27;http&#x27; 模块以创建 HTTP 服务器。</span><br><span class="line">const WebSocketServer = require(&quot;websocket&quot;).server; // 导入 WebSocket 服务器模块。</span><br><span class="line">const si = require(&#x27;systeminformation&#x27;); // 导入 &#x27;systeminformation&#x27; 库以获取设备的系统信息。</span><br><span class="line">const fs = require(&#x27;fs&#x27;); // 导入 &#x27;fs&#x27; 模块以处理文件系统。</span><br><span class="line"></span><br><span class="line">// 与机器学习相关的导入。</span><br><span class="line">// var MLP = require(&#x27;mlp&#x27;); // 导入 &#x27;mlp&#x27; 库，用于多层感知机预测。</span><br><span class="line">// var KNN = require(&#x27;ml-knn&#x27;); // 导入 &#x27;ml-knn&#x27; 库，用于 K 最近邻分类。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 声明并初始化将在服务器脚本中使用的全局变量。</span><br><span class="line">var monitoringInterval; // 声明一个用于监控间隔的变量。</span><br><span class="line">var sampleSize = 0; // 初始化一个用于样本大小的变量，在数据收集阶段使用。</span><br><span class="line">var predTime = 0; // 初始化一个用于预测时间的变量，表示用户希望进行预测的时间点。</span><br><span class="line">var predRX = 0; // 初始化一个用于预测下载速度的变量，单位为 Kb/s。</span><br><span class="line">var predTX = 0; // 初始化一个用于预测上传速度的变量，单位为 Kb/s。</span><br><span class="line">var predLat = 0; // 初始化一个用于预测延迟的变量，单位为 ms。</span><br><span class="line">var scoreQoS = &quot;&quot;; // 初始化一个用于 QoS（服务质量）得分的变量。</span><br><span class="line">var latency = 0; // 初始化一个用于延迟测量的变量，单位为 ms。</span><br><span class="line">var averageLatency = 0; // 初始化一个用于计算平均延迟的变量，单位为 ms。</span><br><span class="line">var deviceActivity = &quot;&quot;; // 初始化一个用于确定设备活动状态的变量，状态可以是“空闲”“浏览”或“流媒体”。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 从本地存储的数据库中获取一些之前存储的下载速度值。</span><br><span class="line">const contents1 = fs.readFileSync(&quot;./Databases/downloadSpeed.txt&quot;, &#x27;utf-8&#x27;); // 读取 &#x27;downloadSpeed.txt&#x27; 文件的内容。</span><br><span class="line">var downloadArray = contents1.split(/\r?\n/); // 将内容分割成一个数组，假设每一行代表一个值。</span><br><span class="line"></span><br><span class="line">// 从本地存储的数据库中获取一些之前存储的上传速度值。</span><br><span class="line">const contents2 = fs.readFileSync(&quot;./Databases/uploadSpeed.txt&quot;, &#x27;utf-8&#x27;); // 读取 &#x27;uploadSpeed.txt&#x27; 文件的内容。</span><br><span class="line">var uploadArray = contents2.split(/\r?\n/); // 将内容分割成一个数组，假设每一行代表一个值。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 在 8080 端口上托管服务器连接。</span><br><span class="line">const server = http.createServer(); // 创建 HTTP 服务器实例。</span><br><span class="line">server.listen(8080); // 在 8080 端口上监听传入的 HTTP 请求。</span><br><span class="line">console.log(&quot;Server started on port 8080...&quot;); // 记录消息，指示服务器已启动。</span><br><span class="line">console.log(&quot;Waiting for connection...&quot;); // 记录消息，指示服务器正在等待连接。</span><br><span class="line"></span><br><span class="line">// 创建 WebSocket 服务器实例，并将其附加到之前创建的 HTTP 服务器。</span><br><span class="line">const wsServer = new WebSocketServer(&#123;</span><br><span class="line">    httpServer: server,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 通过 WebSocket 服务器监听客户端的连接请求。</span><br><span class="line">wsServer.on(&quot;request&quot;, function (request) &#123;</span><br><span class="line">    // 接受客户端的连接。</span><br><span class="line">    const connection = request.accept(null, request.origin);</span><br><span class="line">    // 使用 &quot;message&quot; 关键字接受来自客户端的消息。</span><br><span class="line">    connection.on(&quot;message&quot;, function (message) &#123;</span><br><span class="line">        // 此处包含列表 5-16 的内容</span><br><span class="line"></span><br><span class="line">        // 获取从客户端获得的消息。</span><br><span class="line">        // 在这种情况下，收到的第一条消息是客户端发送的 URL。</span><br><span class="line">        // 这确保了通信是正常的。</span><br><span class="line">        console.log(&quot;Message from Client:&quot;, message.utf8Data);</span><br><span class="line">        // 初始化一个变量以包含客户端发送的消息。</span><br><span class="line">        var clientMessage = message.utf8Data;</span><br><span class="line">        // 检查客户端发送的消息中是否包含 JSONObject 中的 &quot;windowSize&quot; 变量。</span><br><span class="line">        // 这作为触发监控过程的决定因素。</span><br><span class="line">        // 收到 &quot;windowSize&quot; 变量意味着客户端运行正常。</span><br><span class="line">        if (clientMessage.includes(&quot;windowSize&quot;)) &#123;</span><br><span class="line">            const msg = JSON.parse(clientMessage); // 初始化一个常量以解析消息。</span><br><span class="line">            // 从 JSONObject 中获取 &quot;windowSize&quot; 和 &quot;predictionTime&quot; 的值。</span><br><span class="line">            sampleSize = msg.windowSize; // &quot;windowSize&quot; 的值。</span><br><span class="line">            predTime = msg.predictionTime; // &quot;predictionTime&quot; 的值。</span><br><span class="line">            // 初始化一个计数器，以知道已收集了多少网络流量。</span><br><span class="line">            var counter = 0;</span><br><span class="line">            // 初始化一个数组，以包含延迟项。</span><br><span class="line">            var latencyArray = [];</span><br><span class="line">            // 初始化一个计数器，以知道已收集了多少延迟值。</span><br><span class="line">            var counterLatency = 0;</span><br><span class="line">            // 使用 setInterval 方法创建一个每秒运行一次的函数。</span><br><span class="line">            // 该方法以函数和毫秒为单位的时间间隔作为输入。</span><br><span class="line">            monitoringInterval = setInterval(function () &#123;</span><br><span class="line">                // 此处包含列表 5-17 和列表 5-18 的内容</span><br><span class="line"></span><br><span class="line">                // 从 Wi-Fi 接口获取网络数据。</span><br><span class="line">                si.networkStats().then(data =&gt; &#123;</span><br><span class="line">                    // 计算每秒接收的数据包数量，即下载速度。</span><br><span class="line">                    var RX = Math.round((((data[0].rx_sec) / 1000) + Number.EPSILON) * 100) / 100;</span><br><span class="line">                    // 计算每秒发送的数据包数量，即上传速度。</span><br><span class="line">                    var TX = Math.round((((data[0].tx_sec) / 1000) + Number.EPSILON) * 100) / 100;</span><br><span class="line">                    // 使用 push() 方法将新读取的流量添加到预加载的数组中。</span><br><span class="line">                    // 预加载的数组以时间序列方式存储参数。</span><br><span class="line">                    // 根据设备活动，这可能会提高算法的性能。</span><br><span class="line">                    downloadArray.push(RX); // 将下载速度值添加到其预加载的数组中。</span><br><span class="line">                    uploadArray.push(TX); // 将上传速度值添加到其预加载的数组中。</span><br><span class="line">                    // 将值记录到控制台。</span><br><span class="line">                    console.log(&quot;Download Speed: &quot; + RX + &quot; KB/s&quot;);</span><br><span class="line">                    console.log(&quot;Upload Speed: &quot; + TX + &quot; KB/s&quot;);</span><br><span class="line">                    console.log(&quot;-----------------------------&quot;);</span><br><span class="line">                    // 当记录了六十个值时，停止监控过程并触发机器学习算法。</span><br><span class="line">                    if (counter == 60) &#123;</span><br><span class="line">                        // 使用 clearInterval() 方法停止监控过程。</span><br><span class="line">                        clearInterval(monitoringInterval);</span><br><span class="line">                        // 调用预测方法，对下载速度进行时间序列预测。</span><br><span class="line">                        // 确保如果算法失败并返回 NaN，则再次调用该方法。</span><br><span class="line">                        while (true) &#123;</span><br><span class="line">                            predRX = predictMLP(downloadArray, parseInt(sampleSize), parseInt(predTime), 0.1, 0.01);</span><br><span class="line">                            if (!isNaN(predRX)) &#123;</span><br><span class="line">                                // 如果获得实际数字，则退出循环。</span><br><span class="line">                                break;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                        // 调用预测方法，对上传速度进行时间序列预测。</span><br><span class="line">                        // 确保如果算法失败并返回 NaN，则再次调用该方法。</span><br><span class="line">                        while (true) &#123;</span><br><span class="line">                            predTX = predictMLP(uploadArray, parseInt(sampleSize), parseInt(predTime), 0.1, 0.01);</span><br><span class="line">                            if (!isNaN(predTX)) &#123;</span><br><span class="line">                                // 如果获得实际数字，则退出循环。</span><br><span class="line">                                break;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                        // 调用预测方法，对延迟进行时间序列预测。</span><br><span class="line">                        // 确保如果算法失败并返回 NaN，则再次调用该方法。</span><br><span class="line">                        while (true) &#123;</span><br><span class="line">                            predLat = predictMLP(latencyArray, parseInt(sampleSize), parseInt(predTime), 0.1, 0.01);</span><br><span class="line">                            if (!isNaN(predLat)) &#123;</span><br><span class="line">                                // 如果获得实际数字，则退出循环。</span><br><span class="line">                                break;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                        // 通过调用分类方法对设备活动进行分类。</span><br><span class="line">                        deviceActivity = calculateKNN(RX, TX);</span><br><span class="line">                        // 创建一个包含预测和分类结果的常量变量。</span><br><span class="line">                        const predictionMessage = &#123;</span><br><span class="line">                            downloadSpeed: RX,</span><br><span class="line">                            uploadSpeed: TX,</span><br><span class="line">                            predictedDownloadSpeed: predRX,</span><br><span class="line">                            predictedUploadSpeed: predTX,</span><br><span class="line">                            predictedLatency: predLat,</span><br><span class="line">                            predictedQoS: scoreQoS,</span><br><span class="line">                            deviceActivity: deviceActivity,</span><br><span class="line">                            averageLatency: averageLatency</span><br><span class="line">                        &#125;;</span><br><span class="line">                        // 将指标消息封装在 JSON 格式的字符串中，并通过 WebSocket 连接发送。</span><br><span class="line">                        connection.send(JSON.stringify(predictionMessage));</span><br><span class="line">                    &#125; else &#123;</span><br><span class="line">                        // 创建一个包含每秒发送给客户端的网络流量值的常量变量。</span><br><span class="line">                        // 添加所有 3 个实时值。</span><br><span class="line">                        const jsonMessage = &#123;</span><br><span class="line">                            downloadSpeed: RX,</span><br><span class="line">                            uploadSpeed: TX,</span><br><span class="line">                            latency: latency</span><br><span class="line">                        &#125;;</span><br><span class="line">                        // 将实时消息封装在 JSON 格式的字符串中，并通过 WebSocket 连接发送。</span><br><span class="line">                        connection.send(JSON.stringify(jsonMessage));</span><br><span class="line">                        // 增加网络流量计数器。</span><br><span class="line">                        counter = counter + 1;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &#125;, 1000); // 指定监控过程的时间间隔为 1000 毫秒。</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    // 使用 &quot;close&quot; 关键字处理客户端断开连接。</span><br><span class="line">    connection.on(&quot;close&quot;, function (reasonCode, description) &#123;</span><br><span class="line">        // 记录消息，指示客户端已断开连接。</span><br><span class="line">        console.log(&quot;Client has disconnected.&quot;);</span><br><span class="line">        // 当客户端断开连接时，停止监控过程。</span><br><span class="line">        clearInterval(monitoringInterval);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/04/11/huggingface-%E4%B8%8A%E7%9A%84%E6%A8%A1%E5%9E%8B%E5%BE%AE%E8%B0%83%E5%90%8E%E5%A6%82%E4%BD%95%E5%9C%A8-ollama-%E4%B8%AD%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="wangzhiwei">
      <meta itemprop="description" content="javascript nodejs web developer...">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WBlog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/04/11/huggingface-%E4%B8%8A%E7%9A%84%E6%A8%A1%E5%9E%8B%E5%BE%AE%E8%B0%83%E5%90%8E%E5%A6%82%E4%BD%95%E5%9C%A8-ollama-%E4%B8%AD%E4%BD%BF%E7%94%A8/" class="post-title-link" itemprop="url">huggingface 上的模型微调后如何在 ollama 中使用</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-04-11 10:51:39 / 修改时间：10:52:03" itemprop="dateCreated datePublished" datetime="2025-04-11T10:51:39+08:00">2025-04-11</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="以下是将HuggingFace上的模型微调后在Ollama中使用的方法："><a href="#以下是将HuggingFace上的模型微调后在Ollama中使用的方法：" class="headerlink" title="以下是将HuggingFace上的模型微调后在Ollama中使用的方法："></a>以下是将HuggingFace上的模型微调后在Ollama中使用的方法：</h2><h3 id="1-微调模型"><a href="#1-微调模型" class="headerlink" title="1. 微调模型"></a>1. 微调模型</h3><p>首先，你需要在HuggingFace上微调一个模型。可以使用HuggingFace的Transformers库来加载预训练模型，然后进行微调。例如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> transformers <span class="keyword">import</span> AutoModelForCausalLM, AutoTokenizer, TrainingArguments, Trainer</span><br><span class="line"></span><br><span class="line">model_name = <span class="string">&quot;your_model_name&quot;</span></span><br><span class="line">tokenizer = AutoTokenizer.from_pretrained(model_name)</span><br><span class="line">model = AutoModelForCausalLM.from_pretrained(model_name)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 准备训练数据</span></span><br><span class="line">train_dataset = ...  <span class="comment"># 你的训练数据</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置训练参数</span></span><br><span class="line">training_args = TrainingArguments(</span><br><span class="line">    output_dir=<span class="string">&quot;./output&quot;</span>,</span><br><span class="line">    num_train_epochs=<span class="number">3</span>,</span><br><span class="line">    per_device_train_batch_size=<span class="number">4</span>,</span><br><span class="line">    save_steps=<span class="number">500</span>,</span><br><span class="line">    logging_dir=<span class="string">&quot;./logs&quot;</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建Trainer并训练模型</span></span><br><span class="line">trainer = Trainer(</span><br><span class="line">    model=model,</span><br><span class="line">    args=training_args,</span><br><span class="line">    train_dataset=train_dataset,</span><br><span class="line">)</span><br><span class="line">trainer.train()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 保存微调后的模型</span></span><br><span class="line">model.save_pretrained(<span class="string">&quot;./output/finetuned_model&quot;</span>)</span><br><span class="line">tokenizer.save_pretrained(<span class="string">&quot;./output/finetuned_model&quot;</span>)</span><br></pre></td></tr></table></figure>


<h3 id="2-转换模型格式"><a href="#2-转换模型格式" class="headerlink" title="2. 转换模型格式"></a>2. 转换模型格式</h3><p>Ollama支持GGUF格式的模型。你需要将微调后的模型转换为GGUF格式。可以使用llama.cpp工具来完成这个转换：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装llama.cpp</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/ggml-org/llama.cpp.git</span><br><span class="line"><span class="built_in">cd</span> llama.cpp</span><br><span class="line">make</span><br><span class="line"></span><br><span class="line"><span class="comment"># 转换模型</span></span><br><span class="line">python convert_hf_to_gguf.py ./output/finetuned_model ./output/finetuned_model.gguf</span><br></pre></td></tr></table></figure>


<h3 id="3-导入Ollama"><a href="#3-导入Ollama" class="headerlink" title="3. 导入Ollama"></a>3. 导入Ollama</h3><p>将转换后的GGUF模型文件导入Ollama：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建Ollama模型</span></span><br><span class="line">ollama create my_finetuned_model ./output/finetuned_model.gguf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行模型</span></span><br><span class="line">ollama run my_finetuned_model <span class="string">&quot;生成文本&quot;</span></span><br></pre></td></tr></table></figure>


<h3 id="4-使用Ollama-API"><a href="#4-使用Ollama-API" class="headerlink" title="4. 使用Ollama API"></a>4. 使用Ollama API</h3><p>你还可以通过Ollama的API来调用微调后的模型：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动Ollama服务</span></span><br><span class="line">ollama serve</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用HTTP请求调用模型</span></span><br><span class="line">curl -X POST http://localhost:11434/api/generate -d <span class="string">&#x27;&#123;&quot;model&quot;: &quot;my_finetuned_model&quot;, &quot;prompt&quot;: &quot;生成文本&quot;&#125;&#x27;</span></span><br></pre></td></tr></table></figure>


<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><ul>
<li>确保你的微调模型已经保存为全精度版本。</li>
<li>在转换模型格式时，可能需要根据你的硬件环境（如CUDA）进行相应的配置。</li>
<li>如果模型较大，转换和导入过程可能需要较长时间。</li>
</ul>
<p>通过以上步骤，你就可以将HuggingFace上的模型微调后在Ollama中使用了。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/04/11/%E4%B8%AD%E6%96%87%E6%89%8B%E5%86%99%E4%BD%93%E8%AF%86%E5%88%AB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="wangzhiwei">
      <meta itemprop="description" content="javascript nodejs web developer...">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WBlog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/04/11/%E4%B8%AD%E6%96%87%E6%89%8B%E5%86%99%E4%BD%93%E8%AF%86%E5%88%AB/" class="post-title-link" itemprop="url">中文手写体识别</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-04-11 10:48:28 / 修改时间：10:49:25" itemprop="dateCreated datePublished" datetime="2025-04-11T10:48:28+08:00">2025-04-11</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="中文手写体识别"><a href="#中文手写体识别" class="headerlink" title="中文手写体识别"></a>中文手写体识别</h2><p>stepfun-ai&#x2F;GOT-OCR-2.0-hf</p>
<p><a target="_blank" rel="noopener" href="https://huggingface.co/stepfun-ai/GOT-OCR-2.0-hf">https://huggingface.co/stepfun-ai/GOT-OCR-2.0-hf</a></p>
<p>体验地址：<br><a target="_blank" rel="noopener" href="https://huggingface.co/spaces/yonigozlan/GOT-OCR-Transformers">https://huggingface.co/spaces/yonigozlan/GOT-OCR-Transformers</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">wangzhiwei</p>
  <div class="site-description" itemprop="description">javascript nodejs web developer...</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">85</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">56</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">62</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">wangzhiwei</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
