<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="javascript nodejs web developer...">
<meta property="og:type" content="website">
<meta property="og:title" content="WBlog">
<meta property="og:url" content="http://example.com/page/3/index.html">
<meta property="og:site_name" content="WBlog">
<meta property="og:description" content="javascript nodejs web developer...">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="wangzhiwei">
<meta property="article:tag" content="javascript nodejs web developer fe engineer">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>WBlog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">WBlog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">wangzhiwei blog</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/12/26/english/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="wangzhiwei">
      <meta itemprop="description" content="javascript nodejs web developer...">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WBlog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/12/26/english/" class="post-title-link" itemprop="url">english</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-12-26 08:55:08" itemprop="dateCreated datePublished" datetime="2024-12-26T08:55:08+08:00">2024-12-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-03-18 11:10:52" itemprop="dateModified" datetime="2025-03-18T11:10:52+08:00">2025-03-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/english/" itemprop="url" rel="index"><span itemprop="name">english</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="English-for-Technical-Interviews"><a href="#English-for-Technical-Interviews" class="headerlink" title="English-for-Technical-Interviews"></a>English-for-Technical-Interviews</h3><h3 id="02-two-sum"><a href="#02-two-sum" class="headerlink" title="02-two sum"></a>02-two sum</h3><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV11h4y1P7Yp/?spm_id_from=333.999.0.0">https://www.bilibili.com/video/BV11h4y1P7Yp/?spm_id_from=333.999.0.0</a> 视频链接<br><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/two-sum/">https://leetcode.cn/problems/two-sum/</a> 题目链接<br><a target="_blank" rel="noopener" href="https://www.collinsdictionary.com/dictionary/">https://www.collinsdictionary.com/dictionary/</a> 我喜欢的英文在线字典</p>
<ul>
<li>Vocabulary</li>
</ul>
<table>
<thead>
<tr>
<th>英文</th>
<th>中文</th>
<th>音标</th>
<th>重要程度</th>
</tr>
</thead>
<tbody><tr>
<td>brute force method</td>
<td>暴力法</td>
<td>bruːt fɔːʳs</td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>time complexity</td>
<td>时间复杂度</td>
<td>kəmpleksɪti</td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>n squared</td>
<td>n 的平方</td>
<td>skweəʳd</td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>length</td>
<td>长度</td>
<td></td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>array</td>
<td>数组</td>
<td>əreɪ</td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>element</td>
<td>元素</td>
<td>elɪmənt</td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>store</td>
<td>存储</td>
<td></td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>key-value pair</td>
<td>键值对</td>
<td></td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>iterate over &#x2F; go through this array</td>
<td>遍历这个数组</td>
<td>ɪtəˌreɪt</td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>sum up to</td>
<td>总和为</td>
<td></td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>add &#x2F; plus</td>
<td>加上</td>
<td></td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>index &#x2F; indices</td>
<td>索引 （单&#x2F;复）</td>
<td></td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>declare a variable</td>
<td>声明一个变量</td>
<td>dɪkleəʳ</td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>is equal to &#x2F; equals</td>
<td>等于</td>
<td>iːkwəl</td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>minus</td>
<td>减去</td>
<td>maɪnəs</td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>combination</td>
<td>组合</td>
<td>kɒmbɪneɪʃən</td>
<td>🌟🌟🌟</td>
</tr>
<tr>
<td>Repeat the same steps</td>
<td>重复同样的步骤</td>
<td></td>
<td>🌟🌟🌟</td>
</tr>
<tr>
<td>In this case</td>
<td>在这种情况下</td>
<td></td>
<td>🌟🌟🌟</td>
</tr>
<tr>
<td>by default</td>
<td>默认</td>
<td>dɪfɔːlt</td>
<td>🌟🌟🌟</td>
</tr>
<tr>
<td>find out</td>
<td>发现</td>
<td></td>
<td>🌟🌟</td>
</tr>
<tr>
<td>difference</td>
<td>差值</td>
<td></td>
<td>🌟🌟</td>
</tr>
<tr>
<td>move on to</td>
<td>移动到</td>
<td></td>
<td>🌟🌟</td>
</tr>
</tbody></table>
<ul>
<li><p>Script</p>
</li>
<li><p>Explain How to Use Brute Force</p>
</li>
</ul>
<p>We have two solutions here. The first one is using brute force method<br>which has the time complexity: n squared. The solution is that we check out every combination of 2 values and see if they can sum up to our targeting value<br>which is 8. For example, if we start at 3 then we check every combination<br>that includes 3<br>and see if any of the numbers added to 3<br>so their sum is the target. In this case none of them works.<br>So we start from 2<br>repeat the same steps,<br>and we found out the combination of 2 and 6<br>their sum is exactly 8.<br>So we can just directly return their indices<br>which is 1 and 3.</p>
<ul>
<li>Explain Brute Force Code</li>
</ul>
<p>OK for this brutal force method,<br>the code goes here.<br>So firstly we are going to declare a variable called n,<br>which represents the length of the nums array.<br>So as we’re gonna check out<br>every combination of two elements from this array,<br>so we’re gonna use a nested for loop to do so.<br>Inside we have every combination and we will check<br>if the sum of these two elements is equal to a target. If so<br>then<br>we can just directly return the two indices of these numbers<br>and if not at the end of the program<br>we will just return an empty array by default.</p>
<ul>
<li>Explain How to Use HashMap</li>
</ul>
<p>The second solution is to use hash map<br>which has time complexity about O(N). So<br>we’re gonna use this hash map to store key-value pairs<br>where the key is the element,<br>and the value is the index of this element.<br>Then we iterate over this array from the first element 3.<br>Because now<br>we are looking for 5 as 3 plus 5 equals 8,<br>so we will try to check if the map has already<br>stored five inside.<br>Unfortunately no,<br>so we store the current<br>element and it is index in the map for future usage.</p>
<p>Now we can move on to the next element 2<br>as the difference between the<br>target 8 and the current element 2 is 6.<br>But the map doesn’t have it, so we still<br>store the element and its index.</p>
<p>Move on to 1. Same thing happened we still need to<br>store the one and its index.</p>
<p>But things are different for six,<br>as now we’re looking for<br>8 minus 6 equals 2 and the map has 2 inside.<br>So we can use map<br>get to get its index, and now we just returned 1 and 3.</p>
<ul>
<li>Explain HashMap Code</li>
</ul>
<p>If we want to use hash map,<br>then basically we need to declare a map,<br>where the key<br>is an integer representing for the element and value is the index.<br>We iterates over the array, and for each element,<br>we gonna calculate<br>the difference between the target and the current element.<br>We’re gonna check<br>if the difference value word exists in this map or not.<br>If so, then<br>also we just directly return the two indices.<br>If not we simply put the element and it’s<br>index in the map.</p>
<p>At the end of the program<br>we need to return an empty array by default</p>
<h3 id="03-Spoken-English"><a href="#03-Spoken-English" class="headerlink" title="03 - Spoken English"></a>03 - Spoken English</h3><ul>
<li><p>Resources</p>
</li>
<li><p>发音 &amp; 音标<br><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Gs41127iG/?spm_id_from=333.337.search-card.all.click&vd_source=1b467c44a301cea703059eb872a93c8d">https://www.bilibili.com/video/BV1Gs41127iG/?spm_id_from=333.337.search-card.all.click&amp;vd_source=1b467c44a301cea703059eb872a93c8d</a> BBC 发音教程全集</p>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1ma4y1L7NE/?spm_id_from=333.337.search-card.all.click&vd_source=1b467c44a301cea703059eb872a93c8d">https://www.bilibili.com/video/BV1ma4y1L7NE/?spm_id_from=333.337.search-card.all.click&amp;vd_source=1b467c44a301cea703059eb872a93c8d</a> BBC 六分钟英语第一季合辑</p>
<ul>
<li>连读 &amp; 表达<br><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1D7411n7bS/?spm_id_from=333.337.top_right_bar_window_default_collection.content.click&vd_source=1b467c44a301cea703059eb872a93c8d">https://www.bilibili.com/video/BV1D7411n7bS/?spm_id_from=333.337.top_right_bar_window_default_collection.content.click&amp;vd_source=1b467c44a301cea703059eb872a93c8d</a> BBC 经典教程 | 连读 | 语音语调全集</li>
</ul>
<p>老友记，优酷或者腾讯视频</p>
<h3 id="04-reverse-list"><a href="#04-reverse-list" class="headerlink" title="04 - reverse list"></a>04 - reverse list</h3><ul>
<li>Vocabulary</li>
</ul>
<table>
<thead>
<tr>
<th>英文</th>
<th>中文</th>
<th>音标</th>
<th>重要程度</th>
</tr>
</thead>
<tbody><tr>
<td>plenty of</td>
<td>很多</td>
<td>plenti</td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>head node</td>
<td>头节点</td>
<td>hed noʊd</td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>tail node</td>
<td>尾节点</td>
<td>teɪl</td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>pointer</td>
<td>指针</td>
<td>pɔɪntəʳ</td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>points to</td>
<td>指向</td>
<td></td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>push &#x2F; add</td>
<td>推入（栈中）</td>
<td></td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>pop out</td>
<td>拿出（栈中）</td>
<td></td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>reverse</td>
<td>反转</td>
<td>rɪvɜːʳs</td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>iterate over &#x2F; go through this linked list</td>
<td>遍历这个链表</td>
<td>ɪtəˌreɪt</td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>recursive method</td>
<td>递归法</td>
<td>rɪˈkɜrsɪv</td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>iterative method</td>
<td>迭代法</td>
<td>ˈɪtərətɪv</td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>singly linked list</td>
<td>单向链表</td>
<td></td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>doubly linked list</td>
<td>双向链表</td>
<td></td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>cycle</td>
<td>循环，圈</td>
<td>saɪkəl</td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>otherwise</td>
<td>否则</td>
<td>ʌðəʳwaɪz</td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>original</td>
<td>原来的，原本的</td>
<td>ərɪdʒɪnəl</td>
<td>🌟🌟🌟🌟</td>
</tr>
<tr>
<td>in the normal case</td>
<td>一般情况下</td>
<td></td>
<td>🌟🌟🌟🌟</td>
</tr>
<tr>
<td>the rest of …</td>
<td>xx 的剩余部分</td>
<td></td>
<td>🌟🌟🌟🌟</td>
</tr>
<tr>
<td>meanwhile …</td>
<td>同时</td>
<td>miːnhwaɪl</td>
<td>🌟🌟🌟🌟</td>
</tr>
<tr>
<td>reaches the end of the linked list …</td>
<td>来到了链表的结尾</td>
<td></td>
<td>🌟🌟🌟🌟</td>
</tr>
<tr>
<td>eventually &#x2F; finally</td>
<td>最终</td>
<td>ɪventʃuəli</td>
<td>🌟🌟🌟</td>
</tr>
<tr>
<td>a key takeaway</td>
<td>一个关键要点</td>
<td></td>
<td>🌟🌟🌟</td>
</tr>
<tr>
<td>accordingly</td>
<td>有根据地</td>
<td></td>
<td>🌟🌟🌟</td>
</tr>
<tr>
<td>eliminate</td>
<td>消除</td>
<td>ɪlɪmɪneɪt</td>
<td>🌟🌟🌟</td>
</tr>
<tr>
<td>repeat over and over again until…</td>
<td>一直重复，直到…</td>
<td></td>
<td>🌟🌟🌟</td>
</tr>
</tbody></table>
<ul>
<li>Script</li>
</ul>
<h3 id="05-resume"><a href="#05-resume" class="headerlink" title="05 - resume"></a>05 - resume</h3><ul>
<li>Vocabulary</li>
</ul>
<table>
<thead>
<tr>
<th>英文</th>
<th>中文</th>
<th>音标</th>
</tr>
</thead>
<tbody><tr>
<td>design</td>
<td>设计</td>
<td>dɪzaɪn</td>
</tr>
<tr>
<td>implement</td>
<td>实现</td>
<td>ɪmplɪment</td>
</tr>
<tr>
<td>build &#x2F; establish</td>
<td>搭建</td>
<td>bɪld &#x2F; ɪstæblɪʃ</td>
</tr>
<tr>
<td>develop</td>
<td>实现</td>
<td>dɪveləp</td>
</tr>
<tr>
<td>reduce &#x2F; decrease</td>
<td>降低，减少</td>
<td>dɪkriːs</td>
</tr>
<tr>
<td>enhance &#x2F; increase</td>
<td>提高，增加</td>
<td>ɪnhɑːns &#x2F; ɪnkriːs</td>
</tr>
<tr>
<td>improve</td>
<td>提升，完善</td>
<td>ɪmpruːv</td>
</tr>
<tr>
<td>optimize</td>
<td>优化</td>
<td>ɒptɪmaɪz</td>
</tr>
<tr>
<td>significantly &#x2F; greatly</td>
<td>极大地</td>
<td>sɪgnɪfɪkənt &#x2F; greɪtli</td>
</tr>
<tr>
<td>automate, automated</td>
<td>自动化</td>
<td>ɔːtəmeɪt</td>
</tr>
<tr>
<td>result in</td>
<td>导致…的结果</td>
<td>ɪtəˌreɪt</td>
</tr>
<tr>
<td>user experience</td>
<td>用户体验</td>
<td>juːzəʳ ɪkspɪəriəns</td>
</tr>
<tr>
<td>independently</td>
<td>独立地</td>
<td>ɪndɪpendənt</td>
</tr>
<tr>
<td>seamless</td>
<td>无缝的</td>
<td>siːmləs</td>
</tr>
<tr>
<td>accelerate &#x2F; facilitate</td>
<td>加速，帮助</td>
<td>ækseləreɪt &#x2F; fəsɪlɪteɪt</td>
</tr>
<tr>
<td>robust</td>
<td>鲁棒性强的</td>
<td>roʊbʌst</td>
</tr>
<tr>
<td>stable</td>
<td>稳定的</td>
<td>steɪbəl</td>
</tr>
<tr>
<td>reliable</td>
<td>可靠的</td>
<td>rɪlaɪəbəl</td>
</tr>
<tr>
<td>extensible &#x2F; scalable</td>
<td>可扩展的</td>
<td>ɪkˈstɛnsəbəl &#x2F; skeɪləbəl</td>
</tr>
<tr>
<td>standardized</td>
<td>标准的</td>
<td>stændəʳdaɪz</td>
</tr>
<tr>
<td>consistent</td>
<td>一致性的</td>
<td>kənsɪstənt</td>
</tr>
<tr>
<td>persistent</td>
<td>持久性的</td>
<td>pəʳsɪstənt</td>
</tr>
<tr>
<td>effective</td>
<td>有效的</td>
<td>ɪfektɪv</td>
</tr>
<tr>
<td>efficient</td>
<td>有效率的</td>
<td>ɪfɪʃənt</td>
</tr>
<tr>
<td>isolated</td>
<td>隔离的，独立的</td>
<td>aɪsəleɪtɪd</td>
</tr>
<tr>
<td>standalone</td>
<td>独立的</td>
<td></td>
</tr>
<tr>
<td>reusable</td>
<td>可重复利用的</td>
<td>riːjuːzəbəl</td>
</tr>
<tr>
<td>portable</td>
<td>便捷的</td>
<td>pɔːʳtəbəl</td>
</tr>
<tr>
<td>integrate, integrated</td>
<td>集成</td>
<td>ɪntɪgreɪt</td>
</tr>
<tr>
<td>development lifecycle</td>
<td>开发周期</td>
<td></td>
</tr>
<tr>
<td>metrics</td>
<td>指标</td>
<td>ˈmɛtrɪks</td>
</tr>
<tr>
<td>alert</td>
<td>告警</td>
<td>əlɜːʳt</td>
</tr>
<tr>
<td>monitoring system</td>
<td>监控系统</td>
<td>ˈmɒnɪtərɪŋ</td>
</tr>
<tr>
<td>incident</td>
<td>事故</td>
<td>ɪnsɪdənt</td>
</tr>
<tr>
<td>deployment</td>
<td>部署</td>
<td>dɪplɔɪmənt</td>
</tr>
<tr>
<td>transition</td>
<td>过渡</td>
<td>trænzɪʃən</td>
</tr>
<tr>
<td>achieve &#x2F; reach</td>
<td>达到，达成</td>
<td>ətʃiːv &#x2F; riːtʃ</td>
</tr>
<tr>
<td>allow&#x2F;enable users to do sth.</td>
<td>允许用户做某事</td>
<td></td>
</tr>
<tr>
<td>cross-platform</td>
<td>跨平台的</td>
<td>ɪlɪmɪneɪt</td>
</tr>
<tr>
<td>platform</td>
<td>平台</td>
<td>plætfɔːʳm</td>
</tr>
<tr>
<td>in production</td>
<td>在生产环境中</td>
<td>prədʌkʃən</td>
</tr>
<tr>
<td>maintain</td>
<td>维护</td>
<td>meɪnteɪn</td>
</tr>
<tr>
<td>own</td>
<td>负责，拥有</td>
<td>oʊn</td>
</tr>
<tr>
<td>capability</td>
<td>能力</td>
<td>capability</td>
</tr>
<tr>
<td>end-to-end</td>
<td>端到端的</td>
<td></td>
</tr>
<tr>
<td>manual efforts</td>
<td>手动工作</td>
<td>mænjuəl efəʳts</td>
</tr>
<tr>
<td>introduce</td>
<td>引入（框架，工具等）</td>
<td>ɪntrədjuːs</td>
</tr>
<tr>
<td>customized</td>
<td>自定义的</td>
<td>kʌstəˌmaɪzd</td>
</tr>
</tbody></table>
<h3 id="06-lc-113"><a href="#06-lc-113" class="headerlink" title="06 - lc 113"></a>06 - lc 113</h3><ul>
<li>Vocabulary</li>
</ul>
<table>
<thead>
<tr>
<th>英文</th>
<th>中文</th>
<th>重要程度</th>
</tr>
</thead>
<tbody><tr>
<td>DFS &#x2F; Depth-First-Search</td>
<td>深度优先遍历</td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>Backtrack</td>
<td>回溯</td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>Path</td>
<td>路径</td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>Node</td>
<td>节点</td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>Leaf Node</td>
<td>叶子节点</td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>Tree Traversal</td>
<td>树的遍历</td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>Global variable</td>
<td>全局变量</td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>Initialize</td>
<td>初始化</td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>Base case</td>
<td>基础情况</td>
<td>🌟🌟🌟🌟🌟</td>
</tr>
<tr>
<td>Dead-end</td>
<td>死路</td>
<td>🌟🌟🌟🌟</td>
</tr>
<tr>
<td>Undo</td>
<td>撤回</td>
<td>🌟🌟🌟🌟</td>
</tr>
<tr>
<td>Explore</td>
<td>探索</td>
<td>🌟🌟🌟🌟</td>
</tr>
<tr>
<td>Hit &#x2F; reach</td>
<td>碰到 &#x2F; 达到</td>
<td>🌟🌟🌟🌟</td>
</tr>
<tr>
<td>Track</td>
<td>追踪，跟踪</td>
<td>🌟🌟🌟🌟</td>
</tr>
<tr>
<td>Terminate</td>
<td>使…结束</td>
<td>🌟🌟🌟🌟</td>
</tr>
<tr>
<td>Crucial</td>
<td>关键的</td>
<td>🌟🌟🌟</td>
</tr>
</tbody></table>
<ul>
<li>Script</li>
</ul>
<p>Today we will use DFS + backtracking to solve this problem. Basically we need to explore all possible paths from the root node to the leaf node and see if their sum is equal to the target sum. For each node, we use DFS way to track the current sum and all nodes we have gone through. We put those nodes into a list called current path. Once we hit the leaf node, we check if the current sum equals to the target, if so, then we add the current path list to the result to be returned later.<br>So another crucial part is, at the end of the DFS function, we need to remove the last node from the current path list, which is called backtracking. So why we need to remove the last node is that we don’t want to consider this case anymore, either because it led to the dead-end, or they have already been explored. Therefore, we undo this choice and we will explore other paths later.</p>
<p>So before starting the DFS, we need to initialize the targetsum as a global variable. Then in the DFS, we can see the base case for this DFS function is to check if the current node is null. If so, we directly terminate the function.<br>Then we update the current sum by adding the current node’s value, and then update the current path list by adding the current node.<br>Then if the current node is a leaf node, we can check if the overall sum is equal to the target one. If so, that is one of the valid results to be returned, we add it to the result list.<br>If not the leaf node, that means we can keep doing tree traversal to go down. We can either choose to go left or go right. After exploring all possible paths starting from the current node, then we do a backtrack to undo the last node added to the path list, which is just the current node.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">function TreeNode(val, left, right) &#123;</span><br><span class="line">    this.val = (val===undefined ? 0 : val)</span><br><span class="line">    this.left = (left===undefined ? null : left)</span><br><span class="line">    this.right = (right===undefined ? null : right)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Solution &#123;</span><br><span class="line">    constructor() &#123;</span><br><span class="line">        this.ret = [];</span><br><span class="line">        this.path = [];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    pathSum(root, targetSum) &#123;</span><br><span class="line">        this.dfs(root, targetSum);</span><br><span class="line">        return this.ret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    dfs(node, targetSum) &#123;</span><br><span class="line">        if (!node) return;</span><br><span class="line"></span><br><span class="line">        this.path.push(node.val);</span><br><span class="line">        targetSum -= node.val;</span><br><span class="line"></span><br><span class="line">        if (!node.left &amp;&amp; !node.right &amp;&amp; targetSum === 0) &#123;</span><br><span class="line">            this.ret.push([...this.path]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        this.dfs(node.left, targetSum);</span><br><span class="line">        this.dfs(node.right, targetSum);</span><br><span class="line"></span><br><span class="line">        this.path.pop();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Helper function to create a binary tree from an array</span><br><span class="line">function arrayToTreeNode(arr) &#123;</span><br><span class="line">    if (!arr || arr.length === 0 || arr[0] === null) return null;</span><br><span class="line"></span><br><span class="line">    const root = new TreeNode(arr[0]);</span><br><span class="line">    const queue = [root];</span><br><span class="line">    let i = 1;</span><br><span class="line"></span><br><span class="line">    while (i &lt; arr.length) &#123;</span><br><span class="line">        const current = queue.shift();</span><br><span class="line"></span><br><span class="line">        if (arr[i] !== null) &#123;</span><br><span class="line">            current.left = new TreeNode(arr[i]);</span><br><span class="line">            queue.push(current.left);</span><br><span class="line">        &#125;</span><br><span class="line">        i++;</span><br><span class="line"></span><br><span class="line">        if (i &lt; arr.length &amp;&amp; arr[i] !== null) &#123;</span><br><span class="line">            current.right = new TreeNode(arr[i]);</span><br><span class="line">            queue.push(current.right);</span><br><span class="line">        &#125;</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return root;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const solution = new Solution();</span><br><span class="line"></span><br><span class="line">const root = arrayToTreeNode([5, 4, 8, 11, null, 13, 4, 7, 2, null, null, 5, 1]);</span><br><span class="line">const targetSum = 22;</span><br><span class="line">console.log(root)</span><br><span class="line"></span><br><span class="line">console.log(JSON.stringify(root))</span><br><span class="line">console.log(solution.pathSum(root, targetSum)); // Output: [[5,4,11,2],[5,8,4,5]]</span><br><span class="line"></span><br><span class="line">// const root1 = arrayToTreeNode([1, 2, 3]);</span><br><span class="line">// const targetSum1 = 5;</span><br><span class="line">// console.log(solution.pathSum(root1, targetSum1)); // Output: []</span><br><span class="line"></span><br><span class="line">// const root2 = arrayToTreeNode([1, 2]);</span><br><span class="line">// const targetSum2 = 0;</span><br><span class="line">// console.log(solution.pathSum(root2, targetSum2)); // Output: []</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Resources"><a href="#Resources" class="headerlink" title="Resources"></a>Resources</h3><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Uu4y1V7Eg/?spm_id_from=333.999.0.0&vd_source=ffda878df0ed45bee1ade91d8f451048">https://www.bilibili.com/video/BV1Uu4y1V7Eg/?spm_id_from=333.999.0.0&amp;vd_source=ffda878df0ed45bee1ade91d8f451048</a></p>
<h3 id="07-英文简历"><a href="#07-英文简历" class="headerlink" title="07 英文简历"></a>07 英文简历</h3><p><img src="/../images/english_01.png"></p>
<h3 id="Resources-1"><a href="#Resources-1" class="headerlink" title="Resources"></a>Resources</h3><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV11h4y1P7Yp/?spm_id_from=333.999.0.0">https://www.bilibili.com/video/BV11h4y1P7Yp/?spm_id_from=333.999.0.0</a> 视频链接</p>
<p><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/path-sum-ii/description/">https://leetcode.cn/problems/path-sum-ii/description/</a> 题目链接</p>
<p><a target="_blank" rel="noopener" href="https://www.collinsdictionary.com/dictionary/">https://www.collinsdictionary.com/dictionary/</a> 我喜欢的英文在线字典</p>
<p>在线真人口语练习网站<br><a target="_blank" rel="noopener" href="https://www.free4talk.com/">https://www.free4talk.com/</a> 可以选择不同的口语 level 的聊天室，免费</p>
<hr>
<p>1、前端英语<br><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1gg411d7if?spm_id_from=333.788.videopod.sections&vd_source=ffda878df0ed45bee1ade91d8f451048">https://www.bilibili.com/video/BV1gg411d7if?spm_id_from=333.788.videopod.sections&amp;vd_source=ffda878df0ed45bee1ade91d8f451048</a></p>
<p>2、英语句子背诵<br><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1eM411a7dB/?spm_id_from=333.337.search-card.all.click&vd_source=ffda878df0ed45bee1ade91d8f451048">https://www.bilibili.com/video/BV1eM411a7dB/?spm_id_from=333.337.search-card.all.click&amp;vd_source=ffda878df0ed45bee1ade91d8f451048</a></p>
<p>3、前端 React 程序员<br><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1tm411R7Qt/?spm_id_from=333.337.search-card.all.click&vd_source=ffda878df0ed45bee1ade91d8f451048">https://www.bilibili.com/video/BV1tm411R7Qt/?spm_id_from=333.337.search-card.all.click&amp;vd_source=ffda878df0ed45bee1ade91d8f451048</a></p>
<p>5、程序员英语训练营<br><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1wM4y1C7LE/?spm_id_from=333.337.search-card.all.click&vd_source=ffda878df0ed45bee1ade91d8f451048">https://www.bilibili.com/video/BV1wM4y1C7LE/?spm_id_from=333.337.search-card.all.click&amp;vd_source=ffda878df0ed45bee1ade91d8f451048</a></p>
<p>6、程序员英语角<br><a target="_blank" rel="noopener" href="https://space.bilibili.com/403317915">https://space.bilibili.com/403317915</a></p>
<p>7、</p>
<p><img src="/../images/englist_01.png"></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Kv4y1E72V/?spm_id_from=333.337.search-card.all.click&vd_source=ffda878df0ed45bee1ade91d8f451048">https://www.bilibili.com/video/BV1Kv4y1E72V/?spm_id_from=333.337.search-card.all.click&amp;vd_source=ffda878df0ed45bee1ade91d8f451048</a></p>
<h3 id="more-frontend-interview-question"><a href="#more-frontend-interview-question" class="headerlink" title="more frontend interview question:"></a>more frontend interview question:</h3><p><a target="_blank" rel="noopener" href="https://johnsonkow.medium.com/general-frontend-interview-questions-e6186ca4bf2b">https://johnsonkow.medium.com/general-frontend-interview-questions-e6186ca4bf2b</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/h5bp/Front-end-Developer-Interview-Questions?tab=readme-ov-file">https://github.com/h5bp/Front-end-Developer-Interview-Questions?tab=readme-ov-file</a></p>
<p><a target="_blank" rel="noopener" href="https://www.interviewbit.com/front-end-developer-interview-questions/#react-js">https://www.interviewbit.com/front-end-developer-interview-questions/#react-js</a></p>
<p><a target="_blank" rel="noopener" href="https://www.usebraintrust.com/hire/interview-questions/front-end-developers">https://www.usebraintrust.com/hire/interview-questions/front-end-developers</a></p>
<p><a target="_blank" rel="noopener" href="https://roadmap.sh/questions/frontend">https://roadmap.sh/questions/frontend</a></p>
<p><a target="_blank" rel="noopener" href="https://www.geeksforgeeks.org/front-end-developer-interview-questions/">https://www.geeksforgeeks.org/front-end-developer-interview-questions/</a></p>
<p>react interview questions:</p>
<p><a target="_blank" rel="noopener" href="https://github.com/wangzhiwei1888/wangzhiwei1888.github.io/tree/master/docs/">https://github.com/wangzhiwei1888/wangzhiwei1888.github.io/tree/master/docs/</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/12/25/node-addon-%E6%89%A9%E5%B1%95-node-c-%E6%89%A9%E5%B1%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="wangzhiwei">
      <meta itemprop="description" content="javascript nodejs web developer...">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WBlog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/12/25/node-addon-%E6%89%A9%E5%B1%95-node-c-%E6%89%A9%E5%B1%95/" class="post-title-link" itemprop="url">node addon 扩展 node c++扩展</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-12-25 10:37:55" itemprop="dateCreated datePublished" datetime="2024-12-25T10:37:55+08:00">2024-12-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-03-18 11:10:52" itemprop="dateModified" datetime="2025-03-18T11:10:52+08:00">2025-03-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/node/" itemprop="url" rel="index"><span itemprop="name">node</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/node/c/" itemprop="url" rel="index"><span itemprop="name">c++</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="node-addon-扩展-node-c-扩展"><a href="#node-addon-扩展-node-c-扩展" class="headerlink" title="node addon 扩展 node c++扩展"></a>node addon 扩展 node c++扩展</h1><h2 id="安装-node-gyp"><a href="#安装-node-gyp" class="headerlink" title="安装 node-gyp"></a>安装 node-gyp</h2><p>npm install -g node-gyp</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">└── caddon</span><br><span class="line">    ├── binding.gyp</span><br><span class="line">    ├── build</span><br><span class="line">    ├── calculate1.cc</span><br><span class="line">    ├── calculate.cc</span><br><span class="line">    ├── hello.cc</span><br><span class="line">    ├── hello.js</span><br><span class="line">    ├── main.js</span><br><span class="line">    ├── package.json</span><br><span class="line">    └── README.md</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">binding.gyp</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    &quot;targets&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;target_name&quot;: &quot;calculate&quot;,</span><br><span class="line">            &quot;sources&quot;: [ &quot;calculate.cc&quot; ]</span><br><span class="line">        &#125;, </span><br><span class="line">        &#123;</span><br><span class="line">            &quot;target_name&quot;: &quot;calculate1&quot;,</span><br><span class="line">            &quot;sources&quot;: [ &quot;calculate1.cc&quot; ]</span><br><span class="line">        &#125;, </span><br><span class="line">        &#123;</span><br><span class="line">            &quot;target_name&quot;: &quot;hello&quot;,</span><br><span class="line">            &quot;sources&quot;: [ &quot;hello.cc&quot; ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">calculate1.cc</span><br><span class="line"></span><br><span class="line">#include &lt;node.h&gt;</span><br><span class="line"></span><br><span class="line">namespace calculate1 &#123;</span><br><span class="line">    using v8::FunctionCallbackInfo;</span><br><span class="line">    using v8::Isolate;</span><br><span class="line">    using v8::Local;</span><br><span class="line">    using v8::Object;</span><br><span class="line">    using v8::Number;</span><br><span class="line">    using v8::Value;</span><br><span class="line">    using v8::String;</span><br><span class="line">    using v8::Exception;</span><br><span class="line"></span><br><span class="line">    void Method(const FunctionCallbackInfo&lt;Value&gt;&amp;args) &#123;</span><br><span class="line">        Isolate* isolate = args.GetIsolate();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        // 检查参数数量</span><br><span class="line">        if (args.Length() &lt; 2) &#123;</span><br><span class="line">            isolate-&gt;ThrowException(Exception::TypeError(</span><br><span class="line">                String::NewFromUtf8(isolate, &quot;Wrong number of arguments&quot;).ToLocalChecked()));</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (!args[0]-&gt;IsNumber() || !args[1]-&gt;IsNumber()) &#123;</span><br><span class="line">            isolate-&gt;ThrowException(Exception::TypeError(</span><br><span class="line">                String::NewFromUtf8(isolate, &quot;Wrong arguments&quot;).ToLocalChecked()));</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        int x = args[0]-&gt;NumberValue(isolate-&gt;GetCurrentContext()).FromJust();</span><br><span class="line">        int y = args[1]-&gt;NumberValue(isolate-&gt;GetCurrentContext()).FromJust();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        int i;</span><br><span class="line">        // double x = 100.734659, y = 353.2313423432;</span><br><span class="line">        for (i=0; i &lt; 100; i++) &#123;</span><br><span class="line">            x += y;</span><br><span class="line">        &#125;</span><br><span class="line">        auto total = Number::New(isolate, x);</span><br><span class="line">        args.GetReturnValue().Set(total);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void Initialize(Local&lt;Object&gt; exports) &#123;</span><br><span class="line">        NODE_SET_METHOD(exports, &quot;calc1&quot;, Method);</span><br><span class="line">    &#125;</span><br><span class="line">    NODE_MODULE(NODE_GYP_MODULE_NAME, Initialize)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main.js</span><br><span class="line"></span><br><span class="line">const calculate = require(&#x27;./build/Release/calculate&#x27;)</span><br><span class="line">const calculate1 = require(&#x27;./build/Release/calculate1&#x27;)</span><br><span class="line">const hello = require(&#x27;./build/Release/hello&#x27;)</span><br><span class="line">const hello_js = require(&#x27;./hello.js&#x27;)</span><br><span class="line"></span><br><span class="line">function calc() &#123;</span><br><span class="line">    let i, x =  100.734659, y=353.2313423432;</span><br><span class="line">    for (i=0; i&lt;1000000000; i++) &#123;</span><br><span class="line">        x += y;</span><br><span class="line">    &#125;</span><br><span class="line">    const total = x</span><br><span class="line">    return total</span><br><span class="line">&#125;</span><br><span class="line">console.log(&#x27;c++ addon result vs Node result&#x27;)</span><br><span class="line">console.log(&#x27;C++ :&#x27; + calculate.calc())</span><br><span class="line">console.log(&#x27;Node :&#x27; + calc())</span><br><span class="line">console.log(&#x27;---------------------------------------&#x27;)</span><br><span class="line">console.log(&#x27;c++ addon vs js addon&#x27;)</span><br><span class="line">console.log(hello.hello())</span><br><span class="line">console.log(hello_js(&#x27;Jack Yeh&#x27;))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">console.log(&#x27;c++ addon&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">console.log(&#x27;C++ :&#x27; + calculate1.calc1(100, 100))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">更多参考：https://github.com/wangzhiwei1888/cpp_node_modules.git</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>编译c++</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">node-gyp configure</span><br><span class="line">node-gyp build</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>运行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node main.js</span><br><span class="line"></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/12/24/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="wangzhiwei">
      <meta itemprop="description" content="javascript nodejs web developer...">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WBlog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/12/24/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/" class="post-title-link" itemprop="url">数据结构与算法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-12-24 17:38:43" itemprop="dateCreated datePublished" datetime="2024-12-24T17:38:43+08:00">2024-12-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-03-18 11:10:52" itemprop="dateModified" datetime="2025-03-18T11:10:52+08:00">2025-03-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" itemprop="url" rel="index"><span itemprop="name">数据结构</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="数据结构与算法"><a href="#数据结构与算法" class="headerlink" title="数据结构与算法"></a>数据结构与算法</h3><p>可以容纳数据的结构被称为数据结构。<br>算法是用来对数据结构进行处理的方法<br>数据结构是静态的。<br>算法是动态的。</p>
<h3 id="线性数据结构（一维数据结构）"><a href="#线性数据结构（一维数据结构）" class="headerlink" title="线性数据结构（一维数据结构）"></a>线性数据结构（一维数据结构）</h3><p>线性数据结构强调存储与顺序</p>
<h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><p>1、存储在物理空间上是连续的<br>2、底层的数组长度是不可变的<br>3、数组的变量，指向了数组的第一个元素的位置<br>a[1] a[2] []表示存储地址的偏移， 通过偏移查询数据性能最好</p>
<p>优点： 查询数据性能最好<br>缺点：<br>1、因为空间必须得连续，所以如果数组比较大，当空间碎片比较多的时候，容易存不下。<br>2、因为数组的长度是固定的，所以数组的内容难以被添加和删除</p>
<h3 id="链表"><a href="#链表" class="headerlink" title="链表"></a>链表</h3><p>我想传递一个链表，必须传递链表的根节点。<br>每一个节点，都认为自己是根节点</p>
<p>链表的特点：</p>
<p>1、空间上不是连续的。<br>2、没存放一个值，都要多开销一个引用空间。</p>
<p>优点：</p>
<p>1、只要内存足够大，就能存的下，不用担心空间碎片的问题。<br>2、链表的插入和删除操作，非常快。<br>3、链表可以存放任意类型的数据。</p>
<p>缺点：<br>1、查询数据性能差<br>2、链表不能随机访问。<br>3、每个节点都要多开一个引用空间。当节点内数据越大，这部分多开销的内存影响越小</p>
<h3 id="链表的逆置"><a href="#链表的逆置" class="headerlink" title="链表的逆置"></a>链表的逆置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">function Node(val) &#123;</span><br><span class="line">    this.val = val;</span><br><span class="line">    this.next = null;</span><br><span class="line">&#125;</span><br><span class="line">// 遍历链表</span><br><span class="line">function traverseLinkedList(head) &#123;</span><br><span class="line">    let current = head;</span><br><span class="line">    while (current !== null) &#123;</span><br><span class="line">        console.log(current.val); // 访问当前节点的值</span><br><span class="line">        current = current.next;   // 移动到下一个节点</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 迭代方式</span><br><span class="line">function reverseLinkedList(head) &#123;</span><br><span class="line">    let prev = null;</span><br><span class="line">    let current = head;</span><br><span class="line">    while (current !== null) &#123;</span><br><span class="line">        let nextNode = current.next;</span><br><span class="line">        current.next = prev;</span><br><span class="line">        prev = current;</span><br><span class="line">        current = nextNode;</span><br><span class="line">    &#125;</span><br><span class="line">    return prev; // 新的头节点</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 递归方式</span><br><span class="line">function reverseLinkedListRecursive(head) &#123;</span><br><span class="line">    if (head === null || head.next === null) &#123;</span><br><span class="line">        return head;</span><br><span class="line">    &#125;</span><br><span class="line">    let newHead = reverseLinkedListRecursive(head.next);</span><br><span class="line">    head.next.next = head;</span><br><span class="line">    head.next = null;</span><br><span class="line">    return newHead;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">var node1 = new Node(1);</span><br><span class="line">var node2 = new Node(2);</span><br><span class="line">var node3 = new Node(3);</span><br><span class="line">var node4 = new Node(4);</span><br><span class="line">var node5 = new Node(5);</span><br><span class="line">node1.next = node2;</span><br><span class="line">node2.next = node3;</span><br><span class="line">node3.next = node4;</span><br><span class="line">node4.next = node5;</span><br><span class="line"></span><br><span class="line">console.log(node1);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">console.log(&quot;Original Linked List:&quot;);</span><br><span class="line">traverseLinkedList(node1);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// const result = reverseLinkedList(node1);</span><br><span class="line"></span><br><span class="line">// console.log(result);</span><br><span class="line"></span><br><span class="line">// console.log(&quot;Reversed Linked List:&quot;);</span><br><span class="line">// traverseLinkedList(result);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const res1 = reverseLinkedListRecursive(node1);</span><br><span class="line"></span><br><span class="line">console.log(res1);</span><br><span class="line"></span><br><span class="line">console.log(&quot;Reversed Linked List:&quot;);</span><br><span class="line">traverseLinkedList(res1);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h3><p>时间复杂度分析</p>
<p>最坏情况：<br>当数组是逆序时，冒泡排序需要进行最多的比较和交换操作。<br>外层循环执行 ( n ) 次（其中 ( n ) 是数组的长度）。<br>内层循环在第一次迭代时执行 ( n-1 ) 次，在第二次迭代时执行 ( n-2 ) 次，依此类推，直到最后一次迭代执行 1 次。<br>因此，总的比较次数为： [ (n-1) + (n-2) + \cdots + 1 &#x3D; \frac{n(n-1)}{2} ]<br>这个和是一个二次函数，时间复杂度为 ( O(n^2) )。</p>
<p>平均情况：<br>在平均情况下，数组元素是随机排列的。<br>冒泡排序仍然需要进行大约 ( \frac{n(n-1)}{2} ) 次比较和交换操作。<br>因此，平均时间复杂度也是 ( O(n^2) )。</p>
<p>最好情况：<br>当数组已经有序时，冒泡排序只需要进行一次完整的遍历来确认没有需要交换的元素。<br>这种情况下，内层循环只执行一次，总的比较次数为 ( n-1 )。<br>因此，最好时间复杂度为 ( O(n) )。<br>空间复杂度<br>冒泡排序是一种原地排序算法，它不需要额外的存储空间来存储数组元素，因此空间复杂度为 ( O(1) )。</p>
<p><img src="/../images/sf.gif"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">var arr2 = [10, 9, 20, 30, 15, 25, 35, 40, 45, 50];</span><br><span class="line">let num = 0;</span><br><span class="line">// 冒泡排序</span><br><span class="line">function bubbleSort(arr) &#123;</span><br><span class="line">    for (let i = 0; i &lt; arr.length; i++) &#123;</span><br><span class="line">        for (let j = 0; j &lt; arr.length - i - 1; j++) &#123;</span><br><span class="line">            num++;</span><br><span class="line">            if (arr[j] &gt; arr[j + 1]) &#123;</span><br><span class="line">                let temp = arr[j];</span><br><span class="line">                arr[j] = arr[j + 1];</span><br><span class="line">                arr[j + 1] = temp;</span><br><span class="line">                </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bubbleSort(arr2)</span><br><span class="line">console.log(arr2, num); // 输出排序后的次数 45 次，数组排序 如何变都是 45 次 O(n^2)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">var arr = [9, 10, 15, 20, 25, 30, 35, 40, 45, 50]</span><br><span class="line">num = 0;</span><br><span class="line">// 优化后的冒泡排序</span><br><span class="line">function bubbleSort2(arr) &#123;</span><br><span class="line">    let n = arr.length;</span><br><span class="line">    let swapped;</span><br><span class="line">    do &#123;</span><br><span class="line">        swapped = false;</span><br><span class="line">        for (let i = 0; i &lt; n - 1; i++) &#123;</span><br><span class="line">            if (arr[i] &gt; arr[i + 1]) &#123;</span><br><span class="line">                // 交换 arr[i] 和 arr[i + 1]</span><br><span class="line">                let temp = arr[i];</span><br><span class="line">                arr[i] = arr[i + 1];</span><br><span class="line">                arr[i + 1] = temp;</span><br><span class="line">                swapped = true;</span><br><span class="line">            &#125;</span><br><span class="line">            num++</span><br><span class="line">        &#125;</span><br><span class="line">        // 每次遍历后，最大的元素会被放到最后，所以可以减少一次遍历</span><br><span class="line">        n--;</span><br><span class="line">    &#125; while (swapped);</span><br><span class="line">    return arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">let sortedArray = bubbleSort2(arr);</span><br><span class="line">console.log(&quot;Sorted Array:&quot;, sortedArray);</span><br><span class="line">console.log(num); // 输出排序后的次数 9 次, O(n)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/12/24/nodejs%E5%AE%8F%E4%BB%BB%E5%8A%A1%E5%92%8C%E5%BE%AE%E4%BB%BB%E5%8A%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="wangzhiwei">
      <meta itemprop="description" content="javascript nodejs web developer...">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WBlog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/12/24/nodejs%E5%AE%8F%E4%BB%BB%E5%8A%A1%E5%92%8C%E5%BE%AE%E4%BB%BB%E5%8A%A1/" class="post-title-link" itemprop="url">nodejs宏任务和微任务</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-12-24 14:32:22" itemprop="dateCreated datePublished" datetime="2024-12-24T14:32:22+08:00">2024-12-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-03-18 11:10:52" itemprop="dateModified" datetime="2025-03-18T11:10:52+08:00">2025-03-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/nodejs/" itemprop="url" rel="index"><span itemprop="name">nodejs</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="nodejs宏任务和微任务"><a href="#nodejs宏任务和微任务" class="headerlink" title="nodejs宏任务和微任务"></a>nodejs宏任务和微任务</h2><p>在 Node.js 中，事件循环机制处理任务的方式分为宏任务（macrotask）和微任务（microtask）。以下是它们的区别及执行顺序：</p>
<ul>
<li><p><strong>宏任务（Macrotask）</strong></p>
<ul>
<li>包含：<code>setTimeout</code>, <code>setInterval</code>, I&#x2F;O 操作, UI 渲染, <code>setImmediate</code></li>
<li>每次执行完一个宏任务后会进入微任务队列检查并执行所有微任务</li>
<li>下一次事件循环开始时才会继续执行下一个宏任务</li>
</ul>
</li>
<li><p><strong>微任务（Microtask）</strong></p>
<ul>
<li>包含：<code>Promise.then</code>, <code>process.nextTick</code>, <code>Object.observe</code>(已废弃), <code>MutationObserver</code></li>
<li>在当前任务（无论是宏任务还是微任务）执行完毕后立即执行，直到微任务队列为空</li>
<li><code>process.nextTick</code> 的优先级最高，在当前操作完成后立即执行，甚至早于其他微任务</li>
</ul>
</li>
</ul>
<h3 id="执行顺序示例："><a href="#执行顺序示例：" class="headerlink" title="执行顺序示例："></a>执行顺序示例：</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;start&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123; <span class="comment">// 宏任务</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;setTimeout&#x27;</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123; <span class="comment">// 微任务</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;promise1&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123; <span class="comment">// 微任务</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;promise2&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">process.<span class="title function_">nextTick</span>(<span class="function">() =&gt;</span> &#123; <span class="comment">// 微任务，优先级最高</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;nextTick&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;end&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>输出结果为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">start</span><br><span class="line">end</span><br><span class="line">nextTick</span><br><span class="line">promise1</span><br><span class="line">promise2</span><br><span class="line">setTimeout</span><br></pre></td></tr></table></figure>

<p>这是因为：</p>
<ol>
<li>同步代码先执行，输出 <code>start</code> 和 <code>end</code></li>
<li>然后执行微任务队列中的任务，由于 <code>process.nextTick</code> 优先级最高，所以首先输出 <code>nextTick</code></li>
<li>接着执行剩余的微任务，输出 <code>promise1</code> 和 <code>promise2</code></li>
<li>最后回到事件循环执行宏任务，输出 <code>setTimeout</code></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/12/24/AST%E5%AD%A6%E4%B9%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="wangzhiwei">
      <meta itemprop="description" content="javascript nodejs web developer...">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WBlog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/12/24/AST%E5%AD%A6%E4%B9%A0/" class="post-title-link" itemprop="url">AST学习</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-12-24 11:40:26" itemprop="dateCreated datePublished" datetime="2024-12-24T11:40:26+08:00">2024-12-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-03-18 11:10:52" itemprop="dateModified" datetime="2025-03-18T11:10:52+08:00">2025-03-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AST/" itemprop="url" rel="index"><span itemprop="name">AST</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="AST"><a href="#AST" class="headerlink" title="AST"></a>AST</h2><p>在计算机科学中，抽象语法树（Abstract Syntax Tree，AST），是源代码语法结构的⼀种抽象表示。<br>它以树状的形式表现编程语⾔的语法结构，树上的每个节点都表示源代码中的⼀种结构。<br>AST 运⽤⼴泛，⽐如：<br>⾼级语⾔的编译、机器码的⽣成<br>⼀些⾼级编辑器的错误提示、代码⾼亮、代码⾃动补全；<br>对于前端来说很多⼯具，例如 elint 、 pretiier 对代码错误或⻛格的检查，babel、typescript<br>对代码的编译处理等等。<br>AST 转化流程<br>我们可以实现⼀个⾮常简单的词法分析⼯具，来感受⼀下词法分析的魅⼒，以及这中间我们需要处理的<br>内容。<br>在例⼦中我们可以发现，我们通过读取字符串中每个元素，依次记录⾥⾯出现的内容，最终基于内容⽣<br>成配置，然后再基于配置创建新的代码的结构。<br>整个解析过程主要分为以下两个步骤：<br>分词：将整个代码字符串分割成最⼩语法单元数组<br>语法分析：在分词基础上建⽴分析语法单元之间的关系<br>词法分析器⾥，每个关键字是⼀个 Token ，每个标识符是⼀个 Token，每个操作符是⼀个 Token，每<br>个标点符号也都是⼀个 Token。除此之外，还会过滤掉源程序中的注释和空⽩字符（换⾏符、空格、制<br>表符等。<br>我们可以通过 ast-explore 来查看代码⽚段转化的结果：<br>我们可以看到，对于左侧的代码结构，通过解析字符及对应的格式，然后序列化成为⼀个对象的格式，<br>我们可以通过这个对象，来描述整体的代码的内容。<br>如果我们希望将 let 转化为 var，那后续我们只需要在基于配置渲染⽬标时，将 let 转化为 var ⽣成即<br>可。对于 AST 的类型来说，解析的过程中有这么多的类型，针对不同的语句，最终会以下⾯的类型进⾏转<br>化：</p>
<h2 id="模拟-AST-过程"><a href="#模拟-AST-过程" class="headerlink" title="模拟 AST 过程"></a>模拟 AST 过程</h2><p>index.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// before: (add 20 (subtract 4 2))</span><br><span class="line">// after: add(2, subtract(4, 2))</span><br><span class="line"></span><br><span class="line">// 分词，处理每个字符内容</span><br><span class="line">function generateToken(str) &#123;</span><br><span class="line">  let current = 0;</span><br><span class="line">  let tokens = [];</span><br><span class="line">  while(current &lt; str.length) &#123;</span><br><span class="line">    let char = str[current];</span><br><span class="line"></span><br><span class="line">    if (char === &quot;(&quot;) &#123;</span><br><span class="line">      tokens.push(&#123;</span><br><span class="line">        type: &quot;paren&quot;,</span><br><span class="line">        value: &quot;(&quot;</span><br><span class="line">      &#125;);</span><br><span class="line">      current++;</span><br><span class="line">      continue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if (char === &quot;)&quot;) &#123;</span><br><span class="line">      tokens.push(&#123;</span><br><span class="line">        type: &quot;paren&quot;,</span><br><span class="line">        value: &quot;)&quot;</span><br><span class="line">      &#125;);</span><br><span class="line">      current++;</span><br><span class="line">      continue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if (/\s/.test(char)) &#123;</span><br><span class="line">      current++;</span><br><span class="line">      continue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if (/[0-9]/.test(char)) &#123;</span><br><span class="line">      let numberValue = &#x27;&#x27;;</span><br><span class="line">      while(/[0-9]/.test(char)) &#123;</span><br><span class="line">        numberValue += char;</span><br><span class="line">        char = str[++current];</span><br><span class="line">      &#125;</span><br><span class="line">      tokens.push(&#123;</span><br><span class="line">        type: &#x27;number&#x27;,</span><br><span class="line">        value: numberValue</span><br><span class="line">      &#125;);</span><br><span class="line">      continue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if (/[a-z]/.test(char)) &#123;</span><br><span class="line">      let stringValue = &#x27;&#x27;;</span><br><span class="line">      while(/[a-z]/.test(char)) &#123;</span><br><span class="line">        stringValue += char;</span><br><span class="line">        char = str[++current];</span><br><span class="line">      &#125;</span><br><span class="line">      tokens.push(&#123;</span><br><span class="line">        type: &#x27;name&#x27;,</span><br><span class="line">        value: stringValue</span><br><span class="line">      &#125;);</span><br><span class="line">      continue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    throw new TypeError(&quot;未能识别的字符&quot;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return tokens;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// AST 生成</span><br><span class="line">function generateAST(tokens) &#123;</span><br><span class="line">  let current = 0;</span><br><span class="line"></span><br><span class="line">  let ast = &#123;</span><br><span class="line">    type: &quot;Program&quot;,</span><br><span class="line">    body: [],</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  function walk() &#123;</span><br><span class="line">    let token = tokens[current];</span><br><span class="line">    if (token.type === &#x27;number&#x27;) &#123;</span><br><span class="line">      current++;</span><br><span class="line">      return &#123;</span><br><span class="line">        type: &quot;NumberLiteral&quot;,</span><br><span class="line">        value: token.value,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    if (token.type === &#x27;paren&#x27; &amp;&amp; token.value === &quot;(&quot;) &#123;</span><br><span class="line">      token = tokens[++current];</span><br><span class="line">      let node = &#123;</span><br><span class="line">        type: &quot;CallExpression&quot;,</span><br><span class="line">        name: token.value,</span><br><span class="line">        params: [],</span><br><span class="line">      &#125;;</span><br><span class="line">      token = tokens[++current];</span><br><span class="line"></span><br><span class="line">      while(</span><br><span class="line">        (token.type !== &quot;paren&quot;) || (token.type === &#x27;paren&#x27; &amp;&amp; token.value !== &quot;)&quot;)</span><br><span class="line">      ) &#123;</span><br><span class="line">        node.params.push(walk());</span><br><span class="line">        token = tokens[current];</span><br><span class="line">      &#125;</span><br><span class="line">      current++;</span><br><span class="line">      return node;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    throw new TypeError(token.type);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  while(current &lt; tokens.length) &#123;</span><br><span class="line">    ast.body.push(walk())</span><br><span class="line">  &#125;</span><br><span class="line">  return ast;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// AST 转化： babel 插件需要我们处理的部分</span><br><span class="line">function transformer(ast) &#123;</span><br><span class="line">  let newAst = &#123;</span><br><span class="line">    type: &quot;Program&quot;,</span><br><span class="line">    body: [],</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  ast._context = newAst.body;</span><br><span class="line"></span><br><span class="line">  DFS(ast, &#123;</span><br><span class="line">    NumberLiteral: &#123;</span><br><span class="line">      enter(node, parent) &#123;</span><br><span class="line">        parent._context.push(&#123;</span><br><span class="line">          type: &quot;NumberLiteral&quot;,</span><br><span class="line">          value: node.value</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    CallExpression: &#123;</span><br><span class="line">      enter(node, parent) &#123;</span><br><span class="line">        let expression = &#123;</span><br><span class="line">          type: &quot;CallExpression&quot;,</span><br><span class="line">          callee: &#123;</span><br><span class="line">            type: &quot;Identifier&quot;,</span><br><span class="line">            name: node.name</span><br><span class="line">          &#125;,</span><br><span class="line">          arguments: [],</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        node._context = expression.arguments;</span><br><span class="line">        if (parent.type !== &quot;CallExpression&quot;) &#123;</span><br><span class="line">          expression = &#123;</span><br><span class="line">            type: &quot;ExpressionStatement&quot;,</span><br><span class="line">            expression: expression,</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        parent._context.push(expression);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  return newAst;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// AST 遍历</span><br><span class="line">function DFS(ast, visitor) &#123;</span><br><span class="line"></span><br><span class="line">  function traverseArray(children, parent) &#123;</span><br><span class="line">    children.forEach(child =&gt; traverseNode(child, parent));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function traverseNode(node, parent) &#123;</span><br><span class="line">    let methods = visitor[node.type];</span><br><span class="line">    if (methods &amp;&amp; methods.enter) &#123;</span><br><span class="line">      methods.enter(node, parent);</span><br><span class="line">    &#125;</span><br><span class="line">    switch(node.type) &#123;</span><br><span class="line">      case &quot;Program&quot;:</span><br><span class="line">        traverseArray(node.body, node);</span><br><span class="line">        break;</span><br><span class="line">      case &quot;CallExpression&quot;:</span><br><span class="line">        traverseArray(node.params, node);</span><br><span class="line">        break;</span><br><span class="line">      case &quot;NumberLiteral&quot;:</span><br><span class="line">        break;</span><br><span class="line">    &#125;</span><br><span class="line">    if (methods &amp;&amp; methods.exit) &#123;</span><br><span class="line">      methods.exit(node, parent);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  return traverseNode(ast, null);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ast -&gt; code 生成代码过程</span><br><span class="line">function generate(ast) &#123;</span><br><span class="line">  switch(ast.type) &#123;</span><br><span class="line">    case &quot;Program&quot;: return ast.body.map(subAst =&gt; generate(subAst)).join(&#x27;\n&#x27;);</span><br><span class="line">    case &quot;ExpressionStatement&quot;: return generate(ast.expression) + &quot;;&quot;;</span><br><span class="line">    case &quot;CallExpression&quot;: return generate(ast.callee) + &quot;(&quot; +ast.arguments.map(arg =&gt; generate(arg)).join(&#x27;, &#x27;) + &quot;)&quot;;</span><br><span class="line">    case &quot;Identifier&quot;: return ast.name;</span><br><span class="line">    case &quot;NumberLiteral&quot;: return ast.value;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function parser(input) &#123;</span><br><span class="line">  const tokens = generateToken(input);</span><br><span class="line">  console.log(tokens);</span><br><span class="line">  const ast = generateAST(tokens);</span><br><span class="line">  console.log(JSON.stringify(ast, null, 2));</span><br><span class="line">  const newAst = transformer(ast);</span><br><span class="line">  console.log(JSON.stringify(newAst, null, 2));</span><br><span class="line">  const code = generate(newAst);</span><br><span class="line">  return code;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = parser;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>test.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">const parser = require(&#x27;./index.js&#x27;);</span><br><span class="line"></span><br><span class="line">const input = &quot;(add 2 (subtract 4 2))&quot;</span><br><span class="line">const output = &quot;add(2,subtract(4,2));&quot;</span><br><span class="line"></span><br><span class="line">console.log(&quot;input&quot;, input);</span><br><span class="line">console.log(&quot;output&quot;, parser(input));</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="Babel"><a href="#Babel" class="headerlink" title="Babel"></a>Babel</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ThisExpression | Identifier | Literal |</span><br><span class="line">ArrayExpression | ObjectExpression | FunctionExpression |</span><br><span class="line">ArrowFunctionExpression | ClassExpression |</span><br><span class="line">TaggedTemplateExpression | MemberExpression | Super | MetaProperty |</span><br><span class="line">NewExpression | CallExpression | UpdateExpression | AwaitExpression |</span><br><span class="line">UnaryExpression |</span><br><span class="line">BinaryExpression | LogicalExpression | ConditionalExpression |</span><br><span class="line">YieldExpression | AssignmentExpression | SequenceExpression;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>针对不同的⼯具，最终也有不同的效果：<br>@babel&#x2F;parser : 转化为 AST 抽象语法树；<br>@babel&#x2F;traverse 对 AST 节点进⾏递归遍历；<br>@babel&#x2F;types 对具体的 AST 节点进⾏进⾏修改；<br>@babel&#x2F;generator : AST 抽象语法树⽣成为新的代码；</p>
<p>Babel 的处理步骤</p>
<p>Babel 的三个主要处理步骤分别是： 解析（parse），转换（transform），⽣成（generate）。.</p>
<p>词法分析阶段把字符串形式的代码转换为 令牌（tokens） 流。.</p>
<p>你可以把令牌看作是⼀个扁平的语法⽚段数组：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">n * n;</span><br><span class="line">[</span><br><span class="line">&#123; type: &#123; ... &#125;, value: &quot;n&quot;, start: 0, end: 1, loc: &#123; ... &#125; &#125;,</span><br><span class="line">&#123; type: &#123; ... &#125;, value: &quot;*&quot;, start: 2, end: 3, loc: &#123; ... &#125; &#125;,</span><br><span class="line">&#123; type: &#123; ... &#125;, value: &quot;n&quot;, start: 4, end: 5, loc: &#123; ... &#125; &#125;,</span><br><span class="line">...</span><br><span class="line">]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>每⼀个 type 有⼀组属性来描述该令牌：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    type: &#123;</span><br><span class="line">        label: &#x27;name&#x27;,</span><br><span class="line">        keyword: undefined,</span><br><span class="line">        beforeExpr: false,</span><br><span class="line">        startsExpr: true,</span><br><span class="line">        rightAssociative: false,</span><br><span class="line">        isLoop: false,isAssign: false,</span><br><span class="line">        prefix: false,</span><br><span class="line">        postfix: false,</span><br><span class="line">        binop: null,</span><br><span class="line">        updateContext: null</span><br><span class="line">    &#125;,</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>和 AST 节点⼀样它们也有 start ， end ， loc 属性。</p>
<p>对于⼀个 babel 插件来说，我们先从先从⼀个接收了当前 babel 对象作为参数的 function 开始。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export default function(babel) &#123;</span><br><span class="line">// plugin contents</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>由于你将会经常这样使⽤，所以直接取出 babel.types 会更⽅便：（译注：这是 ES2015 语法中的对<br>象解构，即 Destructuring）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export default function(&#123; types: t &#125;) &#123;</span><br><span class="line">// plugin contents</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>接着返回⼀个对象，其 visitor 属性是这个插件的主要访问者。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">export default function(&#123; types: t &#125;) &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        visitor: &#123;</span><br><span class="line">        // visitor contents</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>Visitor 中的每个函数接收2个参数： path 和 state</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">export default function(&#123; types: t &#125;) &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        visitor: &#123;</span><br><span class="line">            Identifier(path, state) &#123;&#125;,</span><br><span class="line">            ASTNodeTypeHere(path, state) &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>让我们快速编写⼀个可⽤的插件来展示⼀下它是如何⼯作的。下⾯是我们的源代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">foo === bar;</span><br></pre></td></tr></table></figure>

<p>其 AST 形式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    type: &quot;BinaryExpression&quot;,</span><br><span class="line">    operator: &quot;===&quot;,</span><br><span class="line">    left: &#123;</span><br><span class="line">        type: &quot;Identifier&quot;,</span><br><span class="line">        name: &quot;foo&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    right: &#123;</span><br><span class="line">        type: &quot;Identifier&quot;,</span><br><span class="line">        name: &quot;bar&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>我们从添加 BinaryExpression 访问者⽅法开始：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">export default function(&#123; types: t &#125;) &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        visitor: &#123;</span><br><span class="line">            BinaryExpression(path) &#123;</span><br><span class="line">                // ...</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后我们更确切⼀些，只关注哪些使⽤了 &#x3D;&#x3D;&#x3D; 的 BinaryExpression 。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">visitor: &#123;</span><br><span class="line">    BinaryExpression(path) &#123;</span><br><span class="line">    if (path.node.operator !== &quot;===&quot;) &#123;</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">    // ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>现在我们⽤新的标识符来替换 left 属性：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">BinaryExpression(path) &#123;</span><br><span class="line">    if (path.node.operator !== &quot;===&quot;) &#123;</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">    path.node.left = t.identifier(&quot;sebmck&quot;);</span><br><span class="line">    // ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>于是如果我们运⾏这个插件我们会得到：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sebmck === bar;</span><br></pre></td></tr></table></figure>

<p>现在只需要替换 right 属性了。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">BinaryExpression(path) &#123;</span><br><span class="line">    if (path.node.operator !== &quot;===&quot;) &#123;</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">    path.node.left = t.identifier(&quot;sebmck&quot;);</span><br><span class="line">    path.node.right = t.identifier(&quot;dork&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>这就是我们的最终结果了：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sebmck === dork;</span><br></pre></td></tr></table></figure>



<p>我们可以⽤更复杂的⼀些配置来完善我们的插件。。</p>
<h2 id="Babel-插件开发"><a href="#Babel-插件开发" class="headerlink" title="Babel 插件开发"></a>Babel 插件开发</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">.</span><br><span class="line">├── index.js</span><br><span class="line">├── node_modules</span><br><span class="line">├── output.js</span><br><span class="line">├── package.json</span><br><span class="line">├── plugin.js</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">package.json</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;babel&quot;,</span><br><span class="line">  &quot;version&quot;: &quot;1.0.0&quot;,</span><br><span class="line">  &quot;description&quot;: &quot;&quot;,</span><br><span class="line">  &quot;main&quot;: &quot;index.js&quot;,</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;keywords&quot;: [],</span><br><span class="line">  &quot;author&quot;: &quot;&quot;,</span><br><span class="line">  &quot;license&quot;: &quot;ISC&quot;,</span><br><span class="line">  &quot;dependencies&quot;: &#123;</span><br><span class="line">    &quot;@babel/core&quot;: &quot;^7.11.1&quot;,</span><br><span class="line">    &quot;@babel/types&quot;: &quot;^7.11.0&quot;,</span><br><span class="line">    &quot;babel-cli&quot;: &quot;^6.26.0&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">.babelrc </span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;plugins&quot;: [</span><br><span class="line">    [&quot;./plugin&quot;, &#123;</span><br><span class="line">      &quot;tips&quot;: &quot;newTips&quot;</span><br><span class="line">    &#125;]</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">plugin.js</span><br><span class="line"></span><br><span class="line">module.exports = function(&#123;types: t&#125;) &#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    visitor: &#123;</span><br><span class="line">      Identifier(path, state) &#123;</span><br><span class="line">        const name = path.node.name;</span><br><span class="line">        console.log(state.opts);</span><br><span class="line"></span><br><span class="line">        // path.node.name = `__$&#123;name&#125;`;</span><br><span class="line">        if (state.opts[name]) &#123;</span><br><span class="line">          path.node.name = state.opts[name];</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      MemberExpression(path) &#123;</span><br><span class="line">        if (path.get(&quot;object&quot;).matchesPattern(&quot;process.env&quot;)) &#123;</span><br><span class="line">          const key = path.toComputedKey();</span><br><span class="line">          if (t.isStringLiteral(key)) &#123;</span><br><span class="line">            path.replaceWith(t.valueToNode(process.env[key.value]));</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      BinaryExpression(path) &#123;</span><br><span class="line">        console.log(path.node.left);</span><br><span class="line">        console.log(path.node.right);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">index.js</span><br><span class="line"></span><br><span class="line">let tips;</span><br><span class="line">let array;</span><br><span class="line">const a = process.env.NODE_ENV</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">执行babel 编译命令</span><br><span class="line">NODE_ENV=&quot;production&quot; ./node_modules/.bin/babel index.js -o output.js</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">生成 output.js 文件</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">let newTips;</span><br><span class="line">let array;</span><br><span class="line">const a = &quot;production&quot;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>









<p>其他：<br><a target="_blank" rel="noopener" href="https://www.astexplorer.net/">https://www.astexplorer.net/</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/12/23/typescript%E5%A4%8D%E4%B9%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="wangzhiwei">
      <meta itemprop="description" content="javascript nodejs web developer...">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WBlog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/12/23/typescript%E5%A4%8D%E4%B9%A0/" class="post-title-link" itemprop="url">typescript复习</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-12-23 17:34:43" itemprop="dateCreated datePublished" datetime="2024-12-23T17:34:43+08:00">2024-12-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-03-18 11:10:52" itemprop="dateModified" datetime="2025-03-18T11:10:52+08:00">2025-03-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/typescript/" itemprop="url" rel="index"><span itemprop="name">typescript</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cnpm i typescript</span><br><span class="line">cnpm i @types/node</span><br><span class="line"></span><br><span class="line">npx tsc --init</span><br><span class="line"></span><br><span class="line">生成  tsconfig.json</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">npx tsc </span><br><span class="line">npx tsc --watch </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">nodejs 环境的tsconfig.json 配置</span><br><span class="line">&#123;</span><br><span class="line">  &quot;compilerOptions&quot;: &#123;</span><br><span class="line">    </span><br><span class="line">    &quot;target&quot;: &quot;es2016&quot;, //目标代码</span><br><span class="line">    &quot;lib&quot;: [&quot;es2016&quot;], //开发时的库</span><br><span class="line">    // &quot;module&quot;:&quot;ES2015&quot;, //模块规范</span><br><span class="line">    &quot;module&quot;:&quot;CommonJS&quot;, //设置编译结果中使用的模块化标准</span><br><span class="line">    &quot;outDir&quot;: &quot;dist&quot;, //输出目录</span><br><span class="line">    &quot;strictNullChecks&quot;: true, //严格空检查</span><br><span class="line">    &quot;removeComments&quot;: true, //编译结果移除注释</span><br><span class="line">    &quot;esModuleInterop&quot;: true, //兼启用es模块化交互非es模块导出</span><br><span class="line">    &quot;noEmitOnError&quot;: true, // 编译错误不输出编译结果</span><br><span class="line">    // &quot;moduleResolution&quot;: &quot;node&quot; //设置解析模块的模式</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;include&quot;: [&quot;src/**/*&quot;],  //指定编译文件</span><br><span class="line">  // &quot;files&quot;: [&quot;src/index.ts&quot;] //指定编译文件,</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">// 泛型 在函数中使用</span><br><span class="line"></span><br><span class="line">function take2&lt;T = number&gt;(arr: T[], n: number): T[]</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    if (n &gt; arr.length) &#123;</span><br><span class="line">        return arr;</span><br><span class="line">    &#125;</span><br><span class="line">    const newArr:T[] = [];</span><br><span class="line"></span><br><span class="line">    for (let i = 0; i &lt; n; i++) &#123;</span><br><span class="line">        newArr.push(arr[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return newArr;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">take2&lt;number&gt;([1,2], 3);</span><br><span class="line"></span><br><span class="line">take2&lt;string&gt;([&#x27;1&#x27;,&#x27;2&#x27;], 3);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>函数的泛型应用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function combin&lt;T extends number | string&gt;(a: T, b: T): T&#123;</span><br><span class="line">    return (a as any) + (b as any) as T;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const res = combin(1,2);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const res1 = combin(&#x27;a&#x27;,&#x27;b&#x27;);</span><br><span class="line"></span><br><span class="line">// const res2 = combin(3,&#x27;b&#x27;); // 报错</span><br><span class="line"></span><br></pre></td></tr></table></figure>




<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">函数中的泛型应用</span><br><span class="line"></span><br><span class="line">type callBack&lt;T&gt; = (n: T, i: number) =&gt; boolean;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">function filter&lt;T&gt;(arr: T[], callback: callBack&lt;T&gt;): T[]</span><br><span class="line">&#123;</span><br><span class="line">    const newArr: T[] = [];</span><br><span class="line">    for (let i = 0; i &lt; arr.length; i++) &#123;</span><br><span class="line">        if (callback(arr[i], i)) &#123;</span><br><span class="line">            newArr.push(arr[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return newArr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const arr = [1, 2, 3, 4, 5];</span><br><span class="line"></span><br><span class="line">console.log(filter(arr, (n) =&gt; n &gt; 2));</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">构造函数中的泛型应用</span><br><span class="line"></span><br><span class="line">class ArrayHelper&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">    constructor(private arr: T[])</span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    take(n: number): T[]</span><br><span class="line">    &#123;</span><br><span class="line">        if (n &gt; this.arr.length) &#123;</span><br><span class="line">            return this.arr;</span><br><span class="line">        &#125;</span><br><span class="line">        const newArr:T[] = [];</span><br><span class="line">        for (let i = 0; i &lt; n; i++) &#123;</span><br><span class="line">            newArr.push(this.arr[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        return newArr;</span><br><span class="line">    &#125;</span><br><span class="line">    filter(callback: callBack&lt;T&gt;): T[]</span><br><span class="line">    &#123;</span><br><span class="line">        const newArr: T[] = [];</span><br><span class="line">        for (let i = 0; i &lt; this.arr.length; i++) &#123;</span><br><span class="line">            if (callback(this.arr[i], i)) &#123;</span><br><span class="line">                newArr.push(this.arr[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return newArr;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   shuffle() &#123;</span><br><span class="line"></span><br><span class="line">    for (let i = this.arr.length - 1; i &gt; 0; i--) &#123;</span><br><span class="line">        const j = Math.floor(Math.random() * (i + 1));</span><br><span class="line">        [this.arr[i], this.arr[j]] = [this.arr[j], this.arr[i]];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const helper = new ArrayHelper(arr);</span><br><span class="line"></span><br><span class="line">const newA = helper.filter(n =&gt; n &gt; 2);</span><br><span class="line"></span><br><span class="line">console.log(newA);</span><br><span class="line"></span><br><span class="line">helper.shuffle();</span><br><span class="line"></span><br><span class="line">console.log(helper.take(3));</span><br></pre></td></tr></table></figure>

<p>泛型约束</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">interface hasNameProperty &#123;</span><br><span class="line">    name: string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function nameToUpperCase &lt;T extends hasNameProperty&gt; (obj: T): T</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    obj.name = obj.name.split(&quot; &quot;)</span><br><span class="line">        .map(n =&gt; n[0].toUpperCase() + n.slice(1))</span><br><span class="line">        .join(&quot; &quot;);</span><br><span class="line"></span><br><span class="line">    return obj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const o = &#123;</span><br><span class="line">    name: &quot;john wang&quot;,</span><br><span class="line">    age: 30</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const newO = nameToUpperCase(o);</span><br><span class="line"></span><br><span class="line">console.log(newO.name);</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="导入三方模块"><a href="#导入三方模块" class="headerlink" title="导入三方模块"></a>导入三方模块</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">// 导入文件系统模块 在 ts 中异常</span><br><span class="line">// import fs from &#x27;fs&#x27;;</span><br><span class="line"></span><br><span class="line">//需要改写为 </span><br><span class="line">import &#123;readFileSync&#125; from &#x27;fs&#x27;;</span><br><span class="line"></span><br><span class="line">//或改写为</span><br><span class="line">//import * as fs from &quot;fs&quot;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const input = readFileSync(&#x27;./input.txt&#x27;, &#x27;utf-8&#x27;).split(&#x27;\n&#x27;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">编译后代码</span><br><span class="line"></span><br><span class="line">&quot;use strict&quot;;</span><br><span class="line">Object.defineProperty(exports, &quot;__esModule&quot;, &#123; value: true &#125;);</span><br><span class="line">const fs_1 = require(&quot;fs&quot;);</span><br><span class="line">const input = (0, fs_1.readFileSync)(&#x27;./input.txt&#x27;, &#x27;utf-8&#x27;).split(&#x27;\n&#x27;);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//或改写为</span><br><span class="line">import * as fs from &quot;fs&quot;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const input = fs.readFileSync(&#x27;./input.txt&#x27;, &#x27;utf-8&#x27;).split(&#x27;\n&#x27;);</span><br><span class="line"></span><br><span class="line">编译后代码</span><br><span class="line"></span><br><span class="line">&quot;use strict&quot;;</span><br><span class="line">var __createBinding = (this &amp;&amp; this.__createBinding) || (Object.create ? (function(o, m, k, k2) &#123;</span><br><span class="line">    if (k2 === undefined) k2 = k;</span><br><span class="line">    var desc = Object.getOwnPropertyDescriptor(m, k);</span><br><span class="line">    if (!desc || (&quot;get&quot; in desc ? !m.__esModule : desc.writable || desc.configurable)) &#123;</span><br><span class="line">      desc = &#123; enumerable: true, get: function() &#123; return m[k]; &#125; &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    Object.defineProperty(o, k2, desc);</span><br><span class="line">&#125;) : (function(o, m, k, k2) &#123;</span><br><span class="line">    if (k2 === undefined) k2 = k;</span><br><span class="line">    o[k2] = m[k];</span><br><span class="line">&#125;));</span><br><span class="line">var __setModuleDefault = (this &amp;&amp; this.__setModuleDefault) || (Object.create ? (function(o, v) &#123;</span><br><span class="line">    Object.defineProperty(o, &quot;default&quot;, &#123; enumerable: true, value: v &#125;);</span><br><span class="line">&#125;) : function(o, v) &#123;</span><br><span class="line">    o[&quot;default&quot;] = v;</span><br><span class="line">&#125;);</span><br><span class="line">var __importStar = (this &amp;&amp; this.__importStar) || (function () &#123;</span><br><span class="line">    var ownKeys = function(o) &#123;</span><br><span class="line">        ownKeys = Object.getOwnPropertyNames || function (o) &#123;</span><br><span class="line">            var ar = [];</span><br><span class="line">            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;</span><br><span class="line">            return ar;</span><br><span class="line">        &#125;;</span><br><span class="line">        return ownKeys(o);</span><br><span class="line">    &#125;;</span><br><span class="line">    return function (mod) &#123;</span><br><span class="line">        if (mod &amp;&amp; mod.__esModule) return mod;</span><br><span class="line">        var result = &#123;&#125;;</span><br><span class="line">        if (mod != null) for (var k = ownKeys(mod), i = 0; i &lt; k.length; i++) if (k[i] !== &quot;default&quot;) __createBinding(result, mod, k[i]);</span><br><span class="line">        __setModuleDefault(result, mod);</span><br><span class="line">        return result;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;)();</span><br><span class="line">Object.defineProperty(exports, &quot;__esModule&quot;, &#123; value: true &#125;);</span><br><span class="line">const fs = __importStar(require(&quot;fs&quot;));</span><br><span class="line">const input = fs.readFileSync(&#x27;./input.txt&#x27;, &#x27;utf-8&#x27;).split(&#x27;\n&#x27;);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>非要用 import fs from ‘fs’; 要改写 配置文件</p>
<p>增加<br>“esModuleInterop”: true, &#x2F;&#x2F;兼容es6模块</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">import fs from &#x27;fs&#x27;;</span><br><span class="line">const input = fs.readFileSync(&#x27;./input.txt&#x27;, &#x27;utf-8&#x27;).split(&#x27;\n&#x27;);</span><br><span class="line"></span><br><span class="line">编译后代码</span><br><span class="line"></span><br><span class="line">&quot;use strict&quot;;</span><br><span class="line">var __importDefault = (this &amp;&amp; this.__importDefault) || function (mod) &#123;</span><br><span class="line">    return (mod &amp;&amp; mod.__esModule) ? mod : &#123; &quot;default&quot;: mod &#125;;</span><br><span class="line">&#125;;</span><br><span class="line">Object.defineProperty(exports, &quot;__esModule&quot;, &#123; value: true &#125;);</span><br><span class="line">const fs_1 = __importDefault(require(&quot;fs&quot;));</span><br><span class="line">const input = fs_1.default.readFileSync(&#x27;./input.txt&#x27;, &#x27;utf-8&#x27;).split(&#x27;\n&#x27;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="TS中书写-commjs-模块代码"><a href="#TS中书写-commjs-模块代码" class="headerlink" title="TS中书写 commjs 模块代码"></a>TS中书写 commjs 模块代码</h2><p>导出 export &#x3D; xxxx</p>
<p>导入 import xxx &#x3D; require(‘xxx’);</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">c.ts</span><br><span class="line">export = &#123;</span><br><span class="line">    add: (a:number,b:number)=&gt;a+b,</span><br><span class="line">    name: &#x27;c&#x27;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">05.ts</span><br><span class="line"></span><br><span class="line">import aa = require(&#x27;./c&#x27;);</span><br><span class="line"></span><br><span class="line">console.log(aa.name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">编译后代码</span><br><span class="line"></span><br><span class="line">&quot;use strict&quot;;</span><br><span class="line">Object.defineProperty(exports, &quot;__esModule&quot;, &#123; value: true &#125;);</span><br><span class="line">const aa = require(&quot;./c&quot;);</span><br><span class="line">console.log(aa.name);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&quot;use strict&quot;;</span><br><span class="line">module.exports = &#123;</span><br><span class="line">    add: (a, b) =&gt; a + b,</span><br><span class="line">    name: &#x27;c&#x27;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>




<h2 id="枚举"><a href="#枚举" class="headerlink" title="枚举"></a>枚举</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">enum Gend &#123;</span><br><span class="line">    Male = &#x27;male&#x27;,</span><br><span class="line">    Female = &#x27;female&#x27;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let gen: Gend;</span><br><span class="line"></span><br><span class="line">gen = Gend.Male;</span><br><span class="line">gen = Gend.Female;</span><br><span class="line"></span><br><span class="line">会参与编译 枚举属性的值是字符串或数字，为数字时会自增，可以赋值（不建议）</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="接口和别名"><a href="#接口和别名" class="headerlink" title="接口和别名"></a>接口和别名</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">type Gender = &#x27;male&#x27; | &#x27;female&#x27;;</span><br><span class="line">let gender: Gender;</span><br><span class="line">gender = &#x27;male&#x27;;</span><br><span class="line">gender = &#x27;female&#x27;;</span><br><span class="line"></span><br><span class="line">function showGender(gender: Gender): void</span><br><span class="line">&#123;</span><br><span class="line">    console.log(gender);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">//接口</span><br><span class="line">interface Person &#123;</span><br><span class="line">    name: string;</span><br><span class="line">    age: number;</span><br><span class="line">    sayHello(): void;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 类型别名</span><br><span class="line">type Person2 = &#123;</span><br><span class="line">    name: string;</span><br><span class="line">    age: number;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">let p1: Person = &#123;</span><br><span class="line">    name: &#x27;zhangsan&#x27;,</span><br><span class="line">    age: 18,</span><br><span class="line">    sayHello()&#123;</span><br><span class="line">        console.log(&#x27;hello&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">let p2: Person2 = &#123;</span><br><span class="line">    name: &#x27;zhangsan&#x27;,</span><br><span class="line">    age: 18</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">type Condition = (n: number) =&gt; boolean;</span><br><span class="line"></span><br><span class="line">function sum(number: number[], callback: Condition) &#123;</span><br><span class="line"></span><br><span class="line">    let s = 0;</span><br><span class="line"></span><br><span class="line">    number.forEach(n =&gt; &#123;</span><br><span class="line">        if (callback(n)) &#123;</span><br><span class="line">            s += n;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const result =  sum([1,2,3,4,5], n =&gt; n % 2 === 0);</span><br><span class="line"></span><br><span class="line">console.log(result);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="接口（Interface）和类型别名（Type-Alias）的区别"><a href="#接口（Interface）和类型别名（Type-Alias）的区别" class="headerlink" title="接口（Interface）和类型别名（Type Alias）的区别"></a>接口（Interface）和类型别名（Type Alias）的区别</h2><p>在 TypeScript 中，接口和类型别名都可以用来定义对象的形状，但它们有一些关键的区别。以下是它们的主要差异：</p>
<h3 id="1-扩展性（Extensibility）"><a href="#1-扩展性（Extensibility）" class="headerlink" title="1. 扩展性（Extensibility）"></a>1. 扩展性（Extensibility）</h3><ul>
<li><p><strong>接口</strong>：可以使用 <code>extends</code> 关键字来扩展其他接口。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Employee</span> <span class="keyword">extends</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="attr">employeeId</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>类型别名</strong>：不能直接扩展其他类型别名，但可以通过交叉类型（intersection types）实现类似的效果。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Person</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Employee</span> = <span class="title class_">Person</span> &amp; &#123;</span><br><span class="line">    <span class="attr">employeeId</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-合并（Merging）"><a href="#2-合并（Merging）" class="headerlink" title="2. 合并（Merging）"></a>2. 合并（Merging）</h3><ul>
<li><p><strong>接口</strong>：支持声明合并（declaration merging），即多个同名接口会自动合并为一个接口。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 等价于</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>类型别名</strong>：不支持声明合并，多个同名类型别名会导致编译错误。</p>
</li>
</ul>
<h3 id="3-使用场景"><a href="#3-使用场景" class="headerlink" title="3. 使用场景"></a>3. 使用场景</h3><ul>
<li><p><strong>接口</strong>：主要用于定义对象的形状，通常用于描述类、函数参数或返回值等。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Admin</span> <span class="keyword">implements</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">role</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>类型别名</strong>：更加灵活，可以用于定义原始类型、联合类型、元组等复杂类型。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="variable constant_">ID</span> = <span class="built_in">number</span> | <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Point</span> = [<span class="built_in">number</span>, <span class="built_in">number</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">PartialPerson</span> = &#123;</span><br><span class="line">    name?: <span class="built_in">string</span>;</span><br><span class="line">    age?: <span class="built_in">number</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="4-可重载（Overloading）"><a href="#4-可重载（Overloading）" class="headerlink" title="4. 可重载（Overloading）"></a>4. 可重载（Overloading）</h3><ul>
<li><p><strong>接口</strong>：可以用于函数重载。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Func</span> &#123;</span><br><span class="line">    (<span class="attr">a</span>: <span class="built_in">number</span>): <span class="built_in">number</span>;</span><br><span class="line">    (<span class="attr">a</span>: <span class="built_in">string</span>): <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>类型别名</strong>：不能直接用于函数重载，但可以通过函数类型定义实现类似效果。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Func</span> = &#123;</span><br><span class="line">    (<span class="attr">a</span>: <span class="built_in">number</span>): <span class="built_in">number</span>;</span><br><span class="line">    (<span class="attr">a</span>: <span class="built_in">string</span>): <span class="built_in">string</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="5-性能"><a href="#5-性能" class="headerlink" title="5. 性能"></a>5. 性能</h3><ul>
<li><strong>接口</strong>：编译后会被优化掉，不会生成额外的 JavaScript 代码。</li>
<li><strong>类型别名</strong>：同样不会生成额外的 JavaScript 代码，但在某些情况下可能会有细微的性能差异。</li>
</ul>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><ul>
<li>如果你需要定义对象的形状并且希望支持扩展和合并，建议使用接口。</li>
<li>如果你需要定义更复杂的类型（如联合类型、元组等），或者需要更高的灵活性，建议使用类型别名。</li>
</ul>
<p>在你的代码中，<code>Person</code> 和 <code>Person2</code> 分别使用了接口和类型别名来定义相同的内容。你可以根据上述区别选择更适合你需求的方式。</p>
<h2 id="可重载"><a href="#可重载" class="headerlink" title="可重载"></a>可重载</h2><p>在 TypeScript 中，函数重载（Function Overloading） 是指定义多个具有相同名称但参数列表不同的函数签名。编译器会根据调用时传递的参数类型和数量来选择最匹配的函数签名。函数重载允许你为同一个函数提供多种调用方式，从而提高代码的灵活性和可读性。</p>
<p>示例：</p>
<p>typescript</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// 定义两个重载签名</span><br><span class="line">function add(a: number, b: number): number;</span><br><span class="line">function add(a: string, b: string): string;</span><br><span class="line"></span><br><span class="line">// 实现函数</span><br><span class="line">function add(a: any, b: any): any &#123;</span><br><span class="line">    return a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 调用</span><br><span class="line">console.log(add(1, 2));      // 输出: 3</span><br><span class="line">console.log(add(&quot;hello&quot;, &quot; world&quot;));  // 输出: hello world</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="访问修饰符"><a href="#访问修饰符" class="headerlink" title="访问修饰符"></a>访问修饰符</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">class User &#123;</span><br><span class="line">    </span><br><span class="line">    readonly id:number</span><br><span class="line">    name:string</span><br><span class="line">    age:number</span><br><span class="line">    pid?:string</span><br><span class="line"></span><br><span class="line">    // ts语法 访问修饰符</span><br><span class="line">    private publishNumber:number = 3</span><br><span class="line">    private curNumber:number = 0</span><br><span class="line"></span><br><span class="line">    constructor(name:string,age:number)&#123;</span><br><span class="line">        this.id = Math.random();</span><br><span class="line">        this.name = name;</span><br><span class="line">        this.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    publish()&#123;</span><br><span class="line">        if (this.curNumber &gt;= this.publishNumber) &#123;</span><br><span class="line">            console.log(`$&#123;this.name&#125; 已经发布文章上限`);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        this.curNumber++;</span><br><span class="line">        console.log(`$&#123;this.name&#125; 发布了第$&#123;this.curNumber&#125;篇文章`);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const u = new User(&#x27;张三&#x27;,18);</span><br><span class="line">u.pid = &#x27;1111&#x27;;</span><br><span class="line">// u.id = 2;</span><br><span class="line">console.log(u.id);</span><br><span class="line">console.log(u.pid);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">u.publish();</span><br><span class="line">u.publish();</span><br><span class="line">u.publish();</span><br><span class="line">u.publish();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">编译后代码</span><br><span class="line">==&gt;&gt;</span><br><span class="line"></span><br><span class="line">class User &#123;</span><br><span class="line">    constructor(name, age) &#123;</span><br><span class="line">        this.publishNumber = 3;</span><br><span class="line">        this.curNumber = 0;</span><br><span class="line">        this.id = Math.random();</span><br><span class="line">        this.name = name;</span><br><span class="line">        this.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    publish() &#123;</span><br><span class="line">        if (this.curNumber &gt;= this.publishNumber) &#123;</span><br><span class="line">            console.log(`$&#123;this.name&#125; 已经发布文章上限`);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        this.curNumber++;</span><br><span class="line">        console.log(`$&#123;this.name&#125; 发布了第$&#123;this.curNumber&#125;篇文章`);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">const u = new User(&#x27;张三&#x27;, 18);</span><br><span class="line">u.pid = &#x27;1111&#x27;;</span><br><span class="line">console.log(u.id);</span><br><span class="line">console.log(u.pid);</span><br><span class="line">u.publish();</span><br><span class="line">u.publish();</span><br><span class="line">u.publish();</span><br><span class="line">u.publish();</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="React-TS"><a href="#React-TS" class="headerlink" title="React + TS"></a>React + TS</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="JSX-和-TSX-的区别"><a href="#JSX-和-TSX-的区别" class="headerlink" title="JSX 和 TSX 的区别"></a>JSX 和 TSX 的区别</h2><p>在 React 开发中，JSX 和 TSX 是两种不同的文件扩展名，它们用于定义组件的模板语法。以下是它们的主要区别：</p>
<h3 id="1-文件扩展名"><a href="#1-文件扩展名" class="headerlink" title="1. 文件扩展名"></a>1. 文件扩展名</h3><ul>
<li><strong>JSX</strong>: 文件扩展名为 <code>.jsx</code>，主要用于编写 React 组件，但不包含 TypeScript 类型检查。</li>
<li><strong>TSX</strong>: 文件扩展名为 <code>.tsx</code>，不仅支持 JSX 语法，还集成了 TypeScript 的类型检查功能。</li>
</ul>
<h3 id="2-类型检查"><a href="#2-类型检查" class="headerlink" title="2. 类型检查"></a>2. 类型检查</h3><ul>
<li><strong>JSX</strong>: 没有内置的类型检查功能，因此无法在编译时捕获类型错误。</li>
<li><strong>TSX</strong>: 支持 TypeScript 的类型检查，可以在编译时检测并报告类型错误，提高代码的健壮性和可维护性。</li>
</ul>
<h3 id="3-语法兼容性"><a href="#3-语法兼容性" class="headerlink" title="3. 语法兼容性"></a>3. 语法兼容性</h3><ul>
<li><strong>JSX</strong>: 只能使用 JavaScript 语法。</li>
<li><strong>TSX</strong>: 可以使用 TypeScript 语法，包括类型注解、接口、泛型等。</li>
</ul>
<h3 id="4-示例代码"><a href="#4-示例代码" class="headerlink" title="4. 示例代码"></a>4. 示例代码</h3><h3 id="JSX-示例"><a href="#JSX-示例" class="headerlink" title="JSX 示例"></a>JSX 示例</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MyComponent.jsx</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">MyComponent</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">MyComponent</span>;</span><br></pre></td></tr></table></figure>

<h3 id="TSX-示例"><a href="#TSX-示例" class="headerlink" title="TSX 示例"></a>TSX 示例</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MyComponent.tsx</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">MyComponentProps</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * React.FC&lt;MyComponentProps&gt; 是 TypeScript 中用于定义 React 函数组件的一种类型。</span></span><br><span class="line"><span class="comment">    React.FC 是 React.FunctionComponent 的缩写，它是一个泛型，可以接受一个对象作为参数，这个对象描述了组件的属性类型。</span></span><br><span class="line"><span class="comment">    MyComponentProps 是你自定义的一个接口或类型，用来定义组件接收的 props 类型。</span></span><br><span class="line"><span class="comment">    使用 React.FC&lt;MyComponentProps&gt; 有以下好处：</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    明确指定了组件的 props 类型，增强了代码的可读性和可维护性。</span></span><br><span class="line"><span class="comment">    提供了更好的编辑器支持，如自动补全和类型检查。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> ** /</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> // 推荐使用</span></span><br><span class="line"><span class="comment">const MyComponent: React.FC&lt;MyComponentProps&gt; = (&#123; name &#125;) =&gt; &#123;</span></span><br><span class="line"><span class="comment">    return (</span></span><br><span class="line"><span class="comment">        &lt;div&gt;</span></span><br><span class="line"><span class="comment">            &lt;h1&gt;Hello, &#123;name&#125;&lt;/h1&gt;</span></span><br><span class="line"><span class="comment">        &lt;/div&gt;</span></span><br><span class="line"><span class="comment">    );</span></span><br><span class="line"><span class="comment">&#125;;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">export default MyComponent;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">或者</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">export function MyComponent(props: MyComponentProps) &#123;</span></span><br><span class="line"><span class="comment">    return (</span></span><br><span class="line"><span class="comment">        &lt;div&gt;</span></span><br><span class="line"><span class="comment">            &lt;h1&gt;Hello, &#123;props.name&#125;&lt;/h1&gt;</span></span><br><span class="line"><span class="comment">        &lt;/div&gt;</span></span><br><span class="line"><span class="comment">    )</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br></pre></td></tr></table></figure>

<h3 id="5-编译和工具支持"><a href="#5-编译和工具支持" class="headerlink" title="5. 编译和工具支持"></a>5. 编译和工具支持</h3><ul>
<li><strong>JSX</strong>: 使用 Babel 等工具进行编译，通常与 Webpack 或其他模块打包工具结合使用。</li>
<li><strong>TSX</strong>: 使用 TypeScript 编译器（tsc）进行编译，同时可以与 Babel 结合使用以支持更广泛的浏览器兼容性。</li>
</ul>
<h3 id="6-性能"><a href="#6-性能" class="headerlink" title="6. 性能"></a>6. 性能</h3><ul>
<li><strong>JSX</strong> 和 <strong>TSX</strong> 在运行时性能上没有显著差异，因为最终都会被编译为普通的 JavaScript 代码。但是，TSX 提供了更好的开发时体验，减少了潜在的类型错误。</li>
</ul>
<h3 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h3><ul>
<li>如果你希望在 React 项目中使用 TypeScript 进行类型检查和增强的开发体验，建议使用 <code>.tsx</code> 文件。</li>
<li>如果你只需要简单的 JSX 语法且不需要 TypeScript 的类型检查，可以选择 <code>.jsx</code> 文件。</li>
</ul>
<p>在现代 React 开发中，推荐使用 <code>.tsx</code> 文件，因为它提供了更好的类型安全性和开发体验。</p>
<h2 id="tsx-中-extends-React-Component-使用举例"><a href="#tsx-中-extends-React-Component-使用举例" class="headerlink" title="tsx 中 extends React.Component 使用举例"></a>tsx 中 extends React.Component 使用举例</h2><p>在 TypeScript 中，如果你使用 <code>tsx</code> 文件并希望定义一个继承自 <code>React.Component</code> 的类组件，你可以按照以下步骤进行。假设你已经安装了 <code>react</code> 和 <code>react-dom</code>，并且已经正确配置了 <code>tsconfig.json</code> 以支持 JSX。</p>
<p>以下是一个简单的例子：</p>
<ol>
<li><p>首先，确保你已经安装了 <code>@types/react</code> 和 <code>@types/react-dom</code>，以便 TypeScript 能够识别 React 类型。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev @types/react @types/react-dom</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建一个 <code>.tsx</code> 文件，例如 <code>MyComponent.tsx</code>，并在其中定义一个继承自 <code>React.Component</code> 的类组件。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">MyComponentProps</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">MyComponentState</span> &#123;</span><br><span class="line">  <span class="attr">count</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&lt;<span class="title class_">MyComponentProps</span>, <span class="title class_">MyComponentState</span>&gt; &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="attr">props</span>: <span class="title class_">MyComponentProps</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(props);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">      <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  incrementCount = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(<span class="function">(<span class="params">prevState</span>) =&gt;</span> (&#123;</span><br><span class="line">      <span class="attr">count</span>: prevState.<span class="property">count</span> + <span class="number">1</span>,</span><br><span class="line">    &#125;));</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;this.props.name&#125;!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>You clicked &#123;this.state.count&#125; times<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.incrementCount&#125;</span>&gt;</span>Click me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">MyComponent</span>;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>在这个例子中：</p>
<ul>
<li><code>MyComponentProps</code> 定义了组件的 props 类型。</li>
<li><code>MyComponentState</code> 定义了组件的状态类型。</li>
<li><code>MyComponent</code> 类继承自 <code>React.Component</code>，并指定了 props 和 state 的类型。</li>
<li><code>incrementCount</code> 方法用于更新组件的状态。</li>
<li><code>render</code> 方法返回组件的 JSX 结构。</li>
</ul>
<p>确保你的 <code>tsconfig.json</code> 文件配置正确，以便支持 JSX 语法。你可以在 <code>compilerOptions</code> 中添加 <code>&quot;jsx&quot;: &quot;react&quot;</code> 来明确指定 JSX 的处理方式。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;es2016&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lib&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;es2016&quot;</span><span class="punctuation">,</span> <span class="string">&quot;dom&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;module&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CommonJS&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;outDir&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dist&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;strictNullChecks&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;removeComments&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;esModuleInterop&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;noEmitOnError&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;jsx&quot;</span><span class="punctuation">:</span> <span class="string">&quot;react&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;include&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;src/**/*&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>这样配置后，TypeScript 就能够正确处理 <code>.tsx</code> 文件中的 JSX 语法。</p>
<h2 id="TS-VUE3"><a href="#TS-VUE3" class="headerlink" title="TS + VUE3"></a>TS + VUE3</h2><p><a target="_blank" rel="noopener" href="https://cn.vuejs.org/guide/typescript/composition-api.html">https://cn.vuejs.org/guide/typescript/composition-api.html</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/12/20/%E6%B2%B9%E7%8C%B4%E8%84%9A%E6%9C%AC%E4%B8%AD%E6%93%8D%E4%BD%9Cdom%E6%8E%A7%E5%88%B6vue-element-%E4%B8%AD-el-input-%E7%9A%84%E5%80%BC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="wangzhiwei">
      <meta itemprop="description" content="javascript nodejs web developer...">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WBlog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/12/20/%E6%B2%B9%E7%8C%B4%E8%84%9A%E6%9C%AC%E4%B8%AD%E6%93%8D%E4%BD%9Cdom%E6%8E%A7%E5%88%B6vue-element-%E4%B8%AD-el-input-%E7%9A%84%E5%80%BC/" class="post-title-link" itemprop="url">油猴脚本中操作dom控制vue-element 中 el-input 的值</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-12-20 09:06:08" itemprop="dateCreated datePublished" datetime="2024-12-20T09:06:08+08:00">2024-12-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-03-18 11:10:52" itemprop="dateModified" datetime="2025-03-18T11:10:52+08:00">2025-03-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%B7%A5%E5%85%B7%E9%9B%86%E5%90%88/" itemprop="url" rel="index"><span itemprop="name">工具集合</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>要使用油猴插件（Tampermonkey）修改Vue-Element的el-input的值，关键在于理解Vue的响应式原理和事件触发机制。以下是具体的步骤和代码示例：</p>
<ol>
<li>获取el-input元素：首先，你需要定位到页面中的el-input元素。可以使用CSS选择器来获取这个元素。</li>
<li>修改值：直接设置input元素的value属性是不够的，因为这样不会触发Vue的响应式更新。你需要手动触发一个input事件来通知Vue更新其数据。</li>
<li>触发事件：创建一个新的Event对象，并使用dispatchEvent方法来触发input事件，这样Vue就能检测到输入框的值变化。</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ==UserScript==</span></span><br><span class="line"><span class="comment">// @name         login</span></span><br><span class="line"><span class="comment">// @namespace    https://192.168.40.51:8000</span></span><br><span class="line"><span class="comment">// @version      2024-12-20</span></span><br><span class="line"><span class="comment">// @description  try to take over the world!</span></span><br><span class="line"><span class="comment">// @author       jason</span></span><br><span class="line"><span class="comment">// @match        https://192.168.40.51:8000/*</span></span><br><span class="line"><span class="comment">// @icon         data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==</span></span><br><span class="line"><span class="comment">// @grant        none</span></span><br><span class="line"><span class="comment">// @run-at       document-idle</span></span><br><span class="line"><span class="comment">// ==/UserScript==</span></span><br><span class="line"></span><br><span class="line">(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="string">&#x27;use strict&#x27;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello login&#x27;</span>);</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> userName = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.el-input__inner&#x27;</span>)[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">if</span> (userName) &#123;</span><br><span class="line">            userName.<span class="property">value</span> = <span class="string">&#x27;admin&#x27;</span>;</span><br><span class="line">            userName.<span class="title function_">dispatchEvent</span>(<span class="keyword">new</span> <span class="title class_">Event</span>(<span class="string">&#x27;input&#x27;</span>, &#123; <span class="attr">bubbles</span>: <span class="literal">true</span>, <span class="attr">cancelable</span>: <span class="literal">true</span> &#125;));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Username input not found&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> passWord = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.el-input__inner&#x27;</span>)[<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span> (passWord) &#123;</span><br><span class="line">            passWord.<span class="property">value</span> = <span class="string">&#x27;xxx&#x27;</span>;</span><br><span class="line">            passWord.<span class="title function_">dispatchEvent</span>(<span class="keyword">new</span> <span class="title class_">Event</span>(<span class="string">&#x27;input&#x27;</span>, &#123; <span class="attr">bubbles</span>: <span class="literal">true</span>, <span class="attr">cancelable</span>: <span class="literal">true</span> &#125;));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Password input not found&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.el-button&#x27;</span>).<span class="title function_">click</span>()</span><br><span class="line">        &#125;, <span class="number">1000</span>)</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">&#125;)();</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>拦截所有ajax请求</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">// ==UserScript==</span><br><span class="line">// @name         拦截所有ajax请求</span><br><span class="line">// @namespace    https://192.168.40.51:8000</span><br><span class="line">// @version      2024-12-20</span><br><span class="line">// @description  try to take over the world!</span><br><span class="line">// @author       jason</span><br><span class="line">// @match        http://192.168.40.117:8080/*</span><br><span class="line">// @match        https://192.168.40.51:8000/*</span><br><span class="line">// @match        https://192.168.40.46/*</span><br><span class="line">// @match        http://192.168.40.115:8080/*</span><br><span class="line">// @match        https://192.168.40.116/*</span><br><span class="line">// @match        http://localhost:8000/*</span><br><span class="line">// @match        https://localhost:8000/*</span><br><span class="line">// @icon         data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==</span><br><span class="line">// @grant        none</span><br><span class="line">// @run-at       document-start</span><br><span class="line">// ==/UserScript==</span><br><span class="line"></span><br><span class="line">(function() &#123;</span><br><span class="line">    &#x27;use strict&#x27;;</span><br><span class="line"></span><br><span class="line">    // 保存原始的 XMLHttpRequest 方法</span><br><span class="line">    const originalOpen = XMLHttpRequest.prototype.open;</span><br><span class="line">    const originalSend = XMLHttpRequest.prototype.send;</span><br><span class="line">    const originalSetRequestHeader = XMLHttpRequest.prototype.setRequestHeader;</span><br><span class="line"></span><br><span class="line">    // 重写 open 方法</span><br><span class="line">    XMLHttpRequest.prototype.open = function(method, url, async) &#123;</span><br><span class="line">        this._method = method;</span><br><span class="line">        this._url = url;</span><br><span class="line">        this._async = async;</span><br><span class="line">        this._requestHeaders = &#123;&#125;; // 用于存储请求头</span><br><span class="line">        this._requestData = null; // 用于存储请求体</span><br><span class="line">        originalOpen.apply(this, arguments);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    // 重写 setRequestHeader 方法</span><br><span class="line">    XMLHttpRequest.prototype.setRequestHeader = function(header, value) &#123;</span><br><span class="line">        this._requestHeaders[header] = value;</span><br><span class="line">        originalSetRequestHeader.apply(this, arguments);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    // 重写 send 方法</span><br><span class="line">    XMLHttpRequest.prototype.send = function(data) &#123;</span><br><span class="line">        // 捕获请求体</span><br><span class="line">        if (data instanceof FormData) &#123;</span><br><span class="line">            const formData = new FormData();</span><br><span class="line">            data.forEach((value, key) =&gt; &#123;</span><br><span class="line">                formData.append(key, value);</span><br><span class="line">            &#125;);</span><br><span class="line">            this._requestData = formData;</span><br><span class="line">        &#125; else if (data instanceof Blob || data instanceof ArrayBuffer) &#123;</span><br><span class="line">            this._requestData = data;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            this._requestData = data;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        this.addEventListener(&#x27;load&#x27;, function() &#123;</span><br><span class="line">            console.log(&#x27;AJAX Request:&#x27;, &#123;</span><br><span class="line">                method: this._method,</span><br><span class="line">                url: this._url,</span><br><span class="line">                async: this._async,</span><br><span class="line">                requestHeaders: this._requestHeaders, // 添加请求头信息</span><br><span class="line">                requestData: this._requestData, // 添加请求体信息</span><br><span class="line">                response: this.responseText,</span><br><span class="line">                status: this.status,</span><br><span class="line">                statusText: this.statusText</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        originalSend.apply(this, arguments);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    console.log(&#x27;hello login&#x27;);</span><br><span class="line">    // 其他代码...</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>在油猴脚本中，@run-at 元数据块用于指定脚本何时执行。不同的 @run-at 值会影响脚本的执行时机，从而影响脚本的行为和效果。以下是常见的 @run-at 值及其含义：</p>
<p>@run-at document-start</p>
<p>含义：脚本在文档解析开始时立即执行，此时 document.documentElement 可能尚未创建，document.head 也尚未完全加载。<br>适用场景：适用于需要在页面加载之前执行某些操作的情况，例如修改页面的初始加载行为。<br>@run-at document-end</p>
<p>含义：脚本在文档解析完成后执行，此时 document.body 已经可用，但所有外部资源（如图片、样式表、子框架等）可能尚未加载完成。<br>适用场景：适用于需要在页面加载完成后执行某些操作的情况，但不需要等待所有外部资源加载完成。<br>@run-at document-idle</p>
<p>含义：脚本在文档解析完成后且所有外部资源（如图片、样式表、子框架等）加载完成后执行。<br>适用场景：适用于需要在页面完全加载后执行某些操作的情况，确保所有资源都已加载完毕。</p>
<p>注意匹配规则设置</p>
<p>&#x2F;&#x2F; @match        <a target="_blank" rel="noopener" href="http://192.168.40.117:8080/">http://192.168.40.117:8080/</a>*<br>&#x2F;&#x2F; @match        <a target="_blank" rel="noopener" href="https://192.168.40.51:8000/">https://192.168.40.51:8000/</a>*<br>&#x2F;&#x2F; @match        <a target="_blank" rel="noopener" href="https://192.168.40.46/">https://192.168.40.46/</a>*<br>&#x2F;&#x2F; @match        <a target="_blank" rel="noopener" href="http://192.168.40.115:8080/">http://192.168.40.115:8080/</a>*</p>
<p>http https 要区分 <a target="_blank" rel="noopener" href="https://192.168.40.46/">https://192.168.40.46/</a>* 改为 <a target="_blank" rel="noopener" href="https://192.168.40.*/">https://192.168.40.*/</a>* 不生效</p>
<p>与其他库（如react）集成： 当你需要与不基于 Vue 的库或框架集成时，可能会用到 dispatchEvent 来触发特定的事件。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/12/19/%E5%B7%A5%E7%A8%8B%E5%8C%96%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="wangzhiwei">
      <meta itemprop="description" content="javascript nodejs web developer...">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WBlog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/12/19/%E5%B7%A5%E7%A8%8B%E5%8C%96%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/" class="post-title-link" itemprop="url">工程化问题汇总</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-12-19 09:49:12" itemprop="dateCreated datePublished" datetime="2024-12-19T09:49:12+08:00">2024-12-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-03-18 11:10:52" itemprop="dateModified" datetime="2025-03-18T11:10:52+08:00">2025-03-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9D%A2%E8%AF%95%E9%A2%98/" itemprop="url" rel="index"><span itemprop="name">面试题</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ol>
<li><p>下面的模块导出了什么结果？</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exports</span>.<span class="property">a</span> = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span>.<span class="property">b</span> = <span class="string">&#x27;b&#x27;</span>;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">c</span> = <span class="string">&#x27;c&#x27;</span>;</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">d</span>: <span class="string">&#x27;d&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>参考答案：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="attr">d</span>: <span class="string">&#x27;d&#x27;</span> &#125;</span><br></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>说一下你对前端工程化，模块化，组件化的理解？</p>
<blockquote>
<p>参考答案：</p>
<p>这三者中，模块化是基础，没有模块化，就没有组件化和工程化</p>
<p>模块化的出现，解决了困扰前端的两大难题：全局污染问题和依赖混乱问题，从而让精细的拆分前端工程成为了可能。</p>
<p>工程化的出现，解决了前端开发环境和生产环境要求不一致的矛盾。在开发环境中，我们希望代码使用尽可能的细分，代码格式尽可能的统一和规范，而在生产环境中，我们希望代码尽可能的被压缩、混淆，尽可能的优化体积。工程化的出现，就是为了解决这一矛盾，它可以让我们舒服的在开发环境中书写代码，然后经过打包，生成最合适的生产环境代码，这样就解放了开发者的精力，让开发者把更多的注意力集中在开发环境上即可。</p>
<p>组件化开发是一些前端框架带来的概念，它把一个网页，或者一个站点，甚至一个完整的产品线，划分为多个小的组件，组件是一个可以复用的单元，它包含了一个某个区域的完整功能。这样一来，前端便具备了开发复杂应用的能力。</p>
</blockquote>
</li>
<li><p>webpack 和 gulp 的区别是什么？</p>
<blockquote>
<p>直播讲解</p>
</blockquote>
<blockquote>
<p>参考答案：</p>
<p>webpack 是基于模块化的构建工具，gulp 是基于工作流的构建工具。</p>
<p>webpack 是一个打包器，它以一个入口为起点，构建出整个项目的依赖关系图，然后进行打包合并，生成打包结果。</p>
<p>gulp 是一个过程管理器，每一步做什么完全看开发人员如何配置，把每一个步骤连接起来形成一个完整的构建流水线。</p>
<p>这两者并不矛盾，完全可以在一个工程中同时使用 webpack 和 gulp，将 webpack 作为 gulp 流水线中的一环。</p>
</blockquote>
</li>
<li><p>webpack 中的 loader 属性和 plugins 属性的区别是什么？</p>
<blockquote>
<p>参考答案：</p>
<p>它们都是 webpack 功能的扩展点。</p>
<p>loader 是加载器，主要用于代码转换，比如 JS 代码降级，CSS 预编译、模块化等</p>
<p>plugins 是插件，webpack 打包流程中每个环节都提供了钩子函数，可以利用这些钩子函数参与到打包生命周期中，更改或增加 webpack 的某些功能，比如生成页面和 css 文件、压缩打包结果等</p>
</blockquote>
</li>
<li><p>webpack 的核心概念都有哪些？</p>
<blockquote>
<p>参考答案：</p>
<ul>
<li><p>loader</p>
<p>加载器，主要用于代码转换，比如 JS 代码降级，CSS 预编译、模块化等</p>
</li>
<li><p>plugin</p>
<p>插件，webpack 打包流程中每个环节都提供了钩子函数，可以利用这些钩子函数参与到打包生命周期中，更改或增加 webpack 的某些功能，比如生成页面和 css 文件、压缩打包结果等</p>
</li>
<li><p>module</p>
<p>模块。webpack 将所有依赖均视为模块，无论是 js、css、html、图片，统统都是模块</p>
</li>
<li><p>entry</p>
<p>入口。打包过程中的概念，webpack 以一个或多个文件作为入口点，分析整个依赖关系。</p>
</li>
<li><p>chunk</p>
<p>打包过程中的概念，一个 chunk 是一个相对独立的打包过程，以一个或多个文件为入口，分析整个依赖关系，最终完成打包合并</p>
</li>
<li><p>bundle</p>
<p>webpack 打包结果</p>
</li>
<li><p>tree shaking</p>
<p>树摇优化。在打包结果中，去掉没有用到的代码。</p>
</li>
<li><p>HMR</p>
<p>热更新。是指在运行期间，遇到代码更改后，无须重启整个项目，只更新变动的那一部分代码。</p>
</li>
<li><p>dev server</p>
<p>开发服务器。在开发环境中搭建的临时服务器，用于承载对打包结果的访问</p>
</li>
</ul>
</blockquote>
</li>
<li><p>commonjs 和 es6 模块的区别是什么？</p>
<blockquote>
<p>参考答案：</p>
<ol>
<li>CMJ 是社区标准，ESM 是官方标准</li>
<li>CMJ 是使用 API 实现的模块化，ESM 是使用新语法实现的模块化</li>
<li>CMJ 仅在 node 环境中支持，ESM 各种环境均支持</li>
<li>CMJ 是动态的依赖，ESM 既支持动态，也支持静态</li>
<li>ESM 导入时有符号绑定，CMJ 只是普通函数调用和赋值</li>
</ol>
</blockquote>
</li>
<li><p>ES6 中如何实现模块化的异步加载？</p>
<blockquote>
<p>参考答案：</p>
<p>使用动态导入即可，导入后，得到的是一个 Promise，完成后，得到一个模块对象，其中包含了所有的导出结果。</p>
</blockquote>
</li>
<li><p>说一下 webpack 中的几种 hash 的实现原理是什么？</p>
<blockquote>
<p>参考答案：</p>
<ul>
<li><p>hash</p>
<p>hash 是跟整个项目的构建相关，只要项目里有文件更改，整个项目构建的 hash 值都会更改，并且全部文件都共用相同的 hash 值</p>
</li>
<li><p>chunkhash</p>
<p>每个打包过程单独的 hash 值，如果一个项目有多个 entry，则每个 entry 维护自己的 chunkhash。</p>
</li>
<li><p>contenthash</p>
<p>每个文件内容单独的 hash 值，它和打包结果文件内容有关，只要文件内容不变，contenthash 不变。</p>
</li>
</ul>
</blockquote>
</li>
<li><p>webpack 如果使用了 hash 命名，那是每次都会重新生成 hash 吗？</p>
<blockquote>
<p>参考答案：</p>
<p>不会。它跟关联的内容是否有变化有关系，如果没有变化，hash 就不会变。具体来说，contenthash 和具体的打包文件内容有关，chunkhash 和某一 entry 为起点的打包过程中涉及的内容有关，hash 和整个工程所有模块内容有关。</p>
</blockquote>
</li>
<li><p>webpack 中是如何处理图片的？ （抖音直播）</p>
<blockquote>
<p>参考答案：</p>
<p>webpack 本身不处理图片，它会把图片内容仍然当做 JS 代码来解析，结果就是报错，打包失败。如果要处理图片，需要通过 loader 来处理。其中，url-loader 会把图片转换为 base64 编码，然后得到一个 dataurl，file-loader 则会将图片生成到打包目录中，然后得到一个资源路径。但无论是哪一种 loader，它们的核心功能，都是把图片内容转换成 JS 代码，因为只有转换成 JS 代码，webpack 才能识别。</p>
</blockquote>
</li>
<li><p>webpack 打包出来的 html 为什么 style 放在头部 script 放在底部？</p>
<blockquote>
<p>说明：这道题的表述是有问题的，webpack 本身并不打包 html，相反，它如果遇到 html 代码会直接打包失败，因为 webpack 本身只能识别 JS。之所以能够打包出 html 文件，是因为插件或 loader 的作用，其中，比较常见的插件是 html-webpack-plugin。所以这道题的正确表述应该是：「html-webpack-plugin 打包出来的 html 为什么 style 放在头部 script 放在底部？」</p>
</blockquote>
<blockquote>
<p>参考答案：</p>
<p>浏览器在解析 HTML 时是从上到下进行解析的，当遇到样式和 JS 时，都会停止 HTML 解析，转而解析样式和执行 JS。而我们往往希望，页面的样式解析完成后再解析 HTML，这样可以避免页面闪烁，基于此，样式应该放到顶部；而相反的，我们希望在解析完 HTML 后再执行 JS，这样可以让用户尽快的看到页面，同时也让 JS 执行时能够拿到完整的 DOM 树，基于此，JS 代码应该放到底部。</p>
<p>不过，在 HTML5 中出现了 async 和 defer 属性，使用该属性可以更好的解决 JS 的问题，我们可以把 script 放到顶部，让浏览器尽快下载，但延迟执行。实际上，在新版本的 html-webpack-plugin 中，它已经这样做了。</p>
</blockquote>
</li>
<li><p>webpack 配置如何实现开发环境不使用 cdn、生产环境使用 cdn？</p>
<blockquote>
<p>要配置 CDN，有两个步骤：</p>
<ol>
<li>在 html 模板中直接加入 cdn 引用</li>
<li>在 webpack 配置中，加入<code>externals</code>配置，告诉 webpack 不要打包其中的模块，转而使用全局变量</li>
</ol>
<p>若要在开发环境中不使用 CDN，只需根据环境变量判断不同的环境，进行不同的打包处理即可。</p>
<ol>
<li>在 html 模板中使用 ejs 模板语法进行判断，只有在生产环境中引入 CDN</li>
<li>在 webpack 配置中，可以根据<code>process.env</code>中的环境变量进行判断是否使用<code>externals</code>配置</li>
<li>在<code>package.json</code>脚本中设置不同的环境变量完成打包或开发启动。</li>
</ol>
</blockquote>
</li>
<li><p>介绍一下 webpack4 中的 tree-shaking 的工作流程？</p>
<blockquote>
<p>推荐阅读：<a target="_blank" rel="noopener" href="https://tsejx.github.io/webpack-guidebook/principle-analysis/operational-principle/tree-shaking">https://tsejx.github.io/webpack-guidebook/principle-analysis/operational-principle/tree-shaking</a></p>
</blockquote>
<blockquote>
<p>参考答案：</p>
<p>tree-shaking 仅支持 ESM 的静态导入语法，对于 CMJ 或者 ESM 中的动态导入不支持 tree shaking。</p>
<p>具体流程主要分为两步：标记和删除</p>
<ol>
<li><p>标记</p>
<p>webpack 在分析依赖时，会使用注释的方式对导入和导出进行标记，对于模块中没有被其他模块用到的导出标记为 unused harmony export</p>
</li>
<li><p>删除</p>
<p>之后在 Uglifyjs (或者其他类似的工具) 步骤进行代码精简，把标记为无用的代码删除。</p>
</li>
</ol>
</blockquote>
</li>
<li><p>说一下 webpack loader 的作用是什么？</p>
<blockquote>
<p>参考答案：</p>
<p>用于转换代码。有时是因为 webpack 无法识别某些内容，比如图片、css 等，需要由 loader 将其转换为 JS 代码。有时是因为某些代码需要被特殊处理，比如 JS 兼容性的处理，需要由 loader 将其进一步转换。不管是什么情况，loader 的作用只有一个，就是转换代码。</p>
</blockquote>
</li>
<li><p>在开发过程中如果需要对已有模块进行扩展，如何进行开发保证调用方不受影响？</p>
<blockquote>
<p>参考答案：</p>
<p>实际上就是一个版本管理的问题。</p>
<p>如果此次模块升级只是修复了某一些 bug，作为补丁版本升级即可，不影响主版本和次版本号</p>
<p>如果此次模块升级会新增一些内容，完全兼容之前的 API，作为次版本升级即可</p>
<p>如果此次模块升级会修改之前的 API，则作为主版本升级</p>
<p>在开发项目时，让项目依赖模块的主版本，因此，当模块更新时，只要不是主版本更新，项目都可以非常方便的升级模块版本，无须改动任何代码。但若涉及主版本更新，项目可以完全无视此次版本更新，仍然使用之前的旧版本，无须改动任何代码；当然也可以升级主版本，但就会涉及代码的改动，这就好比跟将 vue2 升级到 vue3 会涉及大量改动一样。</p>
<p>而在开发模块时，在一开始就要精心设计 API，尽量保证 API 的接口稳定，不要经常变动主版本号。如果实在要更新主版本，就需要在一段时间内同时维护两个版本（新的主版本，旧的主版本），给予其他项目一定的升级时间。</p>
</blockquote>
</li>
<li><p>export 和 export default 的区别是什么？</p>
<blockquote>
<p>参考答案：</p>
<p>export 为普通导出，又叫做具名导出，顾名思义，它导出的数据必须带有命名，比如变量定义、函数定义这种带有命名的语句。在导出的模块对象中，命名即为模块对象的属性名。在一个模块中可以有多个具名导出</p>
<p>export default 为默认导出，在模块对象中名称固定为 default，因此无须命名，通常导出一个表达式或字面量。在一个模块中只能有一个默认导出。</p>
</blockquote>
</li>
<li><p>webpack 打包原理是什么？</p>
<blockquote>
<p>参考答案：</p>
<ol>
<li><strong>初始化参数</strong>：从配置文件和 Shell 语句中读取与合并参数，得出最终的参数</li>
<li><strong>开始编译</strong>：用上一步得到的参数初始化 Compiler 对象，加载所有配置的插件，执行对象的 <code>run</code> 方法开始执行编译</li>
<li><strong>确定入口</strong>：根据配置中的 <code>entry</code> 找出所有的入口文件</li>
<li><strong>编译模块</strong>：从入口文件出发，调用所有配置的 <code>loader</code> 对模块进行翻译，再把翻译后的内容转换成 AST，通过对 AST 的分析找出该模块依赖的模块，再 <code>递归</code> 本步骤直到所有入口依赖的文件都经过了本步骤的处理</li>
<li><strong>完成模块编译</strong>：在经过第 4 步使用 <code>loader</code> 翻译完所有模块后，得到了每个模块被翻译后的最终内容以及它们之间的 <code>依赖关系图</code></li>
<li><strong>输出资源</strong>：根据入口和模块之间的依赖关系，组装成一个个包含多个模块的 <code>Chunk</code>，再把每个 Chunk 转换成一个单独的文件加入到输出列表，这步是可以修改输出内容的最后机会</li>
<li><strong>输出完成</strong>：在确定好输出内容后，根据配置确定输出的路径和文件名，把文件内容写入到文件系统</li>
</ol>
</blockquote>
</li>
<li><p>webpack 热更新原理是什么？</p>
<blockquote>
<p>参考答案：</p>
<p>当开启热更新后，页面中会植入一段 websocket 脚本，同时，开发服务器也会和客户端建立 websocket 通信，当源码发生变动时，webpack 会进行以下处理：</p>
<ol>
<li>webpack 重新打包</li>
<li>webpack-dev-server 检测到模块的变化，于是通过 webscoket 告知客户端变化已经发生</li>
<li>客户端收到消息后，通过 ajax 发送请求到开发服务器，以过去打包的 hash 值请求服务器的一个 json 文件</li>
<li>服务器告诉客户端哪些模块发生了变动，同时告诉客户端这次打包产生的新 hash 值</li>
<li>客户端再次用过去的 hash 值，以 JSONP 的方式请求变动的模块</li>
<li>服务器响应一个函数调用，用于更新模块的代码</li>
<li>此时，模块代码已经完成更新。客户端按照之前的监听配置，执行相应模块变动后的回调函数。</li>
</ol>
</blockquote>
</li>
<li><p>如何优化 webpack 的打包速度？</p>
<blockquote>
<p>参考答案：</p>
<ol>
<li><p>noParse</p>
<p>很多第三方库本身就是已经打包好的代码，对于这种代码无须再进行解析，可以使用 noParse 配置排除掉这些第三方库</p>
</li>
<li><p>externals</p>
<p>对于一些知名的第三方库可以使用 CDN，这部分库可以通过 externals 配置不进行打包</p>
</li>
<li><p>限制 loader 的范围</p>
<p>在使用 loader 的时候，可以通过 exclude 排除掉一些不必要的编译，比如 babel-loader 对于那些已经完成打包的第三方库没有必要再降级一次，可以排除掉</p>
</li>
<li><p>开启 loader 缓存</p>
<p>可以利用<code>cache-loader</code>缓存 loader 的编译结果，避免在源码没有变动时反复编译</p>
</li>
<li><p>开启多线程编译</p>
<p>可以利用<code>thread-loader</code>开启多线程编译，提升编译效率</p>
</li>
<li><p>动态链接库</p>
<p>对于某些需要打包的第三方库，可以使用 dll 的方式单独对其打包，然后 DLLPlugin 将其整合到当前项目中，这样就避免了在开发中频繁去打包这些库</p>
</li>
</ol>
</blockquote>
</li>
<li><p>webpack 如何实现动态导入？</p>
<blockquote>
<p>参考答案：</p>
<p>当遇到代码中包含动态导入语句时，webpack 会将导入的模块及其依赖分配到单独的一个 chunk 中进行打包，形成单独的打包结果。而动态导入的语句会被编译成一个普通的函数调用，该函数在执行时，会使用 JSONP 的方式动态的把分离出去的包加载到模块集合中。</p>
</blockquote>
</li>
<li><p>说一下 webpack 有哪几种文件指纹</p>
<blockquote>
<p>参考答案：</p>
<ul>
<li><p>hash</p>
<p>hash 是跟整个项目的构建相关，只要项目里有文件更改，整个项目构建的 hash 值都会更改，并且全部文件都共用相同的 hash 值</p>
</li>
<li><p>chunkhash</p>
<p>每个打包过程单独的 hash 值，如果一个项目有多个 entry，则每个 entry 维护自己的 chunkhash。</p>
</li>
<li><p>contenthash</p>
<p>每个文件内容单独的 hash 值，它和打包结果文件内容有关，只要文件内容不变，contenthash 不变。</p>
</li>
</ul>
</blockquote>
</li>
<li><p>常用的 webpack Loader 都有哪些？</p>
<blockquote>
<p>参考答案：</p>
<ul>
<li>cache-loader：启用编译缓存</li>
<li>thread-loader：启用多线程编译</li>
<li>css-loader：编译 css 代码为 js</li>
<li>file-loader：保存文件到输出目录，将文件内容转换成文件路径</li>
<li>postcss-loader：将 css 代码使用 postcss 进行编译</li>
<li>url-loader：将文件内容转换成 dataurl</li>
<li>less-loader：将 less 代码转换成 css 代码</li>
<li>sass-loader：将 sass 代码转换成 css 代码</li>
<li>vue-loader：编译单文件组件</li>
<li>babel-loader：对 JS 代码进行降级处理</li>
</ul>
</blockquote>
</li>
<li><p>说一下 webpack 常用插件都有哪些？</p>
<blockquote>
<p>参考答案：</p>
<ul>
<li>clean-webpack-plugin：清除输出目录</li>
<li>copy-webpack-plugin：复制文件到输出目录</li>
<li>html-webpack-plugin：生成 HTML 文件</li>
<li>mini-css-extract-plugin：将 css 打包成单独文件的插件</li>
<li>HotModuleReplacementPlugin：热更新的插件</li>
<li>purifycss-webpack：去除无用的 css 代码</li>
<li>optimize-css-assets-webpack-plugin：优化 css 打包体积</li>
<li>uglify-js-plugin：对 JS 代码进行压缩、混淆</li>
<li>compression-webpack-plugin：gzip 压缩</li>
<li>webpack-bundle-analyzer：分析打包结果</li>
</ul>
</blockquote>
</li>
<li><p>使用 babel-loader 会有哪些问题，可以怎样优化？</p>
<blockquote>
<p>参考答案：</p>
<ol>
<li>如果不做特殊处理，babel-loader 会对所有匹配的模块进行降级，这对于那些已经处理好兼容性问题的第三方库显得多此一举，因此可以使用 exclude 配置排除掉这些第三方库</li>
<li>在旧版本的 babel-loader 中，默认开启了对 ESM 的转换，这样会导致 webpack 的 tree shaking 失效，因为 tree shaking 是需要保留 ESM 语法的，所以需要关闭 babel-loader 的 ESM 转换，在其新版本中已经默认关闭了。</li>
</ol>
</blockquote>
</li>
<li><p>babel 是如何对 class 进行编译的？</p>
<blockquote>
<p>参考答案：</p>
<p>本质上就是把 class 语法转换成普通构造函数定义，并做了以下处理：</p>
<ol>
<li>增加了对 this 指向的检测</li>
<li>将原型方法和静态方法变为不可枚举</li>
<li>将整个代码放到了立即执行函数中，运行后返回构造函数本身</li>
</ol>
</blockquote>
</li>
<li><p>解释一下 babel-polyfill 的作用是什么？</p>
<blockquote>
<p>说明：</p>
<p>babel-polyfill 已经是一个非常古老的项目了，babel 从 7.4 版本开始已不再支持它，转而使用更加强大的 core-js，此题也适用于问「core-js 的作用是什么」</p>
</blockquote>
<blockquote>
<p>参考答案：</p>
<p>默认情况下，babel 本身只转换新的语法，而不对新的 API 进行处理。由于旧的环境中无法支持新的 API，比如 IE6 无法支持 fetch api，这就需要一个补丁，用旧语言的特性实现一遍新的 API，babel-polyfill 就是用来做这件事的。</p>
</blockquote>
</li>
<li><p>解释一下 less 的&amp;的操作符是做什么用的？</p>
<blockquote>
<p>参考答案：</p>
<p>&amp;符号后面的内容会和父级选择器合并书写，即中间不加入空格字符</p>
</blockquote>
</li>
<li><p>在前端工程化中，可以进行哪些方面的优化？</p>
<blockquote>
<p>参考答案：</p>
<ol>
<li><p>对传输性能的优化</p>
<ul>
<li><p>压缩和混淆</p>
<p>使用 Uglifyjs 或其他类似工具对打包结果进行压缩、混淆，可以有效的减少包体积</p>
</li>
<li><p>tree shaking</p>
<p>项目中尽量使用 ESM，可以有效利用 tree shaking 优化，降低包体积</p>
</li>
<li><p>抽离公共模块</p>
<p>将一些公共代码单独打包，这样可以充分利用浏览器缓存，其他代码变动后，不影响公共代码，浏览器可以直接从缓存中找到公共代码。</p>
<p>具体方式有多种，比如 dll、splitChunks</p>
</li>
<li><p>异步加载</p>
<p>对一些可以延迟执行的模块可以使用动态导入的方式异步加载它们，这样在打包结果中，它们会形成单独的包，同时，在页面一开始解析时并不需要加载它们，而是页面解析完成后，执行 JS 的过程中去加载它们。</p>
<p>这样可以显著提高页面的响应速度，在单页应用中尤其有用。</p>
</li>
<li><p>CDN</p>
<p>对一些知名的库使用 CDN，不仅可以节省打包时间，还可以显著提升库的加载速度</p>
</li>
<li><p>gzip</p>
<p>目前浏览器普遍支持 gzip 格式，因此可以将静态文件均使用 gzip 进行压缩</p>
</li>
<li><p>环境适配</p>
<p>有些打包结果中包含了大量兼容性处理的代码，但在新版本浏览器中这些代码毫无意义。因此，可以把浏览器分为多个层次，为不同层次的浏览器给予不同的打包结果。</p>
</li>
</ul>
</li>
<li><p>对打包过程的优化</p>
<ul>
<li><p>noParse</p>
<p>很多第三方库本身就是已经打包好的代码，对于这种代码无须再进行解析，可以使用 noParse 配置排除掉这些第三方库</p>
</li>
<li><p>externals</p>
<p>对于一些知名的第三方库可以使用 CDN，这部分库可以通过 externals 配置不进行打包</p>
</li>
<li><p>限制 loader 的范围</p>
<p>在使用 loader 的时候，可以通过 exclude 排除掉一些不必要的编译，比如 babel-loader 对于那些已经完成打包的第三方库没有必要再降级一次，可以排除掉</p>
</li>
<li><p>开启 loader 缓存</p>
<p>可以利用<code>cache-loader</code>缓存 loader 的编译结果，避免在源码没有变动时反复编译</p>
</li>
<li><p>开启多线程编译</p>
<p>可以利用<code>thread-loader</code>开启多线程编译，提升编译效率</p>
</li>
<li><p>动态链接库</p>
<p>对于某些需要打包的第三方库，可以使用 dll 的方式单独对其打包，然后 DLLPlugin 将其整合到当前项目中，这样就避免了在开发中频繁去打包这些库</p>
</li>
</ul>
</li>
<li><p>对开发体验的优化</p>
<ul>
<li><p>lint</p>
<p>使用 eslint、stylelint 等工具保证团队代码风格一致</p>
</li>
<li><p>HMR</p>
<p>使用热替换避免页面刷新导致的状态丢失，提升开发体验</p>
</li>
</ul>
</li>
</ol>
</blockquote>
</li>
<li><p>如果有一个工程打包特别大-如何进行优化？</p>
<blockquote>
<p>参考答案：</p>
<ol>
<li><p>CDN</p>
<p>如果工程中使用了一些知名的第三方库，可以考虑使用 CDN，而不进行打包</p>
</li>
<li><p>抽离公共模块</p>
<p>如果工程中用到了一些大的公共库，可以考虑将其分割出来单独打包</p>
</li>
<li><p>异步加载</p>
<p>对于那些不需要在一开始就执行的模块，可以考虑使用动态导入的方式异步加载它们，以尽量减少主包的体积</p>
</li>
<li><p>压缩、混淆</p>
</li>
<li><p>tree shaking</p>
<p>尽量使用 ESM 语法进行导入导出，充分利用 tree shaking 去除无用代码</p>
</li>
<li><p>gzip</p>
<p>开启 gzip 压缩，进一步减少包体积</p>
</li>
<li><p>环境适配</p>
<p>有些打包结果中包含了大量兼容性处理的代码，但在新版本浏览器中这些代码毫无意义。因此，可以把浏览器分为多个层次，为不同层次的浏览器给予不同的打包结果。</p>
</li>
</ol>
</blockquote>
</li>
<li><p>webpack 怎么进行首屏加载的优化？</p>
<blockquote>
<p>参考答案：</p>
<ol>
<li><p>CDN</p>
<p>如果工程中使用了一些知名的第三方库，可以考虑使用 CDN，而不进行打包</p>
</li>
<li><p>抽离公共模块</p>
<p>如果工程中用到了一些大的公共库，可以考虑将其分割出来单独打包</p>
</li>
<li><p>异步加载</p>
<p>对于那些不需要在一开始就执行的模块，可以考虑使用动态导入的方式异步加载它们，以尽量减少主包的体积</p>
</li>
<li><p>压缩、混淆</p>
</li>
<li><p>tree shaking</p>
<p>尽量使用 ESM 语法进行导入导出，充分利用 tree shaking 去除无用代码</p>
</li>
<li><p>gzip</p>
<p>开启 gzip 压缩，进一步减少包体积</p>
</li>
<li><p>环境适配</p>
<p>有些打包结果中包含了大量兼容性处理的代码，但在新版本浏览器中这些代码毫无意义。因此，可以把浏览器分为多个层次，为不同层次的浏览器给予不同的打包结果。</p>
</li>
</ol>
</blockquote>
</li>
<li><p>介绍一下 webpack scope hoisting？</p>
<blockquote>
<p>参考答案：</p>
<p>scope hoisting 是 webpack 的内置优化，它是针对模块的优化，在生产环境打包时会自动开启。</p>
<p>在未开启scope hoisting时，webpack 会将每个模块的代码放置在一个独立的函数环境中，这样是为了保证模块的作用域互不干扰。</p>
<p>而 scope hoisting 的作用恰恰相反，是把多个模块的代码合并到一个函数环境中执行。在这一过程中，webpack 会按照顺序正确的合并模块代码，同时对涉及的标识符做适当处理以避免重名。</p>
<p>这样做的好处是减少了函数调用，对运行效率有一定提升，同时也降低了打包体积。</p>
<p>但 scope hoisting 的启用是有前提的，如果遇到某些模块多次被其他模块引用，或者使用了动态导入的模块，或者是非 ESM 的模块，都不会有 scope hoisting。</p>
</blockquote>
</li>
<li><p>webpack proxy 工作原理，为什么能解决跨域？</p>
<blockquote>
<p>说明：</p>
<p>严格来说，webpack 只是一个打包工具，它并没有 proxy 的功能，甚至连服务器的功能都没有。之所以能够在 webpack 中使用 proxy 配置，是因为它的一个插件，即 webpack-dev-server 的能力。</p>
<p>所以，此题应该问做：「webpack-dev-server 工作原理，为什么能解决跨域？」</p>
</blockquote>
<blockquote>
<p>参考答案：</p>
<p>首先，proxy 配置是针对开发环境的，对生产环境没有任何意义。</p>
<p>当我们通过 webpack-dev-server 启动开发服务器后，所有的打包资源都可以通过访问开发服务器获得。</p>
<p>与此同时，我们又配置了 proxy，当我们向开发服务器请求特定的地址时，开发服务器会将其代理到目标地址。因此，后续对代理地址的请求，就可以变为直接请求开发服务器。</p>
<p>这样一来，我们请求静态页面的域和请求代理地址的域就同源了，因为都是请求开发服务器，所以就不会产生跨域问题。</p>
</blockquote>
</li>
<li><p>组件发布的是不是所有依赖这个组件库的项目都需要升级？</p>
<blockquote>
<p>参考答案：</p>
<p>实际上就是一个版本管理的问题。</p>
<p>如果此次模块升级只是修复了某一些 bug，作为补丁版本升级即可，不影响主版本和次版本号</p>
<p>如果此次模块升级会新增一些内容，完全兼容之前的 API，作为次版本升级即可</p>
<p>如果此次模块升级会修改之前的 API，则作为主版本升级</p>
<p>在开发项目时，让项目依赖模块的主版本，因此，当模块更新时，只要不是主版本更新，项目都可以非常方便的升级模块版本，无须改动任何代码。但若涉及主版本更新，项目可以完全无视此次版本更新，仍然使用之前的旧版本，无须改动任何代码；当然也可以升级主版本，但就会涉及代码的改动，这就好比跟将 vue2 升级到 vue3 会涉及大量改动一样。</p>
<p>而在开发模块时，在一开始就要精心设计 API，尽量保证 API 的接口稳定，不要经常变动主版本号。如果实在要更新主版本，就需要在一段时间内同时维护两个版本（新的主版本，旧的主版本），给予其他项目一定的升级时间。</p>
</blockquote>
</li>
<li><p>开发过程中，如何进行公共组件的设计？（字节跳动）</p>
<blockquote>
<p>参考答案：</p>
<ol>
<li><p>确定使用场景</p>
<p>明确这个公共组件的需求是怎么产生的，它目前的使用场景有哪些，将来还可能出现哪些使用场景。</p>
<p>明确使用场景至关重要，它决定了这个组件的使用边界在哪，通用到什么程度，从而决定了这个组件的开发难度</p>
</li>
<li><p>设计组件功能</p>
<p>根据其使用场景，设计出组件的属性、事件、使用说明文档</p>
</li>
<li><p>测试用例</p>
<p>根据使用说明文档编写组件测试用例</p>
</li>
<li><p>完成开发</p>
<p>根据使用说明文档、测试用例完成开发</p>
</li>
</ol>
</blockquote>
</li>
<li><p>说一下项目里有做过哪些 webpack 上的优化（字节跳动）</p>
<blockquote>
<p>参考答案：</p>
<ol>
<li><p>对传输性能的优化</p>
<ul>
<li><p>压缩和混淆</p>
<p>使用 Uglifyjs 或其他类似工具对打包结果进行压缩、混淆，可以有效的减少包体积</p>
</li>
<li><p>tree shaking</p>
<p>项目中尽量使用 ESM，可以有效利用 tree shaking 优化，降低包体积</p>
</li>
<li><p>抽离公共模块</p>
<p>将一些公共代码单独打包，这样可以充分利用浏览器缓存，其他代码变动后，不影响公共代码，浏览器可以直接从缓存中找到公共代码。</p>
<p>具体方式有多种，比如 dll、splitChunks</p>
</li>
<li><p>异步加载</p>
<p>对一些可以延迟执行的模块可以使用动态导入的方式异步加载它们，这样在打包结果中，它们会形成单独的包，同时，在页面一开始解析时并不需要加载它们，而是页面解析完成后，执行 JS 的过程中去加载它们。</p>
<p>这样可以显著提高页面的响应速度，在单页应用中尤其有用。</p>
</li>
<li><p>CDN</p>
<p>对一些知名的库使用 CDN，不仅可以节省打包时间，还可以显著提升库的加载速度</p>
</li>
<li><p>gzip</p>
<p>目前浏览器普遍支持 gzip 格式，因此可以将静态文件均使用 gzip 进行压缩</p>
</li>
<li><p>环境适配</p>
<p>有些打包结果中包含了大量兼容性处理的代码，但在新版本浏览器中这些代码毫无意义。因此，可以把浏览器分为多个层次，为不同层次的浏览器给予不同的打包结果。</p>
</li>
</ul>
</li>
<li><p>对打包过程的优化</p>
<ul>
<li><p>noParse</p>
<p>很多第三方库本身就是已经打包好的代码，对于这种代码无须再进行解析，可以使用 noParse 配置排除掉这些第三方库</p>
</li>
<li><p>externals</p>
<p>对于一些知名的第三方库可以使用 CDN，这部分库可以通过 externals 配置不进行打包</p>
</li>
<li><p>限制 loader 的范围</p>
<p>在使用 loader 的时候，可以通过 exclude 排除掉一些不必要的编译，比如 babel-loader 对于那些已经完成打包的第三方库没有必要再降级一次，可以排除掉</p>
</li>
<li><p>开启 loader 缓存</p>
<p>可以利用<code>cache-loader</code>缓存 loader 的编译结果，避免在源码没有变动时反复编译</p>
</li>
<li><p>开启多线程编译</p>
<p>可以利用<code>thread-loader</code>开启多线程编译，提升编译效率</p>
</li>
<li><p>动态链接库</p>
<p>对于某些需要打包的第三方库，可以使用 dll 的方式单独对其打包，然后 DLLPlugin 将其整合到当前项目中，这样就避免了在开发中频繁去打包这些库</p>
</li>
</ul>
</li>
<li><p>对开发体验的优化</p>
<ul>
<li><p>lint</p>
<p>使用 eslint、stylelint 等工具保证团队代码风格一致</p>
</li>
<li><p>HMR</p>
<p>使用热替换避免页面刷新导致的状态丢失，提升开发体验</p>
</li>
</ul>
</li>
</ol>
</blockquote>
</li>
<li><p>具体说一下 splitchunksplugin 的使用场景及使用方法。（字节跳动）</p>
<blockquote>
<p>参考答案：</p>
<ol>
<li><p>公共模块</p>
<p>比如某些多页应用会有多个入口，从而形成多个 chunk，而这些 chunk 中用到了一些公共模块，为了减少整体的包体积，可以使用 splitchunksplugin 将公共模块分离出来。</p>
<p>可以配置 minChunks 来指定被多少个 chunk 引用时进行分包</p>
</li>
<li><p>并行下载</p>
<p>由于 HTML5 支持 defer 和 async，因此可以同时下载多个 JS 文件以充分利用带宽。如果打包结果是一个很大的文件，就无法利用到这一点。</p>
<p>可以利用 splitchunks 插件将文件进行拆分，通过配置 maxSize 属性指定包体积达到多大时进行拆分</p>
</li>
</ol>
</blockquote>
</li>
<li><p>描述一下 webpack 的构建流程？（CVTE）</p>
<blockquote>
<p>参考答案：</p>
<ol>
<li><strong>初始化参数</strong>：从配置文件和 Shell 语句中读取与合并参数，得出最终的参数</li>
<li><strong>开始编译</strong>：用上一步得到的参数初始化 Compiler 对象，加载所有配置的插件，执行对象的 <code>run</code> 方法开始执行编译</li>
<li><strong>确定入口</strong>：根据配置中的 <code>entry</code> 找出所有的入口文件</li>
<li><strong>编译模块</strong>：从入口文件出发，调用所有配置的 <code>loader</code> 对模块进行翻译，再把翻译后的内容转换成 AST，通过对 AST 的分析找出该模块依赖的模块，再 <code>递归</code> 本步骤直到所有入口依赖的文件都经过了本步骤的处理</li>
<li><strong>完成模块编译</strong>：在经过第 4 步使用 <code>loader</code> 翻译完所有模块后，得到了每个模块被翻译后的最终内容以及它们之间的 <code>依赖关系图</code></li>
<li><strong>输出资源</strong>：根据入口和模块之间的依赖关系，组装成一个个包含多个模块的 <code>Chunk</code>，再把每个 Chunk 转换成一个单独的文件加入到输出列表，这步是可以修改输出内容的最后机会</li>
<li><strong>输出完成</strong>：在确定好输出内容后，根据配置确定输出的路径和文件名，把文件内容写入到文件系统</li>
</ol>
</blockquote>
</li>
<li><p>解释一下 webpack 插件的实现原理？（CVTE）</p>
<blockquote>
<p>参考答案：</p>
<p>本质上，webpack 的插件是一个带有<code>apply</code>函数的对象。当 webpack 创建好 compiler 对象后，会执行注册插件的 apply 函数，同时将 compiler 对象作为参数传入。</p>
<p>在 apply 函数中，开发者可以通过 compiler 对象监听多个钩子函数的执行，不同的钩子函数对应 webpack 编译的不同阶段。当 webpack 进行到一定阶段后，会调用这些监听函数，同时将 compilation 对象传入。开发者可以使用 compilation 对象获取和改变 webpack 的各种信息，从而影响构建过程。</p>
</blockquote>
</li>
<li><p>有用过哪些插件做项目的分析吗？（CVTE）</p>
<blockquote>
<p>参考答案：</p>
<p>用过 webpack-bundle-analyzer 分析过打包结果，主要用于优化项目打包体积</p>
</blockquote>
</li>
<li><p>什么是 babel，有什么作用？</p>
<blockquote>
<p>参考答案：</p>
<p>babel 是一个 JS 编译器，主要用于将下一代的 JS 语言代码编译成兼容性更好的代码。</p>
<p>它其实本身做的事情并不多，它负责将 JS 代码编译成为 AST，然后依托其生态中的各种插件对 AST 中的语法和 API 进行处理</p>
</blockquote>
</li>
<li><p>解释一下 npm 模块安装机制是什么？</p>
<blockquote>
<p>参考答案：</p>
<ol>
<li>npm 会检查本地的 node_modules 目录中是否已经安装过该模块，如果已经安装，则不再重新安装</li>
<li>npm 检查缓存中是否有相同的模块，如果有，直接从缓存中读取安装</li>
<li>如果本地和缓存中均不存在，npm 会从 registry 指定的地址下载安装包，然后将其写入到本地的 node_modules 目录中，同时缓存起来。</li>
</ol>
</blockquote>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/12/19/network%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="wangzhiwei">
      <meta itemprop="description" content="javascript nodejs web developer...">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WBlog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/12/19/network%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/" class="post-title-link" itemprop="url">network问题汇总</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-12-19 09:45:52" itemprop="dateCreated datePublished" datetime="2024-12-19T09:45:52+08:00">2024-12-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-03-18 11:10:52" itemprop="dateModified" datetime="2025-03-18T11:10:52+08:00">2025-03-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9D%A2%E8%AF%95%E9%A2%98/" itemprop="url" rel="index"><span itemprop="name">面试题</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ol>
<li><p>简述 TCP 连接的过程（淘系）</p>
<blockquote>
<p>参考答案：</p>
<p>TCP 协议通过三次握手建立可靠的点对点连接，具体过程是：</p>
<p>首先服务器进入监听状态，然后即可处理连接</p>
<p>第一次握手：建立连接时，客户端发送 syn 包到服务器，并进入 SYN_SENT 状态，等待服务器确认。在发送的包中还会包含一个初始序列号 seq。此次握手的含义是客户端希望与服务器建立连接。</p>
<p>第二次握手：服务器收到 syn 包，然后回应给客户端一个 SYN+ACK 包，此时服务器进入 SYN_RCVD 状态。此次握手的含义是服务端回应客户端，表示已收到并同意客户端的连接请求。</p>
<p>第三次握手：客户端收到服务器的 SYN 包后，向服务器再次发送 ACK 包，并进入 ESTAB_LISHED 状态。</p>
<p>最后，服务端收到客户端的 ACK 包，于是也进入 ESTAB_LISHED 状态，至此，连接建立完成</p>
</blockquote>
</li>
<li><p>介绍下 HTTPS 中间人攻击</p>
<blockquote>
<p>参考答案：</p>
<p>针对 HTTPS 攻击主要有 SSL 劫持攻击和 SSL 剥离攻击两种。</p>
<p>SSL 劫持攻击是指攻击者劫持了客户端和服务器之间的连接，将服务器的合法证书替换为伪造的证书，从而获取客户端和服务器之间传递的信息。这种方式一般容易被用户发现，浏览器会明确的提示证书错误，但某些用户安全意识不强，可能会点击继续浏览，从而达到攻击目的。</p>
<p>SSL 剥离攻击是指攻击者劫持了客户端和服务器之间的连接，攻击者保持自己和服务器之间的 HTTPS 连接，但发送给客户端普通的 HTTP 连接，由于 HTTP 连接是明文传输的，即可获取客户端传输的所有明文数据。</p>
</blockquote>
</li>
<li><p>介绍下 <code>http1.0</code>、<code>http1.1</code>、<code>http2.0</code> 协议的区别？</p>
<blockquote>
<p>参考答案：</p>
<p>首先说 http1.0</p>
<p>它的特点是每次请求和响应完毕后都会销毁 TCP 连接，同时规定前一个响应完成后才能发送下一个请求。这样做有两个问题：</p>
<ol>
<li><p>无法复用连接</p>
<p>每次请求都要创建新的 TCP 连接，完成三次握手和四次挥手，网络利用率低</p>
</li>
<li><p>队头阻塞</p>
<p>如果前一个请求被某种原因阻塞了，会导致后续请求无法发送。</p>
</li>
</ol>
<p>然后是 http1.1</p>
<p>http1.1 是 http1.0 的改进版，它做出了以下改进：</p>
<ol>
<li><p>长连接</p>
<p>http1.1 允许在请求时增加请求头<code>connection:keep-alive</code>，这样便允许后续的客户端请求在一段时间内复用之前的 TCP 连接</p>
</li>
<li><p>管道化</p>
<p>基于长连接的基础，管道化可以不等第一个请求响应继续发送后面的请求，但响应的顺序还是按照请求的顺序返回。</p>
</li>
<li><p>缓存处理</p>
<p>新增响应头 cache-control，用于实现客户端缓存。</p>
</li>
<li><p>断点传输</p>
<p>在上传&#x2F;下载资源时，如果资源过大，将其分割为多个部分，分别上传&#x2F;下载，如果遇到网络故障，可以从已经上传&#x2F;下载好的地方继续请求，不用从头开始，提高效率</p>
</li>
</ol>
<p>最后是 http2.0</p>
<p>http2.0 进一步优化了传输效率，它主要有以下改进：</p>
<ol>
<li><p>二进制分帧</p>
<p>将传输的消息分为更小的二进制帧，每帧有自己的标识序号，即便被随意打乱也能在另一端正确组装</p>
</li>
<li><p>多路复用</p>
<p>基于二进制分帧，在同一域名下所有访问都是从同一个 tcp 连接中走，并且不再有队头阻塞问题，也无须遵守响应顺序</p>
</li>
<li><p>头部压缩</p>
<p>http2.0 通过字典的形式，将头部中的常见信息替换为更少的字符，极大的减少了头部的数据量，从而实现更小的传输量</p>
</li>
<li><p>服务器推</p>
<p>http2.0 允许服务器直接推送消息给客户端，无须客户端明确的请求</p>
</li>
</ol>
</blockquote>
</li>
<li><p>为什么 HTTP1.1 不能实现多路复用（腾讯）</p>
<blockquote>
<p>参考答案：</p>
<p>HTTP&#x2F;1.1 不是二进制传输，而是通过文本进行传输。由于没有流的概念，在使用并行传输（多路复用）传递数据时，接收端在接收到响应后，并不能区分多个响应分别对应的请求，所以无法将多个响应的结果重新进行组装，也就实现不了多路复用。</p>
</blockquote>
</li>
<li><p>简单讲解一下 http2 的多路复用（网易）</p>
<blockquote>
<p>参考答案：</p>
<p>在 HTTP&#x2F;2 中，有两个非常重要的概念，分别是帧（frame）和流（stream）。 帧代表着最小的数据单位，每个帧会标识出该帧属于哪个流，流也就是多个帧组成的数据流。 多路复用，就是在一个 TCP 连接中可以存在多条流。换句话说，也就是可以发送多个请求，对端可以通过帧中的标识知道属于哪个请求。通过这个技术，可以避免 HTTP 旧版本中的队头阻塞问题，极大的提高传输性能。</p>
</blockquote>
</li>
<li><p>谈谈你对 TCP 三次握手和四次挥手的理解</p>
<blockquote>
<p>TCP 协议通过三次握手建立可靠的点对点连接，具体过程是：</p>
<p>首先服务器进入监听状态，然后即可处理连接</p>
<p>第一次握手：建立连接时，客户端发送 syn 包到服务器，并进入 SYN_SENT 状态，等待服务器确认。在发送的包中还会包含一个初始序列号 seq。此次握手的含义是客户端希望与服务器建立连接。</p>
<p>第二次握手：服务器收到 syn 包，然后回应给客户端一个 SYN+ACK 包，此时服务器进入 SYN_RCVD 状态。此次握手的含义是服务端回应客户端，表示已收到并同意客户端的连接请求。</p>
<p>第三次握手：客户端收到服务器的 SYN 包后，向服务器再次发送 ACK 包，并进入 ESTAB_LISHED 状态。</p>
<p>最后，服务端收到客户端的 ACK 包，于是也进入 ESTAB_LISHED 状态，至此，连接建立完成</p>
<p>当需要关闭连接时，需要进行四次挥手才能关闭</p>
<ol>
<li>Client 向 Server 发送 FIN 包，表示 Client 主动要关闭连接，然后进入 FIN_WAIT_1 状态，等待 Server 返回 ACK 包。此后 Client 不能再向 Server 发送数据，但能读取数据。</li>
<li>Server 收到 FIN 包后向 Client 发送 ACK 包，然后进入 CLOSE_WAIT 状态，此后 Server 不能再读取数据，但可以继续向 Client 发送数据。</li>
<li>Client 收到 Server 返回的 ACK 包后进入 FIN_WAIT_2 状态，等待 Server 发送 FIN 包。</li>
<li>Server 完成数据的发送后，将 FIN 包发送给 Client，然后进入 LAST_ACK 状态，等待 Client 返回 ACK 包，此后 Server 既不能读取数据，也不能发送数据。</li>
<li>Client 收到 FIN 包后向 Server 发送 ACK 包，然后进入 TIME_WAIT 状态，接着等待足够长的时间（2MSL）以确保 Server 接收到 ACK 包，最后回到 CLOSED 状态，释放网络资源。</li>
<li>Server 收到 Client 返回的 ACK 包后便回到 CLOSED 状态，释放网络资源。</li>
</ol>
</blockquote>
</li>
<li><p>介绍 HTTPS 握手过程</p>
<blockquote>
<p>参考答案：</p>
<ol>
<li>客户端请求服务器，并告诉服务器自身支持的加密算法以及密钥长度等信息</li>
<li>服务器响应公钥和服务器证书</li>
<li>客户端验证证书是否合法，然后生成一个会话密钥，并用服务器的公钥加密密钥，把加密的结果通过请求发送给服务器</li>
<li>服务器使用私钥解密被加密的会话密钥并保存起来，然后使用会话密钥加密消息响应给客户端，表示自己已经准备就绪</li>
<li>客户端使用会话密钥解密消息，知道了服务器已经准备就绪。</li>
<li>后续客户端和服务器使用会话密钥加密信息传递消息</li>
</ol>
</blockquote>
</li>
<li><p>HTTPS 握手过程中，客户端如何验证证书的合法性</p>
<blockquote>
<p>参考答案：</p>
<ol>
<li>校验证书的颁发机构是否受客户端信任。</li>
<li>通过 CRL 或 OCSP 的方式校验证书是否被吊销。</li>
<li>对比系统时间，校验证书是否在有效期内。</li>
<li>通过校验对方是否存在证书的私钥，判断证书的网站域名是否与证书颁发的域名一致。</li>
</ol>
</blockquote>
</li>
<li><p>Http 状态码 301 和 302 的应用场景分别是什么</p>
<blockquote>
<p>参考答案：</p>
<p>301 表示永久重定向，302 表示临时重定向。</p>
<p>如果浏览器收到的是 301，则会缓存重定向的地址，之后不会再重新请求服务器，直接使用缓存的地址请求，这样可以减少请求次数。</p>
<p>但如果浏览器收到的是 302，则不会缓存重定向地址，浏览器将来会继续以原有地址请求。</p>
<p>因此，301 适合地址永久转移的场景，比如域名变更；而 302 适合临时转移的场景，比如首页临时跳转到活动页</p>
</blockquote>
</li>
<li><p>cookie 和 token 都存放在 header 中，为什么不会劫持 token？</p>
<blockquote>
<p>参考答案：</p>
<p>由于浏览器会自动发送 cookie 到服务器，因此攻击者可以利用这种特点进行 csrf 攻击。</p>
<p>而通常 token 是不放到 cookie 中的，需要浏览器端使用 JS 自行保存到 localstorage 中，在请求时也需要手动的加入到请求头中，因此不容易引发 csrf 攻击。</p>
</blockquote>
</li>
<li><p>介绍下如何实现 token 加密</p>
<blockquote>
<p>参考答案：</p>
<p>以最常见的 token 格式 jwt 为例</p>
<p>token 分为三段，分别是 header、payload、signature</p>
<p>其中，header 标识签名算法和令牌类型；payload 标识主体信息，包含令牌过期时间、发布时间、发行者、主体内容等；signature 是使用特定的算法对前面两部分进行加密，得到的加密结果。</p>
<p>token 有防篡改的特点，如果攻击者改动了前面两个部分，就会导致和第三部分对应不上，使得 token 失效。而攻击者不知道加密秘钥，因此又无法修改第三部分的值。</p>
<p>所以，在秘钥不被泄露的前提下，一个验证通过的 token 是值得被信任的。</p>
</blockquote>
</li>
<li><p>说下单点登录（新东方）</p>
<blockquote>
<p>参考答案：</p>
<p>SSO 一般都需要一个独立的认证中心（passport），子系统的登录均得通过 passport，子系统本身将不参与登录操作，当一个系统成功登录以后，passport 将会颁发一个令牌给各个子系统，子系统可以拿着令牌会获取各自的受保护资源，为了减少频繁认证，各个子系统在被 passport 授权以后，会建立一个局部会话，在一定时间内可以无需再次向 passport 发起认证。</p>
<p>具体流程是：</p>
<ol>
<li>用户访问系统 1 的受保护资源，系统 1 发现用户未登录，跳转至 sso 认证中心，并将自己的地址作为参数</li>
<li>sso 认证中心发现用户未登录，将用户引导至登录页面</li>
<li>用户输入用户名密码提交登录申请</li>
<li>sso 认证中心校验用户信息，创建用户与 sso 认证中心之间的会话，称为全局会话，同时创建授权令牌</li>
<li>sso 认证中心带着令牌跳转会最初的请求地址（系统 1）</li>
<li>系统 1 拿到令牌，去 sso 认证中心校验令牌是否有效</li>
<li>sso 认证中心校验令牌，返回有效，注册系统 1</li>
<li>系统 1 使用该令牌创建与用户的会话，称为局部会话，返回受保护资源</li>
<li>用户访问系统 2 的受保护资源</li>
<li>系统 2 发现用户未登录，跳转至 sso 认证中心，并将自己的地址作为参数</li>
<li>sso 认证中心发现用户已登录，跳转回系统 2 的地址，并附上令牌</li>
<li>系统 2 拿到令牌，去 sso 认证中心校验令牌是否有效</li>
<li>sso 认证中心校验令牌，返回有效，注册系统 2</li>
<li>系统 2 使用该令牌创建与用户的局部会话，返回受保护资源</li>
</ol>
</blockquote>
</li>
<li><p>http1.1 是如何复用 tcp 连接的？（网易）</p>
<blockquote>
<p>参考答案：</p>
<p>客户端请求服务器时，通过请求行告诉服务器使用的协议是 http1.1，同时在请求头中附带<code>connection:keep-alive</code>（为保持兼容），告诉服务器这是一个长连接，后续请求可以重复使用这一次的 TCP 连接。</p>
<p>这样做的好处是减少了三次握手和四次挥手的次数，一定程度上提升了网络利用率。但由于 http1.1 不支持多路复用，响应顺序必须按照请求顺序抵达客户端，不能真正实现并行传输，因此在 http2.0 出现之前，实际项目中往往把静态资源，比如图片，分发到不同域名下的资源服务器，以便实现真正的并行传输。</p>
</blockquote>
</li>
<li><p>文件上传如何做断点续传（网易）</p>
<blockquote>
<p>参考答案：</p>
<p>客户端将文件的二进制内容进行分片，每片数据按顺序进行序号标识，上传每片数据时同时附带其序号。服务器接收到每片数据时，将其保存成一个临时文件，并记录每个文件的 hash 和序号。</p>
<p>若上传中止，将来再次上传时，可以向服务器索要已上传的分片序号，客户端仅需上传剩余分片即可。</p>
<p>当全部分片上传完成后，服务器按照分片的顺序组装成完整的文件，并删除分片文件。</p>
</blockquote>
</li>
<li><p>介绍 SSL 和 TLS（寺库）</p>
<blockquote>
<p>参考答案：</p>
<p>它们都是用于保证传输安全的协议，介于传输层和应用层之间，TLS 是 SSL 的升级版。</p>
<p>它们的基本流程一致：</p>
<ol>
<li>客户端向服务器端索要公钥，并使用数字证书验证公钥。</li>
<li>客户端使用公钥加密会话密钥，服务端用私钥解密会话密钥，于是得到一个双方都认可的会话密钥</li>
<li>传输的数据使用会话密钥加密，然后再传输，接收消息方使用会话密钥解密得到原始数据</li>
</ol>
</blockquote>
</li>
<li><p>说说网络的五层模型（寺库）</p>
<blockquote>
<p>参考答案：</p>
<p>从上到下分别为：应用层、传输层、网络层、数据链路层、物理层。在发送消息时，消息从上到下进行打包，每一层会在上一层基础上加包，而接受消息时，从下到上进行解包，最终得到原始信息。</p>
<p>其中：</p>
<p>应用层主要面向互联网中的应用场景，比如网页、邮件、文件中心等等，它的代表协议有 http、smtp、pop3、ftp、DNS 等等</p>
<p>传输层主要面向传输过程，比如 TCP 协议是为了保证可靠的传输，而 UDP 协议则是一种无连接的广播，它们提供了不同的传输方式</p>
<p>网络层主要解决如何定位目标的问题，比如 IP、ICMP、ARP 等等</p>
<p>数据链路层的作用是将数据可靠的传输到目标，比如常见的以太网协议、P2P 协议</p>
<p>物理层是要规范网络两端使用的物理设备，比如蓝牙、wifi、光纤、网线接头等等</p>
</blockquote>
</li>
<li><p>GET 和 POST 的区别（流利说）</p>
<blockquote>
<p>参考答案：</p>
<p>从 http 协议的角度来说，GET 和 POST 它们都只是请求行中的第一个单词，除了语义不同，其实没有本质的区别。</p>
<p>之所以在实际开发中会产生各种区别，主要是因为浏览器的默认行为造成的。</p>
<p>受浏览器的影响，在实际开发中，GET 和 POST 有以下区别：</p>
<ol>
<li>浏览器在发送 GET 请求时，不会附带请求体</li>
<li>GET 请求的传递信息量有限，适合传递少量数据；POST 请求的传递信息量是没有限制的，适合传输大量数据。</li>
<li>GET 请求只能传递 ASCII 数据，遇到非 ASCII 数据需要进行编码；POST 请求没有限制</li>
<li>大部分 GET 请求传递的数据都附带在 path 参数中，能够通过分享地址完整的重现页面，但同时也暴露了数据，若有敏感数据传递，不应该使用 GET 请求，至少不应该放到 path 中</li>
<li>刷新页面时，若当前的页面是通过 POST 请求得到的，则浏览器会提示用户是否重新提交。若是 GET 请求得到的页面则没有提示。</li>
<li>GET 请求的地址可以被保存为浏览器书签，POST 不可以</li>
</ol>
</blockquote>
</li>
<li><p>http 劫持是什么？</p>
<blockquote>
<p>参考答案：</p>
<p>是指攻击者在客户端和服务器之间同时建立了连接通道，通过某种方式，让客户端请求发送到自己的服务器，然后自己就拥有了控制响应内容的能力，从而给客户端展示错误的信息。</p>
</blockquote>
</li>
<li><p>HTTP 劫持、DNS 劫持与 XSS</p>
<blockquote>
<p>参考答案：</p>
<p>http 劫持是指攻击者在客户端和服务器之间同时建立了连接通道，通过某种方式，让客户端请求发送到自己的服务器，然后自己就拥有了控制响应内容的能力，从而给客户端展示错误的信息，比如在页面中加入一些广告内容。</p>
<p>DNS 劫持是指攻击者劫持了 DNS 服务器，获得了修改 DNS 解析记录的权限，从而导致客户端请求的域名被解析到了错误的 IP 地址，攻击者通过这种方式窃取用户资料或破坏原有正常服务。</p>
<p>XSS 是指跨站脚本攻击。攻击者利用站点的漏洞，在表单提交时，在表单内容中加入一些恶意脚本，当其他正常用户浏览页面，而页面中刚好出现攻击者的恶意脚本时，脚本被执行，从而使得页面遭到破坏，或者用户信息被窃取。</p>
<p>要防范 XSS 攻击，需要在服务器端过滤脚本代码，将一些危险的元素和属性去掉或对元素进行HTML实体编码。</p>
</blockquote>
</li>
<li><p>介绍 xss csrf 攻击</p>
<blockquote>
<p>参考答案：</p>
<p>XSS：</p>
<p>XSS 是指跨站脚本攻击。攻击者利用站点的漏洞，在表单提交时，在表单内容中加入一些恶意脚本，当其他正常用户浏览页面，而页面中刚好出现攻击者的恶意脚本时，脚本被执行，从而使得页面遭到破坏，或者用户信息被窃取。</p>
<p>要防范 XSS 攻击，需要在服务器端过滤脚本代码，将一些危险的元素和属性去掉或对元素进行HTML实体编码。</p>
<p>CSRF：</p>
<p>CSRF 是跨站请求伪造，是一种挟制用户在当前已登录的Web应用上执行非本意的操作的攻击方法</p>
<p>它首先引导用户访问一个危险网站，当用户访问网站后，网站会发送请求到被攻击的站点，这次请求会携带用户的cookie发送，因此就利用了用户的身份信息完成攻击</p>
<p>防御 CSRF 攻击有多种手段：</p>
<ol>
<li>不使用cookie</li>
<li>为表单添加校验的 token 校验</li>
<li>cookie中使用sameSite字段</li>
<li>服务器检查 referer 字段</li>
</ol>
</blockquote>
</li>
<li><p>https 验证身份也就是 TSL&#x2F;SSL 身份验证的过程</p>
<blockquote>
<p>参考答案：</p>
<ol>
<li>客户端请求服务器，并告诉服务器自身支持的加密算法以及密钥长度等信息</li>
<li>服务器响应公钥和服务器证书</li>
<li>客户端验证证书是否合法，然后生成一个会话密钥，并用服务器的公钥加密密钥，把加密的结果通过请求发送给服务器</li>
<li>服务器使用私钥解密被加密的会话密钥并保存起来，然后使用会话密钥加密消息响应给客户端，表示自己已经准备就绪</li>
<li>客户端使用会话密钥解密消息，知道了服务器已经准备就绪。</li>
<li>后续客户端和服务器使用会话密钥加密信息传递消息</li>
</ol>
</blockquote>
</li>
<li><p>为什么需要 CA 机构对证书签名</p>
<blockquote>
<p>参考答案：</p>
<p>主要是为了解决证书的可信问题。如果没有权威机构对证书进行签名，客户端就无法知晓证书是否是伪造的，从而增加了中间人攻击的风险，https 就变得毫无意义。</p>
</blockquote>
</li>
<li><p>身份验证过程中会涉及到密钥，对称加密，非对称加密，摘要的概念，请解释一下</p>
<blockquote>
<p>参考答案：</p>
<p>密钥</p>
<p>密钥是一种参数，它是在明文转换为密文或将密文转换为明文的算法中输入的参数。密钥分为对称密钥与非对称密钥，分别应用在对称加密和非对称加密上。</p>
<p>对称加密</p>
<p>对称加密又叫做私钥加密，即信息的发送方和接收方使用同一个密钥去加密和解密数据。对称加密的特点是算法公开、加密和解密速度快，适合于对大数据量进行加密，常见的对称加密算法有 DES、3DES、TDEA、Blowfish、RC5 和 IDEA。</p>
<p>非对称加密</p>
<p>非对称加密也叫做公钥加密。非对称加密与对称加密相比，其安全性更好。对称加密的通信双方使用相同的密钥，如果一方的密钥遭泄露，那么整个通信就会被破解。而非对称加密使用一对密钥，即公钥和私钥，且二者成对出现。私钥被自己保存，不能对外泄露。公钥指的是公共的密钥，任何人都可以获得该密钥。用公钥或私钥中的任何一个进行加密，用另一个进行解密。</p>
<p>摘要</p>
<p>摘要算法又称哈希&#x2F;散列算法。它通过一个函数，把任意长度的数据转换为一个长度固定的数据串（通常用 16 进制的字符串表示）。算法不可逆。</p>
</blockquote>
</li>
<li><p>webSocket 协议是什么，能简述一下吗？</p>
<blockquote>
<p>参考答案：</p>
<p>websocket 协议 HTML5 带来的新协议，相对于 http，它是一个持久连接的协议，它利用 http 协议完成握手，然后通过 TCP 连接通道发送消息，使用 websocket 协议可以实现服务器主动推送消息。</p>
<p>首先，客户端若要发起 websocket 连接，首先必须向服务器发送 http 请求以完成握手，请求行中的 path 需要使用<code>ws:</code>开头的地址，请求头中要分别加入<code>upgrade、connection、Sec-WebSocket-Key、Sec-WebSocket-Version</code>标记</p>
<p>然后，服务器收到请求后，发现这是一个 websocket 协议的握手请求，于是响应行中包含<code>Switching Protocols</code>，同时响应头中包含<code>upgrade、connection、Sec-WebSocket-Accept</code>标记</p>
<p>当客户端收到响应后即可完成握手，随后使用建立的 TCP 连接直接发送和接收消息。</p>
</blockquote>
</li>
<li><p>webSocket 与传统的 http 有什么优势</p>
<blockquote>
<p>参考答案：</p>
<p>当页面中需要观察实时数据的变化（比如聊天、k 线图）时，过去我们往往使用两种方式完成</p>
<p>第一种是短轮询，即客户端每隔一段时间就向服务器发送消息，询问有没有新的数据</p>
<p>第二种是长轮询，发起一次请求询问服务器，服务器可以将该请求挂起，等到有新消息时再进行响应。响应后，客户端立即又发起一次请求，重复整个流程。</p>
<p>无论是哪一种方式，都暴露了 http 协议的弱点，即响应必须在请求之后发生，服务器是被动的，无法主动推送消息。而让客户端不断的发起请求又白白的占用了资源。</p>
<p>websocket 的出现就是为了解决这个问题，它利用 http 协议完成握手之后，就可以与服务器建立持久的连接，服务器可以在任何需要的时候，主动推送消息给客户端，这样占用的资源最少，同时实时性也最高。</p>
</blockquote>
</li>
<li><p>如何劫持 https 的请求，提供思路</p>
<blockquote>
<p>参考答案：</p>
<p>https 有防篡改的特点，只要浏览器证书验证过程是正确的，很难在用户不察觉的情况下进行攻击。但若能够更改浏览器的证书验证过程，便有机会实现 https 中间人攻击。</p>
<p>所以，要劫持 https，首先要伪造一个证书，并且要想办法让用户信任这个证书，可以有多种方式，比如病毒、恶意软件、诱导等。一旦证书被信任后，就可以利用普通中间人攻击的方式，使用伪造的证书进行攻击。</p>
</blockquote>
</li>
<li><p>怎样解决跨域问题？</p>
<blockquote>
<p>参考答案：</p>
<ol>
<li><p>使用 JSONP</p>
<p>这是一种古老的解决跨域问题的思路。</p>
<p>在需要跨域请求时，事先准备好一个处理服务器数据的函数，然后生成一个<code>&lt;script&gt;</code>元素，<code>src</code>指向跨域站点，同时把准备好的函数名通过地址参数传递到服务器。</p>
<p>跨域站点返回一段调用该函数的脚本，当客户端接收到脚本后就会运行事先准备的函数，从而实现跨域获取数据。</p>
<p>JSONP 实现简单、兼容性好，但缺点也很明显，它只支持 get 请求，同时也有安全性问题，并且对服务器端代码侵入性比较强。</p>
</li>
<li><p>使用 cors</p>
<p>在请求时，客户端使用一些特殊的请求头向服务器申请跨域访问，并通过这些请求头告诉服务器自己的行为。服务器根据自身的规则决定是否允许跨域，如果允许，则通过响应头告诉客户端可以发送跨域请求。</p>
<p>cors 协议已被各种主流浏览器支持，它安全性高，同时也不会侵入服务器代码，是目前最主流的跨域方式</p>
</li>
</ol>
<p>除此之外，远古时期的跨域处理还包括 iframe、form 等，由于它们缺陷非常明显，故很少使用了。</p>
</blockquote>
</li>
<li><p>前端如何实现即时通讯？</p>
<blockquote>
<p>参考答案：</p>
<ol>
<li>短轮询。即客户端每隔一段时间就向服务器发送消息，询问有没有新的数据</li>
<li>长轮询，发起一次请求询问服务器，服务器可以将该请求挂起，等到有新消息时再进行响应。响应后，客户端立即又发起一次请求，重复整个流程。</li>
<li>websocket，握手完毕后会建立持久性的连接通道，随后服务器可以在任何时候推送新消息给客户端</li>
</ol>
</blockquote>
</li>
<li><p>HTTP 常用状态码 301 302 304 403</p>
<blockquote>
<p>参考答案：</p>
<p>301 永久重定向，浏览器会把重定向后的地址缓存起来，将来用户再次访问原始地址时，直接引导用户访问新地址</p>
<p>302 临时重定向，浏览器会引导用户进入新地址，但不会缓存原始地址，下一次用户访问源地址时，浏览器仍然要请求原地址的服务器</p>
<p>304 资源未修改，服务器通过该状态码告诉客户端，请求的资源和过去一样，并没有任何变化，建议自行使用过去的缓存。通常，304 状态码的响应中，服务器不会附带任何的响应体。</p>
<p>403 不允许访问。服务器通过该状态码告诉客户端，这个资源目前不允许访问。这种状态码通常出现在权限不足的情况下。</p>
</blockquote>
</li>
<li><p>在浏览器地址栏输入地址，并按下回车键后，发生了哪些事情？</p>
<blockquote>
<ol>
<li><p>参考答案：</p>
<ol>
<li>浏览器自动补全协议、端口</li>
<li>浏览器自动完成url编码</li>
<li>浏览器根据url地址查找本地缓存，根据缓存规则看是否命中缓存，若命中缓存则直接使用缓存，不再发出请求</li>
<li>通过DNS解析找到服务器的IP地址</li>
<li>浏览器向服务器发出建立TCP连接的申请，完成三次握手后，连接通道建立</li>
<li>若使用了HTTPS协议，则还会进行SSL握手，建立加密信道。使用SSL握手时，会确定是否使用HTTP2</li>
<li>浏览器决定要附带哪些cookie到请求头中</li>
<li>浏览器自动设置好请求头、协议版本、cookie，发出GET请求</li>
<li>服务器处理请求，进入后端处理流程。完成处理后，服务器响应一个HTTP报文给浏览器。</li>
<li>浏览器根据使用的协议版本，以及Connection字段的约定，决定是否要保留TCP连接。</li>
<li>浏览器根据响应状态码决定如何处理这一次响应</li>
<li>浏览器根据响应头中的Content-Type字段识别响应类型，如果是text&#x2F;html，则对响应体的内容进行HTML解析，否则做其他处理</li>
<li>浏览器根据响应头的其他内容完成缓存、cookie的设置</li>
<li>浏览器开始从上到下解析HTML，若遇到外部资源链接，则进一步请求资源</li>
<li>解析过程中生成DOM树、CSSOM树，然后一边生成，一边把二者合并为渲染树（rendering tree），随后对渲染树中的每个节点计算位置和大小（reflow），最后把每个节点利用GPU绘制到屏幕（repaint）</li>
<li>在解析过程中还会触发一系列的事件，当DOM树完成后会触发DOMContentLoaded事件，当所有资源加载完毕后会触发load事件</li>
</ol>
</li>
</ol>
</blockquote>
</li>
<li><p>HTTPS 握手</p>
<blockquote>
<p>参考答案：</p>
<ol>
<li>客户端请求服务器，并告诉服务器自身支持的加密算法以及密钥长度等信息</li>
<li>服务器响应公钥和服务器证书</li>
<li>客户端验证证书是否合法，然后生成一个会话密钥，并用服务器的公钥加密密钥，把加密的结果通过请求发送给服务器</li>
<li>服务器使用私钥解密被加密的会话密钥并保存起来，然后使用会话密钥加密消息响应给客户端，表示自己已经准备就绪</li>
<li>客户端使用会话密钥解密消息，知道了服务器已经准备就绪。</li>
<li>后续客户端和服务器使用会话密钥加密信息传递消息</li>
</ol>
</blockquote>
</li>
<li><p>网页验证码是干嘛的，是为了解决什么安全问题？</p>
<blockquote>
<p>参考答案：</p>
<p>验证码主要用于让服务器区分请求是人还是机器发送的。这样做是为了避免某些程序恶意的提交大量信息到服务器，进而导致服务器产生大量的垃圾数据。有时，验证码也可以防止机器暴力破解用户密码，它通过在短时间内不断提交登录信息，尝试各种密码组合来达到破解的目的。</p>
</blockquote>
</li>
<li><p>http1.0、http2.0、http3.0 之间的区别</p>
<blockquote>
<p>参考答案：</p>
<p>http1.0</p>
<p>每次请求和响应完毕后都会销毁 TCP 连接，同时规定前一个响应完成后才能发送下一个请求。这样做有两个问题：</p>
<ol>
<li><p>无法复用连接</p>
<p>每次请求都要创建新的 TCP 连接，完成三次握手和四次挥手，网络利用率低</p>
</li>
<li><p>队头阻塞</p>
<p>如果前一个请求被某种原因阻塞了，会导致后续请求无法发送。</p>
</li>
</ol>
<p>http2.0</p>
<p>http2.0 优化了传输效率，它主要有以下改进：</p>
<ol>
<li><p>二进制分帧</p>
<p>将传输的消息分为更小的二进制帧，每帧有自己的标识序号，即便被随意打乱也能在另一端正确组装</p>
</li>
<li><p>多路复用</p>
<p>基于二进制分帧，在同一域名下所有访问都是从同一个 tcp 连接中走，并且不再有队头阻塞问题，也无须遵守响应顺序</p>
</li>
<li><p>头部压缩</p>
<p>http2.0 通过字典的形式，将头部中的常见信息替换为更少的字符，极大的减少了头部的数据量，从而实现更小的传输量</p>
</li>
<li><p>服务器推</p>
<p>http2.0 允许服务器直接推送消息给客户端，无须客户端明确的请求</p>
</li>
</ol>
<p>http3.0</p>
<p>http3.0 目前还在草案阶段，它完全抛弃了 TCP 协议，转而使用 UDP 协议，是为了进一步提升性能。</p>
<p>虽然 http2.0 进行了大量的优化，但它无法摆脱 TCP 协议本身的问题，比如建立连接时间长、对头阻塞问题等等。</p>
<p>为了保证传输的可靠性，http3.0 使用了 QUIC 协议。</p>
</blockquote>
</li>
<li><p>cookie&#x2F;sessionStorage&#x2F;localStorage 的区别</p>
<blockquote>
<p>参考答案：</p>
<p>cookie、sessionStorage、localStorage 都是保存本地数据的方式</p>
<p>其中，cookie 兼容性较好，所有浏览器均支持。浏览器针对 cookie 会有一些默认行为，比如当响应头中出现<code>set-cookie</code>字段时，浏览器会自动保存 cookie 的值；再比如，浏览器发送请求时，会附带匹配的 cookie 到请求头中。这些默认行为，使得 cookie 长期以来担任着维持登录状态的责任。与此同时，也正是因为浏览器的默认行为，给了恶意攻击者可乘之机，CSRF 攻击就是一个典型的利用 cookie 的攻击方式。虽然 cookie 不断的改进，但前端仍然需要另一种更加安全的保存数据的方式</p>
<p>HTML5 新增了 sessionStorage 和 localStorage，前者用于保存会话级别的数据，后者用于更持久的保存数据。浏览器针对它们没有任何默认行为，这样一来，就把保存数据、读取数据的工作交给了前端开发者，这就让恶意攻击者难以针对登录状态进行攻击。<br>cookie 的大小是有限制的，一般浏览器会限制同一个域下的 cookie 总量为 4M，而 sessionStorage 和 localStorage 则没有限制<br>cookie 会与 domain、path 关联，而 sessionStorage 和 localStorage 只与 domain 关联</p>
</blockquote>
</li>
<li><p>post 请求什么时候用 form data 什么时候用 request payload</p>
<blockquote>
<p>参考答案：</p>
<p>form data 适合传递简单的键值对信息，由于传递的信息比较扁平，难以传递深层次嵌套的数据</p>
<p>request payload 适合传递任意格式的数据，包括单个数字、布尔、深层次嵌套的对象、数组等，但 request payload 不适合传递文件数据</p>
<p>在前后端分离的项目中，对于非文件数据的传递，都推荐使用 request payload 的形式，以传递最明确的数据类型和数据结构，而对于文件上传，则推荐使用传统的 form data</p>
</blockquote>
</li>
<li><p>http 常见请求方法有哪些？</p>
<blockquote>
<p>参考答案：</p>
<ul>
<li>GET，表示向服务器获取资源</li>
<li>POST，表示向服务器提交信息，通常用于产生新的数据，比如注册</li>
<li>PUT，表示希望修改服务器的数据，通常用于修改</li>
<li>DELETE，表示希望删除服务器的数据</li>
<li>OPTIONS，发生在跨域的预检请求中，表示客户端向服务器申请跨域提交</li>
<li>TRACE，回显服务器收到的请求，主要用于测试和诊断</li>
<li>CONNECT，用于建立连接管道，通常在代理场景中使用，网页中很少用到</li>
</ul>
</blockquote>
</li>
<li><p>列举优化网络性能方法</p>
<blockquote>
<p>参考答案：</p>
<ul>
<li><p>优化打包体积</p>
<p>利用一些工具压缩、混淆最终打包代码，减少包体积</p>
</li>
<li><p>多目标打包</p>
<p>利用一些打包插件，针对不同的浏览器打包出不同的兼容性版本，这样一来，每个版本中的兼容性代码就会大大减少，从而减少包体积</p>
</li>
<li><p>压缩</p>
<p>现代浏览器普遍支持压缩格式，因此服务端的各种文件可以压缩后再响应给客户端，只要解压时间小于优化的传输时间，压缩就是可行的</p>
</li>
<li><p>CDN</p>
<p>利用 CDN 可以大幅缩减静态资源的访问时间，特别是对于公共库的访问，可以使用知名的 CDN 资源，这样可以实现跨越站点的缓存</p>
</li>
<li><p>缓存</p>
<p>对于除 HTML 外的所有静态资源均可以开启协商缓存，利用构建工具打包产生的文件 hash 值来置换缓存</p>
</li>
<li><p>http2</p>
<p>开启 http2 后，利用其多路复用、头部压缩等特点，充分利用带宽传递大量的文件数据</p>
</li>
<li><p>雪碧图</p>
<p>对于不使用 HTTP2 的场景，可以将多个图片合并为雪碧图，以达到减少文件的目的</p>
</li>
<li><p>defer、async</p>
<p>通过 defer 和 async 属性，可以让页面尽早加载 js 文件</p>
</li>
<li><p>prefetch、preload</p>
<p>通过 prefetch 属性，可以让页面在空闲时预先下载其他页面可能要用到的资源</p>
<p>通过 preload 属性，可以让页面预先下载本页面可能要用到的资源</p>
</li>
<li><p>多个静态资源域</p>
<p>对于不使用 HTTP2 的场景，将相对独立的静态资源分到多个域中保存，可以让浏览器同时开启多个 TCP 连接，并行下载</p>
</li>
</ul>
</blockquote>
</li>
<li><p>session 怎么消除</p>
<blockquote>
<p>参考答案：</p>
<ol>
<li><p>过期时间</p>
<p>当客户端长时间没有传递 sessionid 过来时，服务器可以在过期时间之后自动清除 session</p>
</li>
<li><p>客户端主动通知</p>
<p>可以使用 JS 监听客户端页面关闭或其他退出操作，然后通知服务器清除 session</p>
</li>
</ol>
</blockquote>
</li>
<li><p>什么是 DNS 域名解析？</p>
<blockquote>
<p>参考答案：</p>
<p>DNS 域名解析是指把域名解析成 IP 地址的过程。</p>
<p>在具体的实现上，域名解析是由多个层级的服务器共同完成的。在查询域名时，客户端会先检查自身的 DNS 映射表，若找不到解析记录，则使用用户配置的 DNS 服务器，若目标 DNS 服务器中找不到记录，则继续往上一个层级寻找，直到到达根域名服务器，根域名服务器会根据域名的类型，将解析任务分发到对应的子域名服务器依次查找，直到找到解析记录为止。</p>
</blockquote>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/12/19/browser%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="wangzhiwei">
      <meta itemprop="description" content="javascript nodejs web developer...">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WBlog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/12/19/browser%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/" class="post-title-link" itemprop="url">browser问题汇总</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-12-19 09:43:46" itemprop="dateCreated datePublished" datetime="2024-12-19T09:43:46+08:00">2024-12-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-03-18 11:10:52" itemprop="dateModified" datetime="2025-03-18T11:10:52+08:00">2025-03-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9D%A2%E8%AF%95%E9%A2%98/" itemprop="url" rel="index"><span itemprop="name">面试题</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ol>
<li><p>介绍下重绘和重排（repaint &amp; reflow），以及如何进行优化</p>
<blockquote>
<p>参考答案：</p>
<p>整个页面可以看做是一幅画，这幅画是由浏览器绘制出来的，浏览器绘制这幅画的过程称之为渲染。</p>
<p>渲染是一件复杂的工作，它大致分为以下几个过程：</p>
<ol>
<li>解析 HTML，生成 DOM 树，解析 CSS，生成样式规则树</li>
<li>将 DOM 树和样式规则树结合，生成渲染树(Render Tree)</li>
<li>根据生成的渲染树，确定元素的布局信息（元素的尺寸、位置），<strong>这一步称之为 reflow，译作重排或回流</strong></li>
<li>根据渲染树和布局信息，生成元素的像素信息（元素横纵的像素点，左上角的偏移量、每个像素的颜色等）。<strong>这一步称之为 repaint，译作重绘</strong></li>
<li>将像素信息提交到 GPU 完成屏幕绘制</li>
</ol>
<p>当元素的布局信息发生变化时，会导致重排。</p>
<p>当元素的像素信息发生变化时，会导致重绘。</p>
<p>重排一定会导致重绘，因此布局信息的变化一定会导致像素信息的变化。</p>
<p>在实际开发中，获取和设置元素尺寸、位置均会导致重排和重绘，而仅设置元素的外观（比如背景颜色）则只会导致重绘，不会导致重排。</p>
<p>重排是一项繁琐的工作，会降低效率，因此在开发中，应该尽量避免直接获取和设置元素的尺寸、位置，尽量使用变量来保存元素的布局信息。</p>
</blockquote>
</li>
<li><p>说说浏览器和 Node 事件循环的区别</p>
<blockquote>
<p>参考答案：</p>
<p>浏览器的事件循环比较简单，它把任务分为宏任务和微任务，当执行栈清空后，会优先调取微任务运行，当微任务队列清空后，才会调取宏任务运行。</p>
<p>而 node 的事件循环机制比较复杂，它将整个任务调度分为 6 个阶段，当执行栈清空后，将依次循环 6 个阶段：</p>
<ol>
<li>timers</li>
<li>pending callbacks</li>
<li>idle, prepare</li>
<li>poll</li>
<li>check</li>
<li>close callback</li>
</ol>
<p>在进入任何一个阶段时，都将检查微队列中是否有任务需要执行，只有微队列清空后才能顺利进入下一个阶段。</p>
</blockquote>
</li>
<li><p>浏览器缓存读取规则</p>
<blockquote>
<p>参考答案：</p>
<p>当需要获取一个资源时，浏览器会先检查缓存中是否存在，若命中缓存，则不会发送请求。浏览器按照一定的顺序检查缓存，具体顺序是：</p>
<ol>
<li><p>service worker</p>
<p>在 service worker 中，开发者可以根据需要将远程获取的资源缓存到 cache storage 中，之后对该资源的请求会直接从缓存中获取。</p>
<p>这部分缓存需要前端开发者手动完成的</p>
</li>
<li><p>memory cache</p>
<p>浏览器会自动将请求过的资源自动加入到 memory cache，这主要是为了解决一个页面中有多次相同的请求，比如页面中链接了多张相同的图片。</p>
<p>memory cache 是浏览器自动完成的，它保存在内存中。</p>
</li>
<li><p>disk cache</p>
<p>当浏览器得到的响应头中包含<code>cache-control</code>等缓存指令时，会按照指令的要求设置 disk cache。请求的资源会被保存在磁盘中，在指定的期限内有效。</p>
<p>disk cache 是长期的，即使关闭浏览器也不会消失。</p>
</li>
</ol>
</blockquote>
</li>
<li><p>为什么通常在发送数据埋点请求的时候使用的是 1x1 像素的透明 gif 图片？</p>
<blockquote>
<p>参考答案：</p>
<p>首先，在很多场景中，处理埋点的服务器很有可能是第三方服务器，比如百度的站点统计埋点，百度就是一个第三方服务器，这就不可避免的带来跨域问题。</p>
<p>其次，埋点服务方需要提供一种特别利于安装的埋点置入代码，使用传统的 ajax 会使代码变得臃肿。</p>
<p>同时，埋点请求绝大部分都是 get 请求，又无须得到服务器的响应结果。</p>
<p>基于以上的特点，使用 img 元素请求服务器就变得理所当然了，img 元素发出的请求天生支持跨域，书写的代码简单，只需要创建一个 img 元素，然后设置 src 为埋点请求地址即可。</p>
<p>其实请求一旦发出，埋点就成功了，无须得到服务器的响应结果。但如果服务器不给予任何响应的话，可能会导致浏览器端控制台报错，尽管这个报错并不影响实质的功能。为了避免这种情况，服务器于是响应一个最小体积的图片即可，而 1x1 像素的透明 gif 图片是体积最小的图片，自然就选用了它作为响应结果。</p>
</blockquote>
</li>
<li><p>请求时浏览器缓存 from memory cache 和 from disk cache 的依据是什么，哪些数据什么时候存放在 Memory Cache 和 Disk Cache 中？</p>
<blockquote>
<p>参考答案：</p>
<p>memory cache 是浏览器自动完成的，它不关心 http 语义，但会遵守<code>cache-control: no-store</code>指令。浏览器在请求资源后，会自动将资源加入 memory cache，在后续的请求中，若请求的 url 地址和之前缓存的对应地址相同，则直接使用 memory cache。memory cache 只缓存 get 请求，并且缓存的内容在内存中，因此会很快的清理。</p>
<p>disk cache 遵守 http 缓存语义，它会按照服务器响应头中指定的缓存要求进行缓存，由于它存在于磁盘中，因此，即便浏览器关闭后缓存内容也不会消失。它的保存时间由服务器的<code>cache-control</code>字段指定，当缓存失效后，会重新发送请求到服务器，进入协商缓存的流程。</p>
</blockquote>
</li>
<li><p>什么是浏览器同源策略？</p>
<blockquote>
<p>参考答案：</p>
<p>所谓同源，是指协议、主机、端口均相同的地址。</p>
<p>同源策略是指，当前页面和页面运行过程中发出的请求必须是同源的，即必须协议、主机、端口均相同，否则即被视为跨域请求。</p>
<p>浏览器中的大部分内容都是受同源策略限制的，但是以下三个标签可以不受限制：</p>
<ul>
<li>img</li>
<li>script</li>
<li>link</li>
</ul>
</blockquote>
</li>
<li><p>DOM Tree 是如何构建的？</p>
<blockquote>
<p>参考答案：</p>
<ol>
<li>转码: 浏览器将接收到的二进制数据按照指定编码格式转化为 HTML 字符串</li>
<li>生成 Tokens: 之后开始 parser，浏览器会将 HTML 字符串解析成 Tokens</li>
<li>构建 Nodes: 对 Node 添加特定的属性，通过指针确定 Node 的父、子、兄弟关系和所属 treeScope</li>
<li>生成 DOM Tree: 通过 node 包含的指针确定的关系构建出 DOM Tree</li>
</ol>
</blockquote>
</li>
<li><p>浏览器如何解析 css 选择器？</p>
<blockquote>
<p>参考答案：</p>
<p>浏览器读取到选择器时，会从 DOM 树中找到匹配的对应节点，然后将样式附着到对应的 DOM 元素上。当选择器出现多个层级时，浏览器会使用「从右到左」的顺序进行匹配，对应到 DOM 树的遍历上，是从叶子到根的方向进行筛选，这样可以提升匹配效率。</p>
</blockquote>
</li>
<li><p>浏览器是如何渲染 UI 的？</p>
<blockquote>
<p>参考答案：</p>
<ol>
<li>浏览器解析 HTML，形成 DOM Tree</li>
<li>解析 HTML 过程中遇到 CSS，则进行 CSS 解析，生成 Style Rules</li>
<li>将 DOM Tree 与 Style Rules 合成为 Render Tree</li>
<li>进入布局（Layout）阶段，为每个节点分配一个应出现在屏幕上的确切坐标</li>
<li>随后调用 GPU 进行绘制（Paint），遍历 Render Tree 的节点，并将元素呈现出来</li>
</ol>
</blockquote>
</li>
<li><p>浏览器的主要组成部分是什么？</p>
<blockquote>
<p>参考答案：</p>
<ol>
<li><p>用户界面（user interface）</p>
<p>用于呈现浏览器窗口部件，比如地址栏、前进后退按钮、书签、顶部菜单等</p>
</li>
<li><p>浏览器引擎（browser engine）</p>
<p>用户在用户界面和渲染引擎中传递指令</p>
</li>
<li><p>渲染引擎（rendering engine）</p>
<p>负责解析 HTML、CSS，并将解析的内容显示到屏幕上。我们平时说的浏览器内核就是指这部分。</p>
</li>
<li><p>网络（networking）</p>
<p>用户网络调用，比如发送 http 请求</p>
</li>
<li><p>用户界面后端（UI backend）</p>
<p>用于绘制基本的窗口小部件，比如下拉列表、文本框、按钮等，向上提供公开的接口，向下调用操作系统的用户界面。</p>
</li>
<li><p>JS 解释器（JavaScript interpreter）</p>
<p>解释执行 JS 代码。我们平时说的 JS 引擎就是指这部分。</p>
</li>
<li><p>数据存储（data storage）</p>
<p>用户保存数据到磁盘中。比如 cookie、localstorage 等都是使用的这部分功能。</p>
</li>
</ol>
</blockquote>
</li>
<li><p>常见的浏览器内核有哪些?</p>
<blockquote>
<p>参考答案：</p>
<table>
<thead>
<tr>
<th>浏览器</th>
<th>内核（渲染引擎）</th>
<th>JavaScript 引擎</th>
</tr>
</thead>
<tbody><tr>
<td>Chrome</td>
<td>Blink（新） Webkit（旧）</td>
<td>V8</td>
</tr>
<tr>
<td>FireFox</td>
<td>Gecko</td>
<td>SpiderMonkey</td>
</tr>
<tr>
<td>Safari</td>
<td>Webkit</td>
<td>JavaScriptCore</td>
</tr>
<tr>
<td>Edge</td>
<td>EdgeHTML</td>
<td>Chakra</td>
</tr>
<tr>
<td>IE</td>
<td>Trident</td>
<td>Chakra</td>
</tr>
<tr>
<td>PhantomJS</td>
<td>Webkit</td>
<td>JavaScriptCore</td>
</tr>
<tr>
<td>Node.js</td>
<td>无</td>
<td>V8</td>
</tr>
</tbody></table>
</blockquote>
</li>
<li><p>怎样选择合适的缓存策略</p>
<blockquote>
<p>参考答案：</p>
<ol>
<li><p>对于一次性的资源，比如验证码图片，不进行缓存。</p>
<p>设置响应头<code>cache-control: no-store</code></p>
</li>
<li><p>对于频繁变动的资源，比如某些数据接口，使用协商缓存。</p>
<p>设置响应头<code>cache-control: no-cache</code>，同时配合<code>ETag</code>标记，让浏览器缓存资源，但每次都会发送请求询问资源是否更新。</p>
</li>
<li><p>对于静态资源，比如 JS、CSS、图片等文件，使用强制缓存。</p>
<p>设置响应头<code>cache-control: max-age=有效时长</code>，设置一个很长的过期时间，比如十年，然后通过文件 hash 的处理更新</p>
</li>
</ol>
</blockquote>
</li>
<li><p>为什么用多个域名存储网站资源更有效？</p>
<blockquote>
<p>参考答案：</p>
<p>主要原因是浏览器对同一个域下的 TCP 连接数是有限制的，这样就导致某个网页如果外部资源多了，比如图片很多的网页，在解析页面时，由于 TCP 连接数受限，就无法同时发起多个下载连接，无法充分利用带宽资源。因此，可以把静态资源放到多个域名下，这样就绕开了连接数的限制，做到了并发下载。</p>
</blockquote>
</li>
<li><p>前端需要注意哪些 SEO</p>
<blockquote>
<p>参考答案：</p>
<ol>
<li><p>语义化</p>
<p>多使用语义化标签，让正确的标签对应正确的内容。</p>
</li>
<li><p>重要内容前置</p>
<p>可以利用弹性盒布局中的 order 属性，将核心、重要的内容尽量放到文档的前面。</p>
</li>
<li><p>服务端渲染</p>
<p>由于目前的搜索引擎对客户端渲染并不友好，因此使用服务端渲染仍然是 SEO 的重要手段。</p>
</li>
<li><p>TDK</p>
<p>利用 title、meta 元素，设置网页的标题、描述、关键字</p>
</li>
</ol>
</blockquote>
</li>
<li><p>浏览器是怎么对 HTML5 的离线储存资源进行管理和加载的呢</p>
<blockquote>
<p>参考答案：</p>
<p>在线的情况下，浏览器发现 html 头部有 manifest 属性，它会请求 manifest 文件，如果是第一次访问 app，那么浏览器就会根据 manifest 文件的内容下载相应的资源并且进行离线存储。如果已经访问过 app 并且资源已经离线存储了，那么浏览器就会使用离线的资源加载页面，然后浏览器会对比新的 manifest 文件与旧的 manifest 文件，如果文件没有发生改变，就不做任何操作，如果文件改变了，那么就会重新下载文件中的资源并进行离线存储。<br>离线的情况下，浏览器就直接使用离线存储的资源。</p>
</blockquote>
</li>
<li><p>如何兼容低版本浏览器</p>
</li>
</ol>
<blockquote>
<p>参考答案：</p>
<p>分为三个部分来说</p>
<p>HTML</p>
<p>低版本浏览器无法识别新增的HTML5元素，如果要兼容这部分浏览器，需要做以下处理：</p>
<ol>
<li>对于非可替换元素，比如article、section、header、footer等，这种元素虽然低版本浏览器不识别，但它仍然会把它们渲染出来，只是没有浏览器的默认样式。因此，我们只需要在css中稍作处理即可，比如给它们都加上<code>display:block</code>。</li>
<li>对于可替换元素，比如video、audio等，这种元素会涉及低版本浏览器没有功能，因此需要使用条件注释，在低版本浏览器中使用兼容的做法</li>
</ol>
<p>CSS</p>
<p>对于CSS代码，低版本浏览器可能无法识别某些CSS属性，比如圆角边框、背景渐变、过渡动画等。但由于浏览器对于不能识别样式的处理方式是「直接丢弃、不影响后续渲染」，所以，我们可以保持这样的原则：尽量让其兼容，实在不行，至少不影响浏览。按照这样的原则，我们可以对CSS进行以下处理：</p>
<ol>
<li>使用厂商前缀，尽量让其兼容。</li>
<li>对于某些样式使用JS替代，比如渐变、动画等</li>
</ol>
<p>JavaScript</p>
<p>对于JS代码，低版本浏览器无法识别H5的API，因此缺少了一些新功能，比如localstorage、web worker等。不仅如此，低版本浏览器还无法识别ES6的新语法，比如let、const、async、await等。因此，要处理JS的兼容性问题，只能具体情况具体分析，通常，我们会使用下面两种手段来完成兼容：</p>
<ol>
<li>模拟API。就是自己写一个功能完全和官方相同的API，来弥补低版本浏览器API没有的情况。比较典型的就是ES5中有大量的数组API，这些API都是可以轻松模拟的。</li>
<li>编译。某些新语法是无法模拟的，只能通过制作工具对源代码进行编译，将其新语法全部去掉，如果新语法涉及特殊功能，则转换为使用API完成，比较典型的例子就是async和await会被转换为generator的函数调用。</li>
</ol>
<p>在前端工程化的今天，上面的几乎所有兼容性问题都可以依靠工程化完成，比如，css可以依托postcss平台完成兼容性处理，JS可以依托babel平台完成兼容性处理。</p>
</blockquote>
<ol start="17">
<li>浏览器怪异模式和普通模式的区别</li>
</ol>
<blockquote>
<p>参考答案：</p>
<p>标准模式：浏览器按W3C标准解析执行代码</p>
<p>怪异模式：使用浏览器自己的方式解析执行代码，因为不同浏览器解析执行的方式不一样，所以称之为怪异模式。比如IE中盒模型的宽高使用的是边框盒。</p>
</blockquote>
<ol start="18">
<li>各个浏览器兼容前缀？</li>
</ol>
<blockquote>
<p>参考答案：</p>
<table>
<thead>
<tr>
<th>前缀</th>
<th>浏览器</th>
</tr>
</thead>
<tbody><tr>
<td>-moz-</td>
<td>firefox</td>
</tr>
<tr>
<td>-webkit-</td>
<td>chrome、safari</td>
</tr>
<tr>
<td>-o-</td>
<td>opera</td>
</tr>
<tr>
<td>-ms-</td>
<td>IE</td>
</tr>
</tbody></table>
</blockquote>
<ol start="19">
<li>跨标签页的通讯方式有哪些（哔哩哔哩）</li>
</ol>
<blockquote>
<p>参考答案：</p>
<ul>
<li>BroadCast Channel</li>
<li>Service Worker</li>
<li>LocalStorage window.onstorage 监听</li>
<li>Shared Worker 定时器轮询(setInterval)</li>
<li>IndexedDB 定时器轮询(setInterval)</li>
<li>cookie 定时器轮询(setInterval)</li>
<li>window.open window.postMessage</li>
<li>Websocket</li>
</ul>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">wangzhiwei</p>
  <div class="site-description" itemprop="description">javascript nodejs web developer...</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">62</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">56</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">62</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">wangzhiwei</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
